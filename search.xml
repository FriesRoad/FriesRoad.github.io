<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>已知待优化内容</title>
      <link href="/2023/02/02/yi-zhi-dai-you-hua-nei-rong/"/>
      <url>/2023/02/02/yi-zhi-dai-you-hua-nei-rong/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 默认分类 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>响应状态码</title>
      <link href="/2023/02/01/xiang-ying-zhuang-tai-ma/"/>
      <url>/2023/02/01/xiang-ying-zhuang-tai-ma/</url>
      
        <content type="html"><![CDATA[<h2 id="一、状态码大类"><a href="#一、状态码大类" class="headerlink" title="一、状态码大类"></a>一、状态码大类</h2><table><thead><tr><th>状态码分类</th><th>说明</th></tr></thead><tbody><tr><td>1xx</td><td><strong>响应中</strong>——临时状态码，表示请求已经接受，告诉客户端应该继续请求或者如果它已经完成则忽略它</td></tr><tr><td>2xx</td><td><strong>成功</strong>——表示请求已经被成功接收，处理已完成</td></tr><tr><td>3xx</td><td><strong>重定向</strong>——重定向到其它地方：它让客户端再发起一个请求以完成整个处理。</td></tr><tr><td>4xx</td><td><strong>客户端错误</strong>——处理发生错误，责任在客户端，如：客户端的请求一个不存在的资源，客户端未被授权，禁止访问等</td></tr><tr><td>5xx</td><td><strong>服务器端错误</strong>——处理发生错误，责任在服务端，如：服务端抛出异常，路由出错，HTTP版本不支持等</td></tr></tbody></table><p>状态码大全：<a href="https://cloud.tencent.com/developer/chapter/13553">https://cloud.tencent.com/developer/chapter/13553</a> </p><h2 id="二、常见的响应状态码"><a href="#二、常见的响应状态码" class="headerlink" title="二、常见的响应状态码"></a>二、常见的响应状态码</h2><table><thead><tr><th>状态码</th><th>英文描述</th><th>解释</th></tr></thead><tbody><tr><td>200</td><td><strong><code>OK</code></strong></td><td>客户端请求成功，即<strong>处理成功</strong>，这是我们最想看到的状态码</td></tr><tr><td>302</td><td><strong><code>Found</code></strong></td><td>指示所请求的资源已移动到由<code>Location</code>响应头给定的 URL，浏览器会自动重新访问到这个页面</td></tr><tr><td>304</td><td><strong><code>Not Modified</code></strong></td><td>告诉客户端，你请求的资源至上次取得后，服务端并未更改，你直接用你本地缓存吧。隐式重定向</td></tr><tr><td>400</td><td><strong><code>Bad Request</code></strong></td><td>客户端请求有<strong>语法错误</strong>，不能被服务器所理解</td></tr><tr><td>403</td><td><strong><code>Forbidden</code></strong></td><td>服务器收到请求，但是<strong>拒绝提供服务</strong>，比如：没有权限访问相关资源</td></tr><tr><td>404</td><td><strong><code>Not Found</code></strong></td><td><strong>请求资源不存在</strong>，一般是URL输入有误，或者网站资源被删除了</td></tr><tr><td>428</td><td><strong><code>Precondition Required</code></strong></td><td><strong>服务器要求有条件的请求</strong>，告诉客户端要想访问该资源，必须携带特定的请求头</td></tr><tr><td>429</td><td><strong><code>Too Many Requests</code></strong></td><td><strong>太多请求</strong>，可以限制客户端请求某个资源的数量，配合 Retry-After(多长时间后可以请求)响应头一起使用</td></tr><tr><td>431</td><td><strong><code> Request Header Fields Too Large</code></strong></td><td><strong>请求头太大</strong>，服务器不愿意处理请求，因为它的头部字段太大。请求可以在减少请求头域的大小后重新提交。</td></tr><tr><td>405</td><td><strong><code>Method Not Allowed</code></strong></td><td>请求方式有误，比如应该用GET请求方式的资源，用了POST</td></tr><tr><td>500</td><td><strong><code>Internal Server Error</code></strong></td><td><strong>服务器发生不可预期的错误</strong>。服务器出异常了，赶紧看日志去吧</td></tr><tr><td>503</td><td><strong><code>Service Unavailable</code></strong></td><td><strong>服务器尚未准备好处理请求</strong>，服务器刚刚启动，还未初始化好</td></tr><tr><td>511</td><td><strong><code>Network Authentication Required</code></strong></td><td><strong>客户端需要进行身份验证才能获得网络访问权限</strong></td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
            <tag> HTTP&amp;Tomcat&amp;Servlet </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware实现Windows3.1安装</title>
      <link href="/2023/02/01/vmware-shi-xian-windows3.1-an-zhuang/"/>
      <url>/2023/02/01/vmware-shi-xian-windows3.1-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h2 id="一、iso制作"><a href="#一、iso制作" class="headerlink" title="一、iso制作"></a>一、iso制作</h2><h2 id="二、安装MS-DOS-7-1"><a href="#二、安装MS-DOS-7-1" class="headerlink" title="二、安装MS-DOS 7.1"></a>二、安装MS-DOS 7.1</h2><h2 id="三、安装Windows-3-1"><a href="#三、安装Windows-3-1" class="headerlink" title="三、安装Windows 3.1"></a>三、安装Windows 3.1</h2>]]></content>
      
      
      <categories>
          
          <category> 教程文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> win3.1 </tag>
            
            <tag> DOS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Space Engine太空旅行——太阳系</title>
      <link href="/2023/01/31/space-engine-tai-kong-lu-xing-tai-yang-xi/"/>
      <url>/2023/01/31/space-engine-tai-kong-lu-xing-tai-yang-xi/</url>
      
        <content type="html"><![CDATA[<p><img src="/../images/Space-Engine%E5%A4%AA%E7%A9%BA%E6%97%85%E8%A1%8C%E2%80%94%E2%80%94%E5%A4%AA%E9%98%B3%E7%B3%BB/%E5%9C%B0%E7%90%83%E7%9C%8B%E5%A4%AA%E9%98%B3%E7%B3%BB.png" alt="地球看太阳系"><img src="/../images/Space-Engine%E5%A4%AA%E7%A9%BA%E6%97%85%E8%A1%8C%E2%80%94%E2%80%94%E5%A4%AA%E9%98%B3%E7%B3%BB/%E5%A4%AA%E9%98%B3%E7%B3%BB.png" alt="太阳系"><img src="/../images/Space-Engine%E5%A4%AA%E7%A9%BA%E6%97%85%E8%A1%8C%E2%80%94%E2%80%94%E5%A4%AA%E9%98%B3%E7%B3%BB/%E5%9C%B0%E7%90%83%E7%9C%8B%E5%A4%AA%E9%98%B3%E7%B3%BB2.png" alt="地球看太阳系2"><img src="/../images/Space-Engine%E5%A4%AA%E7%A9%BA%E6%97%85%E8%A1%8C%E2%80%94%E2%80%94%E5%A4%AA%E9%98%B3%E7%B3%BB/%E5%86%A5%E7%8E%8B%E6%98%9F%E7%9C%8B%E5%A4%AA%E9%98%B3%E7%B3%BB.png" alt="冥王星看太阳系"><img src="/../images/Space-Engine%E5%A4%AA%E7%A9%BA%E6%97%85%E8%A1%8C%E2%80%94%E2%80%94%E5%A4%AA%E9%98%B3%E7%B3%BB/%E6%AF%94%E9%82%BB%E6%98%9F%E7%9C%8B%E5%A4%AA%E9%98%B3%E7%B3%BB.png" alt="比邻星看太阳系"><img src="/../images/Space-Engine%E5%A4%AA%E7%A9%BA%E6%97%85%E8%A1%8C%E2%80%94%E2%80%94%E5%A4%AA%E9%98%B3%E7%B3%BB/%E5%9C%B0%E7%90%83.png" alt="地球"></p>]]></content>
      
      
      <categories>
          
          <category> 一些想法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Space Engine </tag>
            
            <tag> 图库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VMware实现WinXP安装</title>
      <link href="/2023/01/31/vmware-shi-xian-winxp-an-zhuang/"/>
      <url>/2023/01/31/vmware-shi-xian-winxp-an-zhuang/</url>
      
        <content type="html"><![CDATA[<h3 id="1-安装VMware虚拟机"><a href="#1-安装VMware虚拟机" class="headerlink" title="1.安装VMware虚拟机"></a>1.安装VMware虚拟机</h3><p><strong>VMware下载地址：</strong><a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">下载 VMware Workstation Pro | CN</a></p><h3 id="2-Windows-XP系统镜像下载"><a href="#2-Windows-XP系统镜像下载" class="headerlink" title="2.Windows XP系统镜像下载"></a>2.Windows XP系统镜像下载</h3><p><strong>Windows XP下载地址</strong>：<a href="https://msdn.itellyou.cn/">下载Windows XP系统镜像</a></p><p>点击进入MSDN官方连接，找到Windows XP如下图所示版本，展开详情后复制ed2k链接到迅雷，即可开始下载。</p><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131162006430.png" alt="image-20230131162006430"></p><h3 id="3-创建Windows-XP虚拟机"><a href="#3-创建Windows-XP虚拟机" class="headerlink" title="3.创建Windows XP虚拟机"></a>3.创建Windows XP虚拟机</h3><ol><li>新建虚拟机</li><li>选择自定义安装</li><li>默认最高版本下一步</li><li>选择刚刚下载的光盘iso映像文件，下一步</li><li>密钥不填，下一步，选择是</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131164051973.png" alt="image-20230131164051973"></p><ol start="6"><li>这是虚拟机安装名称与路径，下一步</li><li>默认处理器，内存，网络类型，I/O控制器类型，虚拟磁盘类型，下一步</li><li>默认选择创建新磁盘，下一步</li><li>磁盘大小可设置小一些，稍后虚拟机磁盘选择与本地共享</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131164322224.png" alt="image-20230131164322224"></p><ol start="10"><li>下一步，完成安装并启动虚拟机</li></ol><h3 id="4-等待虚拟机完成安装"><a href="#4-等待虚拟机完成安装" class="headerlink" title="4.等待虚拟机完成安装"></a>4.等待虚拟机完成安装</h3><ol><li>等待安装完成</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131164458233.png" alt="image-20230131164458233"></p><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131164640086.png" alt="image-20230131164640086"></p><ol start="2"><li>无视错误，确定并下一步</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131164928194.png" alt="image-20230131164928194"></p><ol start="3"><li>选择否并下一步</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131164954350.png" alt="image-20230131164954350"></p><ol start="4"><li>确定，并自动进入系统，安装VMware桌面适应工具</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131165404846.png" alt="image-20230131165404846"></p><ol start="5"><li>成功</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131165617266.png" alt="image-20230131165617266"></p><h3 id="5-创建本机与虚拟机的共享文件夹"><a href="#5-创建本机与虚拟机的共享文件夹" class="headerlink" title="5.创建本机与虚拟机的共享文件夹"></a>5.创建本机与虚拟机的共享文件夹</h3><ol><li>编辑虚拟机设置</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131165731778.png" alt="image-20230131165731778"></p><ol start="2"><li>共享文件夹，改为总是启用</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131165929576.png" alt="image-20230131165929576"></p><ol start="3"><li>设置本机共享资源文件夹</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131170057715.png" alt="image-20230131170057715"></p><ol start="4"><li>重启此虚拟机</li><li>右键我的电脑，选择映射网络驱动器</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131170248364.png" alt="image-20230131170248364"></p><ol start="6"><li>选择刚刚设置的文件夹</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131170731993.png" alt="image-20230131170731993"></p><ol start="7"><li>点击确定完成，即可在我的电脑里找到共享文件夹了</li></ol><p><img src="/../images/VMware%E5%AE%9E%E7%8E%B0WinXP%E5%AE%89%E8%A3%85/image-20230131170832073.png" alt="image-20230131170832073"></p><p>之后在share文件夹里的内容就可以和该虚拟机共享</p>]]></content>
      
      
      <categories>
          
          <category> 教程文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> winxp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux安装并部署Tomcat</title>
      <link href="/2023/01/31/linux-an-zhuang-bing-bu-shu-tomcat/"/>
      <url>/2023/01/31/linux-an-zhuang-bing-bu-shu-tomcat/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Linux安装"><a href="#1-Linux安装" class="headerlink" title="1.Linux安装"></a>1.Linux安装</h2><p>在安装linux之前，需要安装一台虚拟机，将linux运行在虚拟机上。<br><strong>VMware下载地址：</strong><a href="https://www.vmware.com/cn/products/workstation-pro/workstation-pro-evaluation.html">下载 VMware Workstation Pro | CN</a><br><strong>Linux镜像下载地址：</strong><a href="http://mirrors.aliyun.com/centos/7/isos/x86_64/">centos-7-isos-x86_64安装包下载_开源镜像站-阿里云</a><br>推荐版本：CentOS-7.0-x86_64-DVD-2009.iso 标准安装版</p><h3 id="1-1-创建虚拟机，模拟计算机硬件环境"><a href="#1-1-创建虚拟机，模拟计算机硬件环境" class="headerlink" title="1.1 创建虚拟机，模拟计算机硬件环境"></a>1.1 创建虚拟机，模拟计算机硬件环境</h3><ol><li>新建虚拟机</li><li>典型安装</li><li>稍后安装操作系统</li><li>选择操作系统与版本</li><li>设置虚拟机名称路径</li><li>默认设置磁盘大小20G，并选择将虚拟机拆分成多个文件</li><li>进入自定义硬件设置。默认设置内存处理器网络，选择配置下载好的ISO映像文件</li><li>完成并重启</li></ol><h3 id="1-2-虚拟机配置完成，安装linux"><a href="#1-2-虚拟机配置完成，安装linux" class="headerlink" title="1.2 虚拟机配置完成，安装linux"></a>1.2 虚拟机配置完成，安装linux</h3><ol><li><p>开机等待安装界面</p></li><li><p>选择测试并安装linux</p></li><li><p>选择中文</p></li><li><p>点击进入安装位置，确认后返回，并点击开始安装</p><p><img src="/../images/Linux%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2Tomcat/image-20230131104015691.png" alt="image-20230131104015691"></p></li><li><p>安装过程中设置root密码。如果密码太简单会有提示，可无视提示，点击两次完成</p></li><li><p>重启完成安装</p></li><li><p>输入账号密码完成登录<img src="/../images/Linux%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2Tomcat/image-20230131104802313.png" alt="image-20230131104802313"></p></li></ol><h3 id="1-3-网卡配置"><a href="#1-3-网卡配置" class="headerlink" title="1.3 网卡配置"></a>1.3 网卡配置</h3><p>由于启动服务器的时候未加载网卡，所以这里要手动修改一下配置文件</p><ol><li><p>进入对应目录</p> <pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">cd /etc/sysconfig/network-scripts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>编辑<code>ifcfg-ens33</code>文件</p> <pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">vi ifcfg-ens33<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>修改<code>ONBOOT=yes</code></p></li><li><p>保存退出</p></li><li><p>重启生效</p></li><li><p>登录后输入<code>ip addr</code>查看网卡</p><p><img src="/../images/Linux%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2Tomcat/image-20230131110221098.png" alt="image-20230131110221098"></p></li></ol><h3 id="1-4-SSH连接linux"><a href="#1-4-SSH连接linux" class="headerlink" title="1.4 SSH连接linux"></a>1.4 SSH连接linux</h3><ol><li><p><strong>安装SSH的意义：</strong>实际工作的时候，Linux操作系统都是安装在物理机上，而不是像我们现在使用的虚拟机<br>所以需要SSH连接工具，远程连接到物理机上。</p></li><li><p><strong>FinalShell下载地址：</strong><a href="http://www.hostbuf.com/c/131.html">finalshell官网最新版下载地址</a></p></li><li><p>新建连接，选择SSH连接</p></li><li><p>输入名称，ip，端口默认。本地一般用密码连接，输入账密</p><p><img src="/../images/Linux%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2Tomcat/image-20230131111324414.png" alt="image-20230131111324414"></p></li><li><p>点击快速连接</p><p><img src="/../images/Linux%E5%AE%89%E8%A3%85%E5%B9%B6%E9%83%A8%E7%BD%B2Tomcat/image-20230131111423603.png" alt="image-20230131111423603"></p></li></ol><h2 id="2-必要软件安装"><a href="#2-必要软件安装" class="headerlink" title="2.必要软件安装"></a>2.必要软件安装</h2><h3 id="2-1-软件安装方式"><a href="#2-1-软件安装方式" class="headerlink" title="2.1 软件安装方式"></a>2.1 软件安装方式</h3><ol><li><p>二进制发布包安装</p><p>软件已经针对具体平台编译打包发布，只要解压，修改配置即可</p></li><li><p>rpm安装</p><p>软件已经按照redhat的包管理规范进行打包，使用rpm命令进行安装，不能自行解决库依赖问题</p></li><li><p>yum安装</p><p>一种在线软件安装方式，本质上还是rpm安装，自动下载安装包并安装，安装过程中自动解决库依赖问题</p></li><li><p>源码编译安装</p><p>软件以源码工程的形式发布，需要自己编译打包</p></li></ol><h3 id="2-2-安装lrzsz"><a href="#2-2-安装lrzsz" class="headerlink" title="2.2 安装lrzsz"></a>2.2 安装lrzsz</h3><ol><li><p>搜索lrzsz包</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">yum list lrzsz<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>使用yum命令在线安装</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">yum install lrzsz.x86_64<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><ul><li>安装完后可输入 <code>rz</code> ，就会跳出一个窗口，选择文件后即可上传</li></ul><h3 id="2-3-安装jdk"><a href="#2-3-安装jdk" class="headerlink" title="2.3 安装jdk"></a>2.3 安装jdk</h3><ol><li><p>上传jdk安装包到linux</p></li><li><p>进入到安装包所在目录之后，解压安装包</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">tar -zxvf jdk-8u171-linux-x64.tar.gz -C /usr/local<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>配置环境变量。</p><p>使用vim命令修改<code>/etc/profile</code>文件，或者使用<code>echo</code>追加文件内容，在文件末尾添加如下配置</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">JAVA_HOME=/usr/local/jdk1.8.0_171PATH=$JAVA_HOME/bin:$PATH<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>追加命令</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">echo 'JAVA_HOME=/usr/local/jdk1.8.0_171' &gt;&gt; /etc/profileecho 'PATH=$JAVA_HOME/bin:$PATH' &gt;&gt; /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>查看文件</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">tail /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>立即生效</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">source /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>检查jdk安装是否成功</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">java -version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>看到如下jdk版本号即成功</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">[root@localhost local]# java -versionjava version "1.8.0_171"Java(TM) SE Runtime Environment (build 1.8.0_171-b11)Java HotSpot(TM) 64-Bit Server VM (build 25.171-b11, mixed mode)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="2-4-安装tomcat"><a href="#2-4-安装tomcat" class="headerlink" title="2.4 安装tomcat"></a>2.4 安装tomcat</h3><ol><li><p>上传tomcat安装包到linux</p></li><li><p>解压安装包</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">tar -zxvf apache-tomcat-7.0.57.tar.gz-C /usr/local<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>进入Tomcat的bin目录启动服务</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">sh startup.sh 或者 ./startup.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>验证是否启动成功</p><ul><li>查看进程</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">ps -ef | grep tomcat<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>​有如下服务进程即启动成功</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">[root@localhost bin]# ps -ef | grep tomcatroot      71967      1  4 16:05 pts/0    00:00:02 /usr/local/jdk1.8.0_171/bin/java -Djava.util.logging.config.file=/usr/local/apache-tomcat-7.0.57/conf/logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=/usr/local/apache-tomcat-7.0.57/endorsed -classpath /usr/local/apache-tomcat-7.0.57/bin/bootstrap.jar:/usr/local/apache-tomcat-7.0.57/bin/tomcat-juli.jar -Dcatalina.base=/usr/local/apache-tomcat-7.0.57 -Dcatalina.home=/usr/local/apache-tomcat-7.0.57 -Djava.io.tmpdir=/usr/local/apache-tomcat-7.0.57/temp org.apache.catalina.startup.Bootstrap startroot      73174  42704  0 16:06 pts/0    00:00:00 grep --color=auto tomcat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li>查看日志</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">more /usr/local/ apache-tomcat-7.0.57/logs/catalina.outtail -50 /usr/local/apache-tomcat-7.0.57/logs/catalina.out<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>停止tomcat</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">./shutdown.sh 或者 sh shutdown.sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>停止进程kill -9 xx`</p></li></ol><h3 id="2-5-防火墙操作"><a href="#2-5-防火墙操作" class="headerlink" title="2.5 防火墙操作"></a>2.5 防火墙操作</h3><ol><li><p>查看防火墙状态</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">systemctl status firewalld或者firewall-cmd --state<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>开放指定端口</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">firewall-cmd --zone=public --add-port=8080/tcp --permanent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>关闭指定端口</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">firewall-cmd --zone=public --remove-port=8080/tcp --permanent<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>立即生效</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">firewall-cmd --reload<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>查看开放的端口</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">firewall-cmd --zone=public --list-ports<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ol><h3 id="2-6-安装mysql"><a href="#2-6-安装mysql" class="headerlink" title="2.6 安装mysql"></a>2.6 安装mysql</h3><ol><li><p>监测当前系统中是否安装mysql数据库</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">查询当前系统中的所有名称带mysql的软件rpm -qa | grep mysql查询当前系统中的所有名称带mariadb的软件rpm -qa | grep mariadb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>卸载RPM</p><ul><li><p>注意：RPM (Red-Hat Package Manager)RPM软件包管理器，是红帽Linux用于管理和安装软件的工具。如果当前系统中已经安装有MySQL数据库，安装将失败。CentOS7自带mariadb，与MySQL数据库冲突。</p></li><li><p>解决冲突</p></li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">如果有就卸载掉rpm -e --nodeps mariadb-libs-5.5.68-1.el7.x86_64复查是否卸载完毕rpm -qa | grep mariadb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>解压mysql</p><ul><li>先创建要解压的目录</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">mkdir /usr/local/mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>开始解压</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">tar -zxvf mysql-5.7.25-1.el7.x86_64.rpm-bundle.tar.gz -C /usr/local/mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>按顺序安装rpm包</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">rpm -ivh mysql-community-common-5.7.25-1.el7.x86_64.rpmrpm -ivh mysql-community-libs-5.7.25-1.el7.x86_64.rpmrpm -ivh mysql-community-devel-5.7.25-1.el7.x86_64.rpmrpm -ivh mysql-community-libs-compat-5.7.25-1.el7.x86_64.rpmrpm -ivh mysql-community-client-5.7.25-1.el7.x86_64.rpmyum install net-toolsrpm -ivh mysql-community-server-5.7.25-1.el7.x86_64.rpm<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>启动mysql</p><ul><li>查看mysql服务状态</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">systemctl status mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>启动mysql服务</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">system start mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>查看已启动的服务</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">netstat -tunlp | grep mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>查看mysql进程</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">ps -df | grep mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>设置开机自启动mysql服务</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">systemctl enable mysqld\<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>登录mysql</p><ul><li>查看日志中包含password的行信息</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">cat /var/log/mysqld.log |grep 'A temporary password is generated'<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>根据查询到的密码登录mysql</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">mysql -uroot -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ul><li>登录之后修改密码</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">设置密码长度最低位数set global validate_password_length=4;设置密码安全等级低，便于密码可修改为rootset global validate_password_policy=LOW;设置密码为rootset password = password('root');开启访问权限grant all on *.* to 'root'@'%' identified by 'root';刷新权限flush privileges;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>开启防火墙端口3306</li></ul><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">开启3306防火墙端口firewall-cmd --zone=public --add-port=3306/tcp --permanent立即生效firewall-cmd --reload查看开放的端口firewall-cmd --zone=public --list-ports<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>外部连接</p><p>使用Navicat或者SQLyog就可以连接到我们的数据库了，主机名就是ip地址，用户名和密码就是刚刚设置的</p></li></ol><h2 id="3-项目部署"><a href="#3-项目部署" class="headerlink" title="3.项目部署"></a>3.项目部署</h2><h3 id="3-1-手动部署"><a href="#3-1-手动部署" class="headerlink" title="3.1 手动部署"></a>3.1 手动部署</h3><ol><li><p>在IDEA上将项目打成jar包</p><ul><li><p>通过IDEA自带的Maven面板的package指令打包即可</p></li><li><p>打完的包会放在target目录下</p></li></ul></li><li><p>将jar包上传到linux服务器</p></li></ol><ul><li><p>最好还是创建一个对应的目录</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">mkdir /usr/local/appcd /usr/local/app<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>然后使用<code>rz</code>命令上传打包好的jar包</p></li></ul><ol start="3"><li><p>启动项目</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">java -jar [打包好的jar包名]<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>检查防火墙</p><pre class="line-numbers language-linux" data-language="linux"><code class="language-linux">firewall-cmd --zone=public --list-ports<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>测试</p></li></ol><h3 id="3-2-通过shell脚本自动部署"><a href="#3-2-通过shell脚本自动部署" class="headerlink" title="3.2 通过shell脚本自动部署"></a>3.2 通过shell脚本自动部署</h3>]]></content>
      
      
      <categories>
          
          <category> 教程文章 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>更新v0.92</title>
      <link href="/2023/01/30/geng-xin-v0.92/"/>
      <url>/2023/01/30/geng-xin-v0.92/</url>
      
        <content type="html"><![CDATA[<h2 id="更新内容"><a href="#更新内容" class="headerlink" title="更新内容"></a>更新内容</h2><p>首页视频背景替换为图片背景</p><p>删除音乐插件</p><p>修复目录显示不全的问题</p>]]></content>
      
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CrmSky客户关系管理系统需求文档</title>
      <link href="/2023/01/30/crmsky-ke-hu-guan-xi-guan-li-xi-tong-xu-qiu-wen-dang/"/>
      <url>/2023/01/30/crmsky-ke-hu-guan-xi-guan-li-xi-tong-xu-qiu-wen-dang/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 文档资料 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 企业级 </tag>
            
            <tag> 需求文档 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ICU管理系统软件需求规格说明书</title>
      <link href="/2023/01/30/icu-guan-li-xi-tong-ruan-jian-xu-qiu-gui-ge-shuo-ming-shu/"/>
      <url>/2023/01/30/icu-guan-li-xi-tong-ruan-jian-xu-qiu-gui-ge-shuo-ming-shu/</url>
      
        <content type="html"><![CDATA[]]></content>
      
      
      <categories>
          
          <category> 文档资料 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 企业级 </tag>
            
            <tag> 需求文档 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA基础知识笔记（二）</title>
      <link href="/2023/01/30/java-ji-chu-zhi-shi-bi-ji-er/"/>
      <url>/2023/01/30/java-ji-chu-zhi-shi-bi-ji-er/</url>
      
        <content type="html"><![CDATA[<h2 id="1-Mybatis"><a href="#1-Mybatis" class="headerlink" title="1.Mybatis"></a>1.Mybatis</h2><h3 id="1-1简介"><a href="#1-1简介" class="headerlink" title="1.1简介"></a>1.1简介</h3><p>持久层框架，ORM（Object Relational Mapping）</p><h3 id="1-2安装"><a href="#1-2安装" class="headerlink" title="1.2安装"></a>1.2安装</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-3配置文件"><a href="#1-3配置文件" class="headerlink" title="1.3配置文件"></a>1.3配置文件</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">configuration</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Config 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-config.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environments</span> <span class="token attr-name">default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>development<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transactionManager</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>JDBC<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dataSource</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>POOLED<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>driver<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.jdbc.Driver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>url<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/test?serverTimezone=UTC<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dataSource</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environments</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mappers</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cla.xml<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mappers</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-4映射文件"><a href="#1-4映射文件" class="headerlink" title="1.4映射文件"></a>1.4映射文件</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">mapper</span>        <span class="token name">PUBLIC</span> <span class="token string">"-//mybatis.org//DTD Mapper 3.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-3-mapper.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--   namespace：命名空间，对映射文件分类管理  id：唯一标识，也称MappedStatement的id  resultType：映射结果类型--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">namespace</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>test<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectCla<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.Cla<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select * from t_class    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5日志框架"><a href="#1-5日志框架" class="headerlink" title="1.5日志框架"></a>1.5日志框架</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>setting</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>logImpl<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>LOG4J2<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="1-6属性文件"><a href="#1-6属性文件" class="headerlink" title="1.6属性文件"></a>1.6属性文件</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>db.properties<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-properties" data-language="properties"><code class="language-properties"><span class="token key attr-name">mysql.driver</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.cj.jdbc.Driver</span><span class="token key attr-name">mysql.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://localhost:3306/test?serverTimezone=UTC</span><span class="token key attr-name">mysql.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span><span class="token key attr-name">mysql.password</span><span class="token punctuation">=</span><span class="token value attr-value">123456</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-7主键值"><a href="#1-7主键值" class="headerlink" title="1.7主键值"></a>1.7主键值</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>insert</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insertCla<span class="token punctuation">"</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.Cla<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>selectKey</span> <span class="token attr-name">keyProperty</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>int<span class="token punctuation">"</span></span> <span class="token attr-name">order</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>AFTER<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        select last_insert_id()    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>selectKey</span><span class="token punctuation">&gt;</span></span>    insert into t_class(name, num)    values (#{name}, #{num})<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>insert</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-8代理模式"><a href="#1-8代理模式" class="headerlink" title="1.8代理模式"></a>1.8代理模式</h3><p>设计模式代表了最佳实践，通常被有经验的面向对象的软件开发任意所采用。设计模式是软件开发人员在软件开发过程中面临的一些问题的解决方案，这些解决方案是众多软件开发人员经过相当长的时间的试验和错误总结出来的。</p><ol><li>基于接口（JDK）</li><li>基于子类（cglib）</li></ol><h3 id="1-9基于接口"><a href="#1-9基于接口" class="headerlink" title="1.9基于接口"></a>1.9基于接口</h3><ol><li>namespace 被代理接口的全路径名</li><li>id 被代理接口中的方法名, 被代理接口中的方法参数类型</li></ol><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220617135125142.png" alt="image-20220617135125142"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220617144338047.png" alt="image-20220617144338047"></p><h3 id="1-10类型别名"><a href="#1-10类型别名" class="headerlink" title="1.10类型别名"></a>1.10类型别名</h3><ol><li>设置一个</li><li>批量设置</li><li>注解</li></ol><h3 id="1-11映射器"><a href="#1-11映射器" class="headerlink" title="1.11映射器"></a>1.11映射器</h3><h4 id="1-11-1resource"><a href="#1-11-1resource" class="headerlink" title="1.11.1resource"></a>1.11.1resource</h4><p>映射文件名称没有要求</p><h4 id="1-11-2类路径"><a href="#1-11-2类路径" class="headerlink" title="1.11.2类路径"></a>1.11.2类路径</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resources</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resource</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>directory</span><span class="token punctuation">&gt;</span></span>src/main/java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>directory</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>includes</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span><span class="token punctuation">&gt;</span></span>**/*.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>include</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>includes</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resource</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resources</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--     方式一      使用相对于类路径的资源引用    映射文件名称可以不和接口名一致 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">resource</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com/bwf/dao/StudentDao.xml<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mapper</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--    方式二    使用映射器接口实现类的完全限定类名     映射文件名称与接口名一致 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mapper</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.dao.StudentDao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token comment">&lt;!--    方式三    将包内的映射器接口实现全部注册为映射器    映射文件名称与接口名一致 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>package</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.dao<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-12高级映射"><a href="#1-12高级映射" class="headerlink" title="1.12高级映射"></a>1.12高级映射</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220617160616441.png" alt="image-20220617160616441"></p><h4 id="1-12-1一对一"><a href="#1-12-1一对一" class="headerlink" title="1.12.1一对一"></a>1.12.1一对一</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 查询订单关联查询所属用户</span><span class="token keyword">SELECT</span>o<span class="token punctuation">.</span>id<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_no<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_status<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_spuamount<span class="token punctuation">,</span>o<span class="token punctuation">.</span>createtime<span class="token punctuation">,</span>o<span class="token punctuation">.</span>updatetime<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_user_id<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_name<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_phone<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_password<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_gender<span class="token punctuation">,</span>u<span class="token punctuation">.</span>createtime<span class="token punctuation">,</span>u<span class="token punctuation">.</span>updatetime<span class="token keyword">FROM</span><span class="token identifier"><span class="token punctuation">`</span>order<span class="token punctuation">`</span></span> o<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> u <span class="token keyword">ON</span> o<span class="token punctuation">.</span>order_user_id <span class="token operator">=</span> u<span class="token punctuation">.</span>user_id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectOrderUserMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderNo<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_no<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderStatus<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderSpuAmount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_spuamount<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createtime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderUserId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_user_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 一对一 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userPhone<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_phone<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userPassword<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userGender<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_gender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createtime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-12-2一对多"><a href="#1-12-2一对多" class="headerlink" title="1.12.2一对多"></a>1.12.2一对多</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 查询订单关联查询用户和订单下的订单明细</span><span class="token keyword">SELECT</span> o<span class="token punctuation">.</span>id<span class="token punctuation">,</span>               o<span class="token punctuation">.</span>order_no<span class="token punctuation">,</span>               o<span class="token punctuation">.</span>order_status<span class="token punctuation">,</span>               o<span class="token punctuation">.</span>order_spuamount<span class="token punctuation">,</span>               o<span class="token punctuation">.</span>createtime<span class="token punctuation">,</span>               o<span class="token punctuation">.</span>updatetime<span class="token punctuation">,</span>               o<span class="token punctuation">.</span>order_user_id<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>user_name<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>user_phone<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>user_password<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>user_gender<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>createtime<span class="token punctuation">,</span>               u<span class="token punctuation">.</span>updatetime<span class="token punctuation">,</span>               od<span class="token punctuation">.</span>id odtails_id<span class="token punctuation">,</span>               od<span class="token punctuation">.</span>odtails_name<span class="token punctuation">,</span>               od<span class="token punctuation">.</span>odtails_price<span class="token punctuation">,</span>               od<span class="token punctuation">.</span>odtails_count<span class="token punctuation">,</span>               od<span class="token punctuation">.</span>odtails_amount<span class="token punctuation">,</span>               od<span class="token punctuation">.</span>odtails_orderno_id        <span class="token keyword">FROM</span> <span class="token identifier"><span class="token punctuation">`</span>order<span class="token punctuation">`</span></span> o<span class="token punctuation">,</span>             <span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> u<span class="token punctuation">,</span>             order_details od        <span class="token keyword">WHERE</span> o<span class="token punctuation">.</span>order_user_id <span class="token operator">=</span> u<span class="token punctuation">.</span>user_id          <span class="token operator">AND</span> od<span class="token punctuation">.</span>odtails_orderno_id <span class="token operator">=</span> o<span class="token punctuation">.</span>id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderUserDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectOrderUserDetailsMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderNo<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_no<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderStatus<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderSpuAmount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_spuamount<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createtime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderUserId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_user_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 一对一 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userPhone<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_phone<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userPassword<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userGender<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_gender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createtime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 一对多 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderDetails<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.OrderDetails<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsPrice<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_price<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsCount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_count<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsAmount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_amount<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsOrdernoId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_orderno_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1-12-3多对多"><a href="#1-12-3多对多" class="headerlink" title="1.12.3多对多"></a>1.12.3多对多</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 查询订单关联查询用户和订单下的订单明细和商品</span><span class="token keyword">SELECT</span>o<span class="token punctuation">.</span>id<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_no<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_status<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_spuamount<span class="token punctuation">,</span>o<span class="token punctuation">.</span>createtime<span class="token punctuation">,</span>o<span class="token punctuation">.</span>updatetime<span class="token punctuation">,</span>o<span class="token punctuation">.</span>order_user_id<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_id<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_name<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_phone<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_password<span class="token punctuation">,</span>u<span class="token punctuation">.</span>user_gender<span class="token punctuation">,</span>u<span class="token punctuation">.</span>createtime<span class="token punctuation">,</span>u<span class="token punctuation">.</span>updatetime<span class="token punctuation">,</span>od<span class="token punctuation">.</span>id odtails_id<span class="token punctuation">,</span>od<span class="token punctuation">.</span>odtails_name<span class="token punctuation">,</span>od<span class="token punctuation">.</span>odtails_price<span class="token punctuation">,</span>od<span class="token punctuation">.</span>odtails_count<span class="token punctuation">,</span>od<span class="token punctuation">.</span>odtails_amount<span class="token punctuation">,</span>odtails_orderno_id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>spu_id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>spu_name<span class="token keyword">FROM</span><span class="token identifier"><span class="token punctuation">`</span>order<span class="token punctuation">`</span></span> o<span class="token punctuation">,</span><span class="token identifier"><span class="token punctuation">`</span>user<span class="token punctuation">`</span></span> u<span class="token punctuation">,</span>order_details od<span class="token punctuation">,</span>spu s<span class="token keyword">WHERE</span>o<span class="token punctuation">.</span>order_user_id <span class="token operator">=</span> u<span class="token punctuation">.</span>user_id<span class="token operator">AND</span> od<span class="token punctuation">.</span>odtails_orderno_id <span class="token operator">=</span> o<span class="token punctuation">.</span>id<span class="token operator">AND</span> od<span class="token punctuation">.</span>odtails_spu_id <span class="token operator">=</span> s<span class="token punctuation">.</span>spu_id<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">OrderDao</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderUserDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectOrderUserDetailsSpu</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectOrderUserDetailsSpuMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderNo<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_no<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderStatus<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_status<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderSpuAmount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_spuamount<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createtime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderUserId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>order_user_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 一对一 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.User<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userPhone<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_phone<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userPassword<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_password<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>userGender<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>user_gender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>createtime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updateTime<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>updatetime<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 一对多 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>collection</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>orderDetails<span class="token punctuation">"</span></span> <span class="token attr-name">ofType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.OrderDetails<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>id<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsPrice<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_price<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsCount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_count<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsAmount<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_amount<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtailsOrdernoId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>odtails_orderno_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- 一对一 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spu<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.Spu<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spu_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spu_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>collection</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-13动态SQL"><a href="#1-13动态SQL" class="headerlink" title="1.13动态SQL"></a>1.13动态SQL</h3><ol><li>where</li></ol><p><em>where</em> 元素只会在子元素返回任何内容的情况下才插入 “WHERE” 子句。而且，若子句的开头为 “AND” 或 “OR”，<em>where</em> 元素也会将它们去除。</p><h3 id="1-14传参"><a href="#1-14传参" class="headerlink" title="1.14传参"></a>1.14传参</h3><ol><li>pojo</li><li>@Param(“spuName”)</li><li>list  Available parameters are [arg0, collection, list]</li><li>array Available parameters are [array, arg0]</li><li>map</li><li>普通 Available parameters are [arg1, arg0, param1, param2]</li></ol><h3 id="1-15注解"><a href="#1-15注解" class="headerlink" title="1.15注解"></a>1.15注解</h3><ol><li>@Select</li><li>@Update</li><li>@Insert</li><li>@Delete</li><li>@Param</li><li>@Result</li><li>@Results</li><li>@ResultMap</li><li>@One</li><li>@Many</li></ol><h3 id="1-16缓存"><a href="#1-16缓存" class="headerlink" title="1.16缓存"></a>1.16缓存</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220112163108685.png" alt="image-20220112163108685"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/%E4%BA%8C%E7%BA%A73.png" alt="二级3"></p><h4 id="1-16-1一级缓存"><a href="#1-16-1一级缓存" class="headerlink" title="1.16.1一级缓存"></a>1.16.1一级缓存</h4><p><strong>HashMap（SqlSession级别）</strong></p><p><strong>insert、update 和 delete 语句会刷新缓存</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> spu_id spuId<span class="token punctuation">,</span> spu_name spuName<span class="token punctuation">,</span> spu_title <span class="token keyword">from</span> spu <span class="token keyword">WHERE</span> spu_id <span class="token operator">=</span> <span class="token number">2338887</span> <span class="token operator">and</span> spu_name <span class="token operator">=</span> <span class="token string">"南极人 枕头家纺666"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="1-16-2二级缓存"><a href="#1-16-2二级缓存" class="headerlink" title="1.16.2二级缓存"></a>1.16.2二级缓存</h4><ol><li>配置文件</li></ol><p><img src="C:/Users/席/Desktop/学习文档/java22/img/image-20220621103023819.png" alt="image-20220621103023819"></p><ol start="2"><li>映射文件</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 要启用全局的二级缓存，只需要在你的 SQL 映射文件中添加一行 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cache</span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li>单条语句</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--将其设置为 true 后，将会导致本条语句的结果被二级缓存缓存起来，默认值：对 select 元素为 true。--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">...</span> <span class="token attr-name">flushCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span> <span class="token attr-name">useCache</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>序列化</p><pre class="line-numbers language-console" data-language="console"><code class="language-console">Cache Hit Ratio [com.bwf.dao.SpuDao]: 0.5<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><strong>insert、update 和 delete 语句会刷新缓存</strong></p><h4 id="1-16-3自定义缓存"><a href="#1-16-3自定义缓存" class="headerlink" title="1.16.3自定义缓存"></a>1.16.3自定义缓存</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>ibatis<span class="token punctuation">.</span>cache<span class="token punctuation">.</span></span>Cache</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="1-17延迟加载"><a href="#1-17延迟加载" class="headerlink" title="1.17延迟加载"></a>1.17延迟加载</h3><p><strong>查询Sku关联查询Spu</strong></p><ol><li>配置文件</li></ol><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220621103347876.png" alt="image-20220621103347876"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220621103440259.png" alt="image-20220621103440259"></p><ol start="2"><li>接口</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Sku</span><span class="token punctuation">&gt;</span></span> <span class="token function">selectSkuLazy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>映射文件</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 延迟加载--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>resultMap</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectSkuLazyMap<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sku<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skuId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sku_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>result</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>skuName<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sku_name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>result</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>association</span> <span class="token attr-name">property</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spu<span class="token punctuation">"</span></span> <span class="token attr-name">javaType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.pojo.Spu<span class="token punctuation">"</span></span> <span class="token attr-name">select</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectSpuBySpuId<span class="token punctuation">"</span></span> <span class="token attr-name">column</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sku_spu_id<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>association</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>resultMap</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectSkuLazy<span class="token punctuation">"</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectSkuLazyMap<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    select sku_id, sku_name, sku_spu_id    from sku limit 0,10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>selectSpuBySpuId<span class="token punctuation">"</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spu<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    select spu_id spuId, spu_name spuName, spu_title spuTitle    from spu where spu_id = #{sku_spu_id}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-18-和"><a href="#1-18-和" class="headerlink" title="1.18#和$"></a>1.18#和$</h3><p>#{} 占位符 以预编译的方式将参数设置到sql语言中</p><p>${}  拼接符 将参数直接拼接到sql语句中  （sql注入）</p><h3 id="1-19MyBatis-Generator"><a href="#1-19MyBatis-Generator" class="headerlink" title="1.19MyBatis Generator"></a>1.19MyBatis Generator</h3><p><a href="http://mybatis.org/generator/">http://mybatis.org/generator/</a></p><ol><li>pom.xml</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-generator-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.generator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-generator-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.4.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>Generate MyBatis Artifacts<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>generate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>配置文件</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">generatorConfiguration</span> <span class="token name">PUBLIC</span>        <span class="token string">"-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span>        <span class="token string">"http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>generatorConfiguration</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--    &lt;classPathEntry location="D:\works22\mysql-connector-java-5.1.49.jar" /&gt;--&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>context</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>simple<span class="token punctuation">"</span></span> <span class="token attr-name">targetRuntime</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>MyBatis3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- 数据库连接 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>jdbcConnection</span> <span class="token attr-name">driverClass</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.mysql.cj.jdbc.Driver<span class="token punctuation">"</span></span>                        <span class="token attr-name">connectionURL</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>jdbc:mysql://localhost:3306/shop_data?serverTimezone=UTC<span class="token punctuation">"</span></span>                        <span class="token attr-name">userId</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span>                        <span class="token attr-name">password</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>123456<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!-- pojo --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaModelGenerator</span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.model<span class="token punctuation">"</span></span> <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>src/main/java<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!-- 映射文件 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sqlMapGenerator</span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.dao<span class="token punctuation">"</span></span> <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>src/main/java<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enableSubPackages<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sqlMapGenerator</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- Dao --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>javaClientGenerator</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>XMLMAPPER<span class="token punctuation">"</span></span> <span class="token attr-name">targetPackage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.dao<span class="token punctuation">"</span></span> <span class="token attr-name">targetProject</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>src\main\java<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enableSubPackages<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>javaClientGenerator</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- 表 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">schema</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shop_data<span class="token punctuation">"</span></span> <span class="token attr-name">tableName</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spu<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>context</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>generatorConfiguration</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-Spring-Framework"><a href="#2-Spring-Framework" class="headerlink" title="2.Spring Framework"></a>2.Spring Framework</h2><p><a href="https://spring.io/">https://spring.io/</a></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/spring.webp" alt="spring"></p><h3 id="2-1IOC"><a href="#2-1IOC" class="headerlink" title="2.1IOC"></a>2.1IOC</h3><p> Inversion of Control (IoC) container 控制反转</p><h4 id="2-1-1pom-xml"><a href="#2-1-1pom-xml" class="headerlink" title="2.1.1pom.xml"></a>2.1.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-beans<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-context<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-1-2配置文件"><a href="#2-1-2配置文件" class="headerlink" title="2.1.2配置文件"></a>2.1.2配置文件</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--      id:对象的唯一标识      class:类全路径名      scope:          1.prototype 多例, getBean()创建，GC          2.singleton 默认 单例            创建：容器创建时                 第一次获取时 lazy-init="true"            销毁：容器关闭时      创建方式：      1.默认构造方法      2.静态工厂      3.实例工厂    --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.service.SpuServiceImpl<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>singleton<span class="token punctuation">"</span></span>      <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>destroy<span class="token punctuation">"</span></span> <span class="token attr-name">lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.dao.SpuDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-2IOC注解"><a href="#2-2IOC注解" class="headerlink" title="2.2IOC注解"></a>2.2IOC注解</h3><p><a href="https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-annotation-config">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-annotation-config</a></p><h4 id="2-2-1配置文件"><a href="#2-2-1配置文件" class="headerlink" title="2.2.1配置文件"></a>2.2.1配置文件</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 配置spring创建容器时需要扫描的包 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="22-2注解"><a href="#22-2注解" class="headerlink" title="22.2注解"></a>22.2注解</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"spuService"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span><span class="token string">"spuService"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Repository</span><span class="token punctuation">(</span><span class="token string">"spuDao"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Controller</span><span class="token annotation punctuation">@Scope</span><span class="token punctuation">(</span><span class="token string">"singleton"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Lazy</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token annotation punctuation">@PostConstruct</span><span class="token annotation punctuation">@PreDestroy</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-3DI"><a href="#2-3DI" class="headerlink" title="2.3DI"></a>2.3DI</h3><p>dependency injection (DI) 依赖注入</p><ol><li>set方法注入</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.service.SpuServiceImpl<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>singleton<span class="token punctuation">"</span></span>      <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>destroy<span class="token punctuation">"</span></span> <span class="token attr-name">lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuDao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>list1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>list2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuDao<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.dao.SpuDaoImpl<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">private</span> <span class="token class-name">SpuDao</span> spuDao<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setSpuDao</span><span class="token punctuation">(</span><span class="token class-name">SpuDao</span> spuDao<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>spuDao <span class="token operator">=</span> spuDao<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setList</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>list <span class="token operator">=</span> list<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>构造方法注入</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.service.SpuServiceImpl<span class="token punctuation">"</span></span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>singleton<span class="token punctuation">"</span></span>          <span class="token attr-name">init-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>init<span class="token punctuation">"</span></span> <span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>destroy<span class="token punctuation">"</span></span> <span class="token attr-name">lazy-init</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuDao<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuDao<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>list1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>list2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuId<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>110<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>constructor-arg</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spuName<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>得力<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>constructor-arg</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">int</span> spuId<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">String</span> spuName<span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token class-name">SpuServiceImpl</span><span class="token punctuation">(</span><span class="token keyword">int</span> spuId<span class="token punctuation">,</span> <span class="token class-name">String</span> spuName<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>spuId <span class="token operator">=</span> spuId<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>spuName <span class="token operator">=</span> spuName<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>注解</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//按类型自动注入</span><span class="token annotation punctuation">@Autowired</span><span class="token comment">//按类型自动匹配的基础上，再结合bean的id匹配</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"spuDao2"</span><span class="token punctuation">)</span><span class="token comment">//按bean的id注入</span><span class="token annotation punctuation">@Resource</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"spuDao"</span><span class="token punctuation">)</span><span class="token keyword">private</span> <span class="token class-name">SpuDao</span> spuDao<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-4纯注解"><a href="#2-4纯注解" class="headerlink" title="2.4纯注解"></a>2.4纯注解</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//配置类</span><span class="token annotation punctuation">@Configuration</span><span class="token comment">//扫描</span><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">"com.bwf"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-5AOP"><a href="#2-5AOP" class="headerlink" title="2.5AOP"></a>2.5AOP</h3><h4 id="2-5-1概念"><a href="#2-5-1概念" class="headerlink" title="2.5.1概念"></a>2.5.1概念</h4><p>AOP为Aspect Oriented Programming的缩写，意为：<a href="https://baike.baidu.com/item/%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B/6016335">面向切面编程</a>，通过<a href="https://baike.baidu.com/item/%E9%A2%84%E7%BC%96%E8%AF%91/3191547">预编译</a>方式和运行期间动态代理实现程序功能的统一维护的一种技术。AOP是<a href="https://baike.baidu.com/item/OOP">OOP</a>的延续，是软件开发中的一个热点，也是<a href="https://baike.baidu.com/item/Spring">Spring</a>框架中的一个重要内容，是<a href="https://baike.baidu.com/item/%E5%87%BD%E6%95%B0%E5%BC%8F%E7%BC%96%E7%A8%8B/4035031">函数式编程</a>的一种衍生范型。</p><p>利用AOP可以对业务逻辑的各个部分进行隔离，从而使得业务逻辑各部分之间的<a href="https://baike.baidu.com/item/%E8%80%A6%E5%90%88%E5%BA%A6/2603938">耦合度</a>降低，提高程序的可重用性，同时提高了开发的效率。</p><p><strong>在不改变原有代码的基础上，还能对原有功能进行增强</strong></p><h4 id="2-5-2pom-xml"><a href="#2-5-2pom-xml" class="headerlink" title="2.5.2pom.xml"></a>2.5.2pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-aop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="25-3术语"><a href="#25-3术语" class="headerlink" title="25.3术语"></a>25.3术语</h4><ol><li><p>Advice：通知（增强）</p><p>前置：目标方法调用前执行</p><p>后置：目标方法调用后执行</p><p>异常：目标方法抛出异常时执行</p><p>最终：不管目标方法是否正常执行都会在其后执行</p><p>环绕:</p></li><li><p>Pointcut：切入点，实际被增强的方法</p></li><li><p>JoinPoint：连接点，可以被增强的方法</p></li><li><p>Aspectj：切面，切入点和通知的结合</p></li></ol><h4 id="25-4切入点表达式"><a href="#25-4切入点表达式" class="headerlink" title="25.4切入点表达式"></a>25.4切入点表达式</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--  public int com.bwf.service.SpuServiceImpl.save(..)1.  *     *2.        *   *.*.*.*.*(..)3.        *   *..*.*(..)4.        *  com.bwf.service.*.*(..)5.        *  com.bwf.service.*.abc*(..)--&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-6AOP注解"><a href="#2-6AOP注解" class="headerlink" title="2.6AOP注解"></a>2.6AOP注解</h3><h4 id="2-6-1pom-xml"><a href="#2-6-1pom-xml" class="headerlink" title="2.6.1pom.xml"></a>2.6.1pom.xml</h4><h4 id="2-6-2通知"><a href="#2-6-2通知" class="headerlink" title="2.6.2通知"></a>2.6.2通知</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>aspectj-autoproxy</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Aspect</span><span class="token annotation punctuation">@Pointcut</span><span class="token punctuation">(</span><span class="token string">"execution(* com.bwf.service.*.*(..))"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@Before</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@After</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@AfterReturning</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@AfterThrowing</span><span class="token punctuation">(</span><span class="token string">"pt()"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-7JdbcTemplate"><a href="#2-7JdbcTemplate" class="headerlink" title="2.7JdbcTemplate"></a>2.7JdbcTemplate</h3><p>模板设计模式</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220623165437881.png" alt="image-20220623165437881"></p><h4 id="2-7-1pom-xml"><a href="#2-7-1pom-xml" class="headerlink" title="2.7.1pom.xml"></a>2.7.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-jdbc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>8.0.25<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-8Bean"><a href="#2-8Bean" class="headerlink" title="2.8Bean"></a>2.8Bean</h3><p>作用：把方法的返回值放入到Ioc容器中</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"dataSource"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">DruidDataSource</span> <span class="token function">getDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">DruidDataSource</span> dataSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DruidDataSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dataSource<span class="token punctuation">.</span><span class="token function">setUrl</span><span class="token punctuation">(</span><span class="token string">"jdbc:mysql://localhost:3306/shop_data?serverTimezone=UTC"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dataSource<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">"root"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    dataSource<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">"123456"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> dataSource<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">"jdbcTemplate"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">JdbcTemplate</span> <span class="token function">getJdbcTemplate</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Qualifier</span><span class="token punctuation">(</span><span class="token string">"dataSource"</span><span class="token punctuation">)</span> <span class="token class-name">DruidDataSource</span> dataSource<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">JdbcTemplate</span> jdbcTemplate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    jdbcTemplate<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> jdbcTemplate<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//读取属性文件</span><span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">"db.properties"</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="2-9事务"><a href="#2-9事务" class="headerlink" title="2.9事务"></a>2.9事务</h3><p>ACID</p><h4 id="2-9-1编程式"><a href="#2-9-1编程式" class="headerlink" title="2.9.1编程式"></a>2.9.1编程式</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//1.事务管理器</span><span class="token class-name">DataSourceTransactionManager</span> transactionManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DataSourceTransactionManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>transactionManager<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.事务定义</span><span class="token class-name">DefaultTransactionDefinition</span> transactionDefinition <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultTransactionDefinition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.1隔离级别</span>transactionDefinition<span class="token punctuation">.</span><span class="token function">setIsolationLevel</span><span class="token punctuation">(</span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">.</span><span class="token constant">ISOLATION_READ_COMMITTED</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.2传播行为</span>transactionDefinition<span class="token punctuation">.</span><span class="token function">setPropagationBehavior</span><span class="token punctuation">(</span><span class="token class-name">TransactionDefinition</span><span class="token punctuation">.</span><span class="token constant">PROPAGATION_REQUIRED</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2.3超时时间</span>transactionDefinition<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//永不超时</span><span class="token comment">//2.4是否只读</span>transactionDefinition<span class="token punctuation">.</span><span class="token function">setReadOnly</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//3.事务状态</span><span class="token class-name">TransactionStatus</span> transactionStatus <span class="token operator">=</span> transactionManager<span class="token punctuation">.</span><span class="token function">getTransaction</span><span class="token punctuation">(</span>transactionDefinition<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">try</span> <span class="token punctuation">{</span>    accountDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token operator">-</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>    accountDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>    transactionManager<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span>transactionStatus<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    transactionManager<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span>transactionStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-9-2事务模板"><a href="#2-9-2事务模板" class="headerlink" title="2.9.2事务模板"></a>2.9.2事务模板</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Override</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transfer</span><span class="token punctuation">(</span><span class="token class-name">String</span> from<span class="token punctuation">,</span> <span class="token class-name">String</span> <span class="token keyword">to</span><span class="token punctuation">,</span> <span class="token keyword">double</span> balance<span class="token punctuation">)</span> <span class="token punctuation">{</span>    transactionTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransactionCallback</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token annotation punctuation">@Override</span>        <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">doInTransaction</span><span class="token punctuation">(</span><span class="token class-name">TransactionStatus</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>            accountDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>from<span class="token punctuation">,</span> <span class="token operator">-</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>            accountDao<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">to</span><span class="token punctuation">,</span> balance<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-9-3声明式"><a href="#2-9-3声明式" class="headerlink" title="2.9.3声明式"></a>2.9.3声明式</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--AOP 使用事务 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transactionManager<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>transfer<span class="token punctuation">"</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>REQUIRED<span class="token punctuation">"</span></span> <span class="token attr-name">timeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>insert*<span class="token punctuation">"</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>REQUIRED<span class="token punctuation">"</span></span> <span class="token attr-name">timeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>-1<span class="token punctuation">"</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>false<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--AOP --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pt<span class="token punctuation">"</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>execution(* com.bwf.service.*.*(..))<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>txAdvice<span class="token punctuation">"</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pt<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>advisor</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-9-4注解"><a href="#2-9-4注解" class="headerlink" title="2.9.4注解"></a>2.9.4注解</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">"com.bwf"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token string">"db.properties"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@EnableTransactionManagement</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringConfig</span> <span class="token punctuation">{</span>        <span class="token comment">//方法或类上</span><span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>isolation <span class="token operator">=</span> <span class="token class-name">Isolation</span><span class="token punctuation">.</span><span class="token constant">REPEATABLE_READ</span><span class="token punctuation">,</span> propagation <span class="token operator">=</span> <span class="token class-name">Propagation</span><span class="token punctuation">.</span><span class="token constant">REQUIRED</span><span class="token punctuation">,</span> readOnly <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> timeout <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-9-5隔离级别"><a href="#2-9-5隔离级别" class="headerlink" title="2.9.5隔离级别"></a>2.9.5隔离级别</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TransactionDefinition</span> <span class="token punctuation">{</span>    <span class="token keyword">int</span> <span class="token constant">ISOLATION_DEFAULT</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//读未提交（一个事务可以读取另一个并行事务已修改还未提交的数据）脏读</span>    <span class="token keyword">int</span> <span class="token constant">ISOLATION_READ_UNCOMMITTED</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//读已提交（只允许读已提交的数据）避免脏读</span>    <span class="token keyword">int</span> <span class="token constant">ISOLATION_READ_COMMITTED</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">//可重复读（可以确保一个事务不会修改已经由另一个事务读取但未提交的数据）避免脏读和不可重复读</span>    <span class="token keyword">int</span> <span class="token constant">ISOLATION_REPEATABLE_READ</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">//串行化</span>    <span class="token keyword">int</span> <span class="token constant">ISOLATION_SERIALIZABLE</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>    <span class="token comment">//使用数据库默认隔离级别（可重复读）</span>select @<span class="token annotation punctuation">@tx_isolation</span><span class="token punctuation">;</span>select @<span class="token annotation punctuation">@global.tx_isolation</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-9-6传播行为"><a href="#2-9-6传播行为" class="headerlink" title="2.9.6传播行为"></a>2.9.6传播行为</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">TransactionDefinition</span> <span class="token punctuation">{</span>    <span class="token comment">//如果上下文中已有事务，那么就加入事务中执行，如果没有则开启一个事务（默认）  </span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_REQUIRED</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//增删改                                 </span>    <span class="token comment">//如果存在一个事务，支持当前事务，如果没有事务，则以非事务运行          </span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_SUPPORTS</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//查询</span>    <span class="token comment">//如果存在一个事务，支持当前事务，如果没有事务，则抛出异常</span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_MANDATORY</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>    <span class="token comment">//总是开启一个事务，如果事务已存在，则将这个事务挂起</span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_REQUIRES_NEW</span> <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token comment">//总是以非事务运行，如果事务已存在，则将这个事务挂起</span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_NOT_SUPPORTED</span> <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">//总是以非事务运行，如果事务已存在，则抛出异常</span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_NEVER</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>    <span class="token comment">//如果存在一个事务，则嵌套运行在事务中，如果没有则按PROPAGATION_REQUIRED的方式运行</span>    <span class="token keyword">int</span> <span class="token constant">PROPAGATION_NESTED</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-10集成Junit"><a href="#2-10集成Junit" class="headerlink" title="2.10集成Junit"></a>2.10集成Junit</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.12<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//SpringJUnit4ClassRunner requires JUnit 4.12 or higher.</span><span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">//@ContextConfiguration(locations = "classpath:beans.xml")</span><span class="token class-name">ClassPathXmlApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClassPathXmlApplicationContext</span><span class="token punctuation">(</span><span class="token string">"beans.xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>classes <span class="token operator">=</span> <span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token class-name">AnnotationConfigApplicationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AnnotationConfigApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">SpringConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-11集成Log4j2"><a href="#2-11集成Log4j2" class="headerlink" title="2.11集成Log4j2"></a>2.11集成Log4j2</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.17.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.logging.log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.17.2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-12集成mybatis"><a href="#2-12集成mybatis" class="headerlink" title="2.12集成mybatis"></a>2.12集成mybatis</h3><h4 id="2-12-1pom-xml"><a href="#2-12-1pom-xml" class="headerlink" title="2.12.1pom.xml"></a>2.12.1pom.xml</h4><h4 id="2-12-2配置文件"><a href="#2-12-2配置文件" class="headerlink" title="2.12.2配置文件"></a>2.12.2配置文件</h4><ol><li>beans.xml</li><li>mybatis-config.xml</li><li>log4j2.xml</li><li>db.properties</li></ol><h2 id="3-SpringMVC"><a href="#3-SpringMVC" class="headerlink" title="3.SpringMVC"></a>3.SpringMVC</h2><h3 id="3-1原理"><a href="#3-1原理" class="headerlink" title="3.1原理"></a>3.1原理</h3><p>Model（模型）存储数据</p><p>View（视图）显示数据</p><p>Controller（控制器）</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/springmvc.png" alt="springmvc"></p><h3 id="3-2pom-xml"><a href="#3-2pom-xml" class="headerlink" title="3.2pom.xml"></a>3.2pom.xml</h3><ol><li>IOC</li><li>MVC</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-webmvc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${spring.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-3配置"><a href="#3-3配置" class="headerlink" title="3.3配置"></a>3.3配置</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.servlet.DispatcherServlet<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>contextConfigLocation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>classpath*:spring-mvc.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>app<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">context:</span>component-scan</span> <span class="token attr-name">base-package</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">context:</span>component-scan</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 映射器，适配器 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 视图解析器 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.servlet.view.InternalResourceViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.jsp<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-4请求参数绑定"><a href="#3-4请求参数绑定" class="headerlink" title="3.4请求参数绑定"></a>3.4请求参数绑定</h3><h4 id="3-4-1简单类型"><a href="#3-4-1简单类型" class="headerlink" title="3.4.1简单类型"></a>3.4.1简单类型</h4><ol><li>请求参数名称和方法形参名称一致，自动绑定</li><li>请求参数名称和方法形参名称不一致， @RequestParam</li></ol><h4 id="3-4-2POJO类型"><a href="#3-4-2POJO类型" class="headerlink" title="3.4.2POJO类型"></a>3.4.2POJO类型</h4><ol><li>请求参数名称和实体类的成员变量名称一致，自动绑定</li></ol><h4 id="3-4-3JSON类型"><a href="#3-4-3JSON类型" class="headerlink" title="3.4.3JSON类型"></a>3.4.3JSON类型</h4><ol><li>js</li></ol><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'testJsonString'</span><span class="token punctuation">,</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>    <span class="token literal-property property">contentType</span><span class="token operator">:</span> <span class="token string">"application/json;charset=utf-8"</span><span class="token punctuation">,</span>    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string-property property">"spuId"</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string-property property">"spuName"</span><span class="token operator">:</span> <span class="token string">"a"</span><span class="token punctuation">,</span> <span class="token string-property property">"spuTitle"</span><span class="token operator">:</span> <span class="token string">"b"</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"success"</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token literal-property property">https</span><span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>runoob<span class="token punctuation">.</span>com<span class="token operator">/</span>http<span class="token operator">/</span>http<span class="token operator">-</span>content<span class="token operator">-</span>type<span class="token punctuation">.</span>html<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>pom.xml</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.78<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>springmvc配置文件</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>supportedMediaTypes<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>application/json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>java</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/testJsonString"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testJsonString</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Spu</span> spu<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"spu = "</span> <span class="token operator">+</span> spu<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-4-4请求头-Cookie-Req-Resp"><a href="#3-4-4请求头-Cookie-Req-Resp" class="headerlink" title="3.4.4请求头,Cookie,Req,Resp"></a>3.4.4请求头,Cookie,Req,Resp</h4><h4 id="3-4-5RESTful"><a href="#3-4-5RESTful" class="headerlink" title="3.4.5RESTful"></a>3.4.5RESTful</h4><p>增：<a href="http://localhost:8080/%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84/1/a/b">http://localhost:8080/项目路径/1/a/b</a>  POST</p><p>删：<a href="http://localhost:8080/%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84/1">http://localhost:8080/项目路径/1</a>          DELETE</p><p>改：<a href="http://localhost:8080/%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84/1/a1">http://localhost:8080/项目路径/1/a1</a>     PUT</p><p>查：<a href="http://localhost:8080/%E9%A1%B9%E7%9B%AE%E8%B7%AF%E5%BE%84/1">http://localhost:8080/项目路径/1</a>           GET</p><h4 id="3-4-6自定义类型转换"><a href="#3-4-6自定义类型转换" class="headerlink" title="3.4.6自定义类型转换"></a>3.4.6自定义类型转换</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StringToDate</span> <span class="token keyword">implements</span> <span class="token class-name">Converter</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Date</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Date</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SimpleDateFormat</span> format <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyy-MM-dd"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">{</span>            date <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ParseException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> date<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>annotation-driven</span> <span class="token attr-name">conversion-service</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conversionService<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.alibaba.fastjson.support.spring.FastJsonHttpMessageConverter<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>supportedMediaTypes<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>list</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>application/json<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>list</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>message-converters</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>annotation-driven</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 自定义类型转换器 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>conversionService<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.context.support.ConversionServiceFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>converters<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.convert.StringToDate<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-5乱码"><a href="#3-5乱码" class="headerlink" title="3.5乱码"></a>3.5乱码</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-class</span><span class="token punctuation">&gt;</span></span>org.springframework.web.filter.CharacterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-class</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>encoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>utf-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>forceRequestEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>forceResponseEncoding<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-mapping</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>filter-name</span><span class="token punctuation">&gt;</span></span>characterEncodingFilter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>filter-mapping</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-6响应"><a href="#3-6响应" class="headerlink" title="3.6响应"></a>3.6响应</h3><h4 id="3-6-1逻辑视图名"><a href="#3-6-1逻辑视图名" class="headerlink" title="3.6.1逻辑视图名"></a>3.6.1逻辑视图名</h4><h4 id="3-6-2ModelAndView"><a href="#3-6-2ModelAndView" class="headerlink" title="3.6.2ModelAndView"></a>3.6.2ModelAndView</h4><h4 id="3-6-3Model、ModelMap"><a href="#3-6-3Model、ModelMap" class="headerlink" title="3.6.3Model、ModelMap"></a>3.6.3Model、ModelMap</h4><h4 id="3-6-4JSON"><a href="#3-6-4JSON" class="headerlink" title="3.6.4JSON"></a>3.6.4JSON</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/testJsonString"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ResponseBody</span><span class="token keyword">public</span> <span class="token class-name">Spu</span> <span class="token function">testJsonString</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">Spu</span> spu<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"spu = "</span> <span class="token operator">+</span> spu<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> spu<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-6-5重定向"><a href="#3-6-5重定向" class="headerlink" title="3.6.5重定向"></a>3.6.5重定向</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/testRedirect2"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRedirect2</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">RedirectAttributes</span> redirectAttributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">//参数在url后http://localhost:8080/spring_mvc_war_exploded/testRedirect3?name=zhangsan</span>    <span class="token comment">//        redirectAttributes.addAttribute("name", name);</span>    <span class="token comment">//参数暂时保存到session中，重定向获取参数后从session中删除</span>    redirectAttributes<span class="token punctuation">.</span><span class="token function">addFlashAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"redirect:/testRedirect3"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/testRedirect3"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">testRedirect3</span><span class="token punctuation">(</span><span class="token annotation punctuation">@ModelAttribute</span><span class="token punctuation">(</span><span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"name = "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"success"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-7统一异常处理"><a href="#3-7统一异常处理" class="headerlink" title="3.7统一异常处理"></a>3.7统一异常处理</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/%E7%BB%9F%E4%B8%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86.png" alt="统一异常处理"></p><h4 id="3-7-1HandlerExceptionResolver"><a href="#3-7-1HandlerExceptionResolver" class="headerlink" title="3.7.1HandlerExceptionResolver"></a>3.7.1HandlerExceptionResolver</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionResolver</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerExceptionResolver</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">ModelAndView</span> <span class="token function">resolveException</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ModelAndView</span> modelAndView <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">setViewName</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        modelAndView<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"msg"</span><span class="token punctuation">,</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> modelAndView<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-7-2注解"><a href="#3-7-2注解" class="headerlink" title="3.7.2注解"></a>3.7.2注解</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionResolver</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">ArrayIndexOutOfBoundsException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handlerArrayIndexOutOfBoundsException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ArrayIndexOutOfBoundsException"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        ex<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"ex.getMessage() = "</span> <span class="token operator">+</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">NullPointerException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handlerNullPointerException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-8拦截器"><a href="#3-8拦截器" class="headerlink" title="3.8拦截器"></a>3.8拦截器</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/%E6%8B%A6%E6%88%AA%E5%99%A8.jpg" alt="拦截器"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"postHandle..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"afterCompletion..."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 拦截器 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- 拦截的请求路径 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/**<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token comment">&lt;!-- 排除拦截的请求路径 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>exclude-mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>exclude-mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/user<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>com.bwf.interceptor.MyInterceptor<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-9上传下载"><a href="#3-9上传下载" class="headerlink" title="3.9上传下载"></a>3.9上传下载</h3><h4 id="3-9-1pom-xml"><a href="#3-9-1pom-xml" class="headerlink" title="3.9.1pom.xml"></a>3.9.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-io<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-9-2上传"><a href="#3-9-2上传" class="headerlink" title="3.9.2上传"></a>3.9.2上传</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 文件解析器 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipartResolver<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.web.multipart.commons.CommonsMultipartResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>maxUploadSize<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>1000000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="3-10校验"><a href="#3-10校验" class="headerlink" title="3.10校验"></a>3.10校验</h3><h4 id="3-10-1pom-xml"><a href="#3-10-1pom-xml" class="headerlink" title="3.10.1pom.xml"></a>3.10.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>javax.validation<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>validation-api<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hibernate<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hibernate-validator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.0.1.Final<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 校验解析器 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>validator<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.springframework.validation.beanvalidation.LocalValidatorFactoryBean<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>providerClass<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.hibernate.validator.HibernateValidator<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220121095140880.png" alt="image-20220121095140880"></p><h2 id="4-Spring-Boot"><a href="#4-Spring-Boot" class="headerlink" title="4.Spring Boot"></a>4.Spring Boot</h2><p><a href="https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/">https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/</a></p><h3 id="4-1pom-xml"><a href="#4-1pom-xml" class="headerlink" title="4.1pom.xml"></a>4.1pom.xml</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-2Writing-the-Code"><a href="#4-2Writing-the-Code" class="headerlink" title="4.2Writing the Code"></a>4.2Writing the Code</h3><h4 id="4-2-1启动方式一"><a href="#4-2-1启动方式一" class="headerlink" title="4.2.1启动方式一"></a>4.2.1启动方式一</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@EnableAutoConfiguration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplication</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>    <span class="token class-name">String</span> <span class="token function">home</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"Hello World!"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-2-2启动方式二"><a href="#4-2-2启动方式二" class="headerlink" title="4.2.2启动方式二"></a>4.2.2启动方式二</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableAutoConfiguration</span><span class="token annotation punctuation">@ComponentScan</span><span class="token punctuation">(</span><span class="token string">"com.bwf.controller"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyApplication</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">MyApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-2-3启动方式三"><a href="#4-2-3启动方式三" class="headerlink" title="4.2.3启动方式三"></a>4.2.3启动方式三</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//默认扫描启动类所在包及其子包</span><span class="token annotation punctuation">@SpringBootApplication</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">App</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-3注解"><a href="#4-3注解" class="headerlink" title="4.3注解"></a>4.3注解</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableAutoConfiguration</span><span class="token annotation punctuation">@SpringBootApplication</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="4-4静态资源"><a href="#4-4静态资源" class="headerlink" title="4.4静态资源"></a>4.4静态资源</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#web.servlet.spring-mvc.static-content">https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#web.servlet.spring-mvc.static-content</a></p><h3 id="4-5模板引擎"><a href="#4-5模板引擎" class="headerlink" title="4.5模板引擎"></a>4.5模板引擎</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#web.servlet.spring-mvc.template-engines">https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#web.servlet.spring-mvc.template-engines</a></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//ThymeleafAutoConfiguration</span><span class="token comment">//ThymeleafProperties</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="4-6yaml-x2F-yml"><a href="#4-6yaml-x2F-yml" class="headerlink" title="4.6yaml/yml"></a>4.6yaml/yml</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//官方 spring-boot-starter-xxx</span>xxxAutoConfigurationxxxProperties<span class="token comment">//举例</span><span class="token class-name">DataSourceAutoConfiguration</span><span class="token class-name">DataSourceProperties</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>META-INF/spring.factories</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220701152458250.png" alt="image-20220701152458250"></p><h3 id="4-7Web-Server"><a href="#4-7Web-Server" class="headerlink" title="4.7Web Server"></a>4.7Web Server</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#howto.webserver.configure">https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#howto.webserver.configure</a></p><h3 id="4-8数据库连接池"><a href="#4-8数据库连接池" class="headerlink" title="4.8数据库连接池"></a>4.8数据库连接池</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#data.sql.datasource.connection-pool">https://docs.spring.io/spring-boot/docs/2.7.1/reference/htmlsingle/#data.sql.datasource.connection-pool</a></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">DruidDataSourceAutoConfigure</span><span class="token class-name">DruidStatProperties</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="4-9mybatis"><a href="#4-9mybatis" class="headerlink" title="4.9mybatis"></a>4.9mybatis</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.4<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">MybatisAutoConfiguration</span><span class="token class-name">MybatisProperties</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">mybatis</span><span class="token punctuation">:</span>  <span class="token key atrule">type-aliases-package</span><span class="token punctuation">:</span> com.bwf.pojo  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> mybatis/<span class="token important">*.xml</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="4-10Log4j2"><a href="#4-10Log4j2" class="headerlink" title="4.10Log4j2"></a>4.10Log4j2</h3><p><a href="https://docs.spring.io/spring-boot/docs/2.6.3/reference/htmlsingle/#features.logging">https://docs.spring.io/spring-boot/docs/2.6.3/reference/htmlsingle/#features.logging</a></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-log4j2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.7.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>  <span class="token key atrule">config</span><span class="token punctuation">:</span> classpth<span class="token punctuation">:</span>log4j2/log4j2.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-logging<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-11统一异常处理"><a href="#4-11统一异常处理" class="headerlink" title="4.11统一异常处理"></a>4.11统一异常处理</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@ControllerAdvice</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GlobalExceptionResolver</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@ExceptionHandler</span><span class="token punctuation">(</span><span class="token class-name">RuntimeException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>    <span class="token annotation punctuation">@ResponseBody</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">handlerRuntimeException</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-12拦截器"><a href="#4-12拦截器" class="headerlink" title="4.12拦截器"></a>4.12拦截器</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">MyInterceptor</span> myInterceptor<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">InterceptorRegistration</span> registration <span class="token operator">=</span> registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>myInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span>        registration<span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">"/**"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        registration<span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">"/login"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-13多环境配置"><a href="#4-13多环境配置" class="headerlink" title="4.13多环境配置"></a>4.13多环境配置</h3><p>dev、test、pre、prd</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>    <span class="token key atrule">active</span><span class="token punctuation">:</span> prd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="4-14logback"><a href="#4-14logback" class="headerlink" title="4.14logback"></a>4.14logback</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Configuration</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>ch.qos.logback.core.ConsoleAppender<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>encoder</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pattern</span><span class="token punctuation">&gt;</span></span>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pattern</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>encoder</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appender</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>root</span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>DEBUG<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>STDOUT<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>root</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Configuration</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">logging</span><span class="token punctuation">:</span>  <span class="token key atrule">config</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>logback/logback.xml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="4-15自定义配置"><a href="#4-15自定义配置" class="headerlink" title="4.15自定义配置"></a>4.15自定义配置</h3><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">bwf</span><span class="token punctuation">:</span>  <span class="token key atrule">name</span><span class="token punctuation">:</span> zhangsan  <span class="token key atrule">title</span><span class="token punctuation">:</span> abc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">"bwf"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@ToString</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Spu</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> <span class="token class-name">Spu</span> spu<span class="token punctuation">;</span><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">"${bwf.name}"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> bwfName<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="4-16异步任务"><a href="#4-16异步任务" class="headerlink" title="4.16异步任务"></a>4.16异步任务</h3><h2 id="5Thymeleaf"><a href="#5Thymeleaf" class="headerlink" title="5Thymeleaf"></a>5Thymeleaf</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/thymeleaf.png" alt="thymeleaf"></p><h3 id="5-1SpringMVC集成"><a href="#5-1SpringMVC集成" class="headerlink" title="5.1SpringMVC集成"></a>5.1SpringMVC集成</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.15.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>thymeleaf-spring5<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.0.15.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateResolver<span class="token punctuation">"</span></span>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.thymeleaf.spring5.templateresolver.SpringResourceTemplateResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prefix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/WEB-INF/templates/<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>suffix<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>.html<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateMode<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTML<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>cacheable<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateEngine<span class="token punctuation">"</span></span>      <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.thymeleaf.spring5.SpringTemplateEngine<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateResolver<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateResolver<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>enableSpringELCompiler<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>org.thymeleaf.spring5.view.ThymeleafViewResolver<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateEngine<span class="token punctuation">"</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>templateEngine<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>characterEncoding<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="5-2表达式语法"><a href="#5-2表达式语法" class="headerlink" title="5.2表达式语法"></a>5.2表达式语法</h3><p><a href="https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#standard-expression-syntax">https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#standard-expression-syntax</a></p><h3 id="5-3设置属性值"><a href="#5-3设置属性值" class="headerlink" title="5.3设置属性值"></a>5.3设置属性值</h3><table><thead><tr><th><code>th:abbr</code></th><th><code>th:accept</code></th><th><code>th:accept-charset</code></th></tr></thead><tbody><tr><td><code>th:accesskey</code></td><td><code>th:action</code></td><td><code>th:align</code></td></tr><tr><td><code>th:alt</code></td><td><code>th:archive</code></td><td><code>th:audio</code></td></tr><tr><td><code>th:autocomplete</code></td><td><code>th:axis</code></td><td><code>th:background</code></td></tr><tr><td><code>th:bgcolor</code></td><td><code>th:border</code></td><td><code>th:cellpadding</code></td></tr><tr><td><code>th:cellspacing</code></td><td><code>th:challenge</code></td><td><code>th:charset</code></td></tr><tr><td><code>th:cite</code></td><td><code>th:class</code></td><td><code>th:classid</code></td></tr><tr><td><code>th:codebase</code></td><td><code>th:codetype</code></td><td><code>th:cols</code></td></tr><tr><td><code>th:colspan</code></td><td><code>th:compact</code></td><td><code>th:content</code></td></tr><tr><td><code>th:contenteditable</code></td><td><code>th:contextmenu</code></td><td><code>th:data</code></td></tr></tbody></table><h3 id="5-4语句"><a href="#5-4语句" class="headerlink" title="5.4语句"></a>5.4语句</h3><h4 id="5-4-1判断"><a href="#5-4-1判断" class="headerlink" title="5.4.1判断"></a>5.4.1判断</h4><p>th:if</p><p>th:unless</p><h4 id="5-4-2遍历"><a href="#5-4-2遍历" class="headerlink" title="5.4.2遍历"></a>5.4.2遍历</h4><p>th:each</p><h3 id="5-5内联"><a href="#5-5内联" class="headerlink" title="5.5内联"></a>5.5内联</h3><h4 id="5-5-1表达式内联"><a href="#5-5-1表达式内联" class="headerlink" title="5.5.1表达式内联"></a>5.5.1表达式内联</h4><p>[[${name}]]</p><p>th:text=”${name}”</p><h4 id="5-5-2js内联"><a href="#5-5-2js内联" class="headerlink" title="5.5.2js内联"></a>5.5.2js内联</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script th<span class="token operator">:</span>inline<span class="token operator">=</span><span class="token string">"javascript"</span><span class="token operator">&gt;</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>$<span class="token punctuation">{</span>name<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="6-Spring-Security"><a href="#6-Spring-Security" class="headerlink" title="6.Spring Security"></a>6.Spring Security</h2><p>Apache <em>Shiro</em>是一个强大且易用的Java安全<em>框架</em>,执行身份验证、授权、密码和会话管理</p><p><em>Spring Security</em>是一个能够为基于Spring的企业应用系统提供声明式的安全访问控制解决方案的安全框架</p><h3 id="6-1概述"><a href="#6-1概述" class="headerlink" title="6.1概述"></a>6.1概述</h3><ol><li>认证  authentication</li></ol><p>​    验证用户是否为系统的合法主体，一个要求提供用户名和密码</p><ol start="2"><li>授权 authorization</li></ol><p>​    验证用户是否有权限执行某个操作（基于角色，基于资源）</p><h3 id="6-2认证"><a href="#6-2认证" class="headerlink" title="6.2认证"></a>6.2认证</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">AuthenticationManager</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220706102533370.png" alt="image-20220706102533370"></p><h4 id="6-2-1默认用户名密码"><a href="#6-2-1默认用户名密码" class="headerlink" title="6.2.1默认用户名密码"></a>6.2.1默认用户名密码</h4><p>用户：user</p><p>密码：489bce86-ef00-4173-913f-db574c0c1411</p><p>SecurityAutoConfiguration</p><h4 id="6-2-2application-yml配置"><a href="#6-2-2application-yml配置" class="headerlink" title="6.2.2application.yml配置"></a>6.2.2application.yml配置</h4><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">security</span><span class="token punctuation">:</span>    <span class="token key atrule">user</span><span class="token punctuation">:</span>      <span class="token key atrule">name</span><span class="token punctuation">:</span> admin      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-2-3内存"><a href="#6-2-3内存" class="headerlink" title="6.2.3内存"></a>6.2.3内存</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig01</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        <span class="token class-name">BCryptPasswordEncoder</span> encoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> encode <span class="token operator">=</span> encoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        auth<span class="token punctuation">.</span><span class="token function">inMemoryAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withUser</span><span class="token punctuation">(</span><span class="token string">"bwf"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">password</span><span class="token punctuation">(</span>encode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">roles</span><span class="token punctuation">(</span><span class="token string">"bwf"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">getPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-2-4UserDetailsService"><a href="#6-2-4UserDetailsService" class="headerlink" title="6.2.4UserDetailsService"></a>6.2.4UserDetailsService</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Service</span><span class="token punctuation">(</span><span class="token string">"userDetailsService"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserDetailsServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserDetailsService</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"username = "</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">BCryptPasswordEncoder</span> passwordEncoder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> encode <span class="token operator">=</span> passwordEncoder<span class="token punctuation">.</span><span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">GrantedAuthority</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">AuthorityUtils</span><span class="token punctuation">.</span><span class="token function">commaSeparatedStringToAuthorityList</span><span class="token punctuation">(</span><span class="token string">"query,insert,update,delete"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">"bwf"</span><span class="token punctuation">,</span> encode<span class="token punctuation">,</span> list<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SecurityConfig02</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Autowired</span>    <span class="token keyword">private</span> <span class="token class-name">UserDetailsService</span> userDetailsService<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>        auth<span class="token punctuation">.</span><span class="token function">userDetailsService</span><span class="token punctuation">(</span>userDetailsService<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">PasswordEncoder</span> <span class="token function">getPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="6-3授权"><a href="#6-3授权" class="headerlink" title="6.3授权"></a>6.3授权</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">AuthorizationManager</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="6-4注解"><a href="#6-4注解" class="headerlink" title="6.4注解"></a>6.4注解</h3><ol><li><p>@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true) 开启注解</p></li><li><p>@Secured()           基于角色校验</p></li><li><p>@PreAuthorize()  方法之前校验</p></li><li><p>@PostAuthorize() 方法后校验</p></li></ol><h3 id="6-5Remember-Me"><a href="#6-5Remember-Me" class="headerlink" title="6.5Remember-Me"></a>6.5Remember-Me</h3><p>RememberMeAuthenticationFilter</p><h4 id="6-5-1登录页"><a href="#6-5-1登录页" class="headerlink" title="6.5.1登录页"></a>6.5.1登录页</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>remember-me<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>记住我<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="6-5-2建表"><a href="#6-5-2建表" class="headerlink" title="6.5.2建表"></a>6.5.2建表</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql">JdbcTokenRepositoryImpl<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> persistent_logins <span class="token punctuation">(</span>username <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>series <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>token <span class="token keyword">VARCHAR</span> <span class="token punctuation">(</span><span class="token number">64</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>last_used <span class="token keyword">TIMESTAMP</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-5-3依赖"><a href="#6-5-3依赖" class="headerlink" title="6.5.3依赖"></a>6.5.3依赖</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>runtime<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-5-4application-yaml"><a href="#6-5-4application-yaml" class="headerlink" title="6.5.4application.yaml"></a>6.5.4application.yaml</h4><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.cj.jdbc.Driver    <span class="token key atrule">username</span><span class="token punctuation">:</span> root    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/test<span class="token punctuation">?</span>serverTimezone=UTC    <span class="token key atrule">druid</span><span class="token punctuation">:</span>      <span class="token key atrule">initial-size</span><span class="token punctuation">:</span> <span class="token number">10</span>      <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">10</span>      <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">10</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-5-5配置类"><a href="#6-5-5配置类" class="headerlink" title="6.5.5配置类"></a>6.5.5配置类</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> <span class="token class-name">DataSource</span> dataSource<span class="token punctuation">;</span><span class="token annotation punctuation">@Autowired</span><span class="token keyword">private</span> <span class="token class-name">PersistentTokenRepository</span> persistentTokenRepository<span class="token punctuation">;</span><span class="token annotation punctuation">@Bean</span><span class="token keyword">public</span> <span class="token class-name">PersistentTokenRepository</span> <span class="token function">getPersistentTokenRepository</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">JdbcTokenRepositoryImpl</span> repository <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JdbcTokenRepositoryImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//        repository.setCreateTableOnStartup(true);//自动创建表</span>    repository<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//设置数据源</span>    <span class="token keyword">return</span> repository<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Override</span><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>    http<span class="token punctuation">.</span><span class="token function">exceptionHandling</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">accessDeniedPage</span><span class="token punctuation">(</span><span class="token string">"/unauth.html"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//无权限</span>    http<span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">loginPage</span><span class="token punctuation">(</span><span class="token string">"/login.html"</span><span class="token punctuation">)</span><span class="token comment">//跳转到自定义登录页面</span>        <span class="token punctuation">.</span><span class="token function">loginProcessingUrl</span><span class="token punctuation">(</span><span class="token string">"/loginDo"</span><span class="token punctuation">)</span><span class="token comment">//登录处理路径</span>        <span class="token punctuation">.</span><span class="token function">defaultSuccessUrl</span><span class="token punctuation">(</span><span class="token string">"/success.html"</span><span class="token punctuation">)</span><span class="token comment">//登录成功，跳转页面</span>        <span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//不需要授权</span>        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//需要授权的请求</span>        <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/query"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"admin"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/insert"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">"dev"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">"/update"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasAnyRole</span><span class="token punctuation">(</span><span class="token string">"test,project"</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">rememberMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">tokenRepository</span><span class="token punctuation">(</span>persistentTokenRepository<span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//关闭跨站请求保护</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="7-Jwt"><a href="#7-Jwt" class="headerlink" title="7.Jwt"></a>7.Jwt</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/session.png" alt="session"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/session%E5%A4%8D%E5%88%B6-1657093410749.webp" alt="session复制"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/jwt.png" alt="jwt"></p><h3 id="7-1概念"><a href="#7-1概念" class="headerlink" title="7.1概念"></a>7.1概念</h3><p>JSON Web Tokens are an open, industry standard <a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a> method for representing claims securely between two parties.</p><p>JWT是一个开放的行业标准（ RFC 7519）</p><h3 id="7-2组成"><a href="#7-2组成" class="headerlink" title="7.2组成"></a>7.2组成</h3><ol><li>Header</li></ol><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">{</span>  <span class="token property">"alg"</span><span class="token operator">:</span> <span class="token string">"HS256"</span><span class="token punctuation">,</span>  <span class="token property">"typ"</span><span class="token operator">:</span> <span class="token string">"JWT"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>Payload</li></ol><pre class="line-numbers language-json" data-language="json"><code class="language-json">Registered claims<span class="token operator">:</span><span class="token punctuation">{</span>   iss (issuer)<span class="token operator">:</span> <span class="token string">"发行人"</span>，   exp (expiration time)<span class="token operator">:</span> <span class="token string">"到期时间"</span><span class="token punctuation">,</span>   sub (subject)<span class="token operator">:</span> <span class="token string">"主体"</span>，   aud<span class="token operator">:</span> <span class="token string">"用户"</span>   https<span class="token operator">:</span><span class="token comment">//datatracker.ietf.org/doc/html/rfc7519#section-4.1</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>Signature</li></ol><p>HMACSHA256</p><h3 id="7-2auth0"><a href="#7-2auth0" class="headerlink" title="7.2auth0"></a>7.2auth0</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.auth0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>java-jwt<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="8-微服务"><a href="#8-微服务" class="headerlink" title="8.微服务"></a>8.微服务</h2><h3 id="8-1传统架构"><a href="#8-1传统架构" class="headerlink" title="8.1传统架构"></a>8.1传统架构</h3><p>订单</p><p>com.bwf.order.controller</p><p>com.bwf.order.service</p><p>com.bwf.order.dao</p><p>支付</p><p>com.bwf.pay.controller</p><p>com.bwf.pay.service</p><p>com.bwf.pay.dao</p><h3 id="8-2分布式"><a href="#8-2分布式" class="headerlink" title="8.2分布式"></a>8.2分布式</h3><p>根据业务拆分</p><h3 id="8-3SOA（面向服务的架构）"><a href="#8-3SOA（面向服务的架构）" class="headerlink" title="8.3SOA（面向服务的架构）"></a>8.3SOA（面向服务的架构）</h3><p>协议SOAP（http+xml）</p><h3 id="8-4微服务"><a href="#8-4微服务" class="headerlink" title="8.4微服务"></a>8.4微服务</h3><p>http+json</p><h3 id="8-5Spring-Cloud-Alibaba"><a href="#8-5Spring-Cloud-Alibaba" class="headerlink" title="8.5Spring Cloud Alibaba"></a>8.5Spring Cloud Alibaba</h3><p><a href="https://github.com/alibaba/">https://github.com/alibaba/</a></p><ol><li><p>服务发现 nacos           Spring cloud Eureka</p></li><li><p>服务注册 nacos           Spring Cloud Config</p></li><li><p>远程调用                      Spring Cloud OpenFeign</p></li><li><p>网关                              Spring Cloud Gateway</p></li><li><p>限流（熔断）sentinel</p></li></ol><h2 id="9nacos"><a href="#9nacos" class="headerlink" title="9nacos"></a>9nacos</h2><h3 id="9-1服务发现"><a href="#9-1服务发现" class="headerlink" title="9.1服务发现"></a>9.1服务发现</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">startup.cmd -m standalone<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><a href="https://start.spring.io/">https://start.spring.io</a></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220707142839966.png" alt="image-20220707142839966"></p><h3 id="9-2配置中心"><a href="#9-2配置中心" class="headerlink" title="9.2配置中心"></a>9.2配置中心</h3><h4 id="9-2-1pom-xml"><a href="#9-2-1pom-xml" class="headerlink" title="9.2.1pom.xml"></a>9.2.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-config<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="9-2-2bootstrap-yml"><a href="#9-2-2bootstrap-yml" class="headerlink" title="9.2.2bootstrap.yml"></a>9.2.2bootstrap.yml</h4><p>在 <code>bootstrap.properties</code> 中配置 Nacos server 的地址和应用名</p><p>默认dataId[springcloud-nacos.properties] &amp; group[DEFAULT_GROUP]</p><h4 id="9-2-3自动刷新"><a href="#9-2-3自动刷新" class="headerlink" title="9.2.3自动刷新"></a>9.2.3自动刷新</h4><p>通过 Spring Cloud 原生注解 <code>@RefreshScope</code> 实现配置自动更新</p><h4 id="9-2-4file-exetension"><a href="#9-2-4file-exetension" class="headerlink" title="9.2.4file-exetension"></a>9.2.4file-exetension</h4><p><code>file-exetension</code> 为配置内容的数据格式，可以通过配置项 <code>spring.cloud.nacos.config.file-extension</code> 来配置。目前只支持 <code>properties</code> 和 <code>yaml</code> 类型</p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>Data ID:</strong> springcloud-nacos.yaml</p><h4 id="9-2-5命名空间"><a href="#9-2-5命名空间" class="headerlink" title="9.2.5命名空间"></a>9.2.5命名空间</h4><p>不同环境的配置的区分隔离</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220708143013119.png" alt="image-20220708143013119"></p><h4 id="9-2-5分组"><a href="#9-2-5分组" class="headerlink" title="9.2.5分组"></a>9.2.5分组</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220708145312849.png" alt="image-20220708145312849"></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> bbac11a9<span class="token punctuation">-</span>840a<span class="token punctuation">-</span>417c<span class="token punctuation">-</span>863d<span class="token punctuation">-</span>475fb76ccad6 <span class="token comment">#命名空间</span>        <span class="token key atrule">group</span><span class="token punctuation">:</span> dev <span class="token comment">#分组</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="9-2-5多配置集"><a href="#9-2-5多配置集" class="headerlink" title="9.2.5多配置集"></a>9.2.5多配置集</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220708150101177.png" alt="image-20220708150101177"></p><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">config</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yaml        <span class="token key atrule">namespace</span><span class="token punctuation">:</span> bbac11a9<span class="token punctuation">-</span>840a<span class="token punctuation">-</span>417c<span class="token punctuation">-</span>863d<span class="token punctuation">-</span>475fb76ccad6 <span class="token comment">#命名空间</span>        <span class="token comment">#group: dev #分组</span>        <span class="token key atrule">extension-configs</span><span class="token punctuation">:</span>         <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> mybatis.yaml           <span class="token key atrule">group</span><span class="token punctuation">:</span> dev           <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>         <span class="token punctuation">-</span> <span class="token key atrule">data-id</span><span class="token punctuation">:</span> log4j2.yaml           <span class="token key atrule">group</span><span class="token punctuation">:</span> dev           <span class="token key atrule">refresh</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="9-2-6持久化"><a href="#9-2-6持久化" class="headerlink" title="9.2.6持久化"></a>9.2.6持久化</h4><h2 id="10-Spring-Cloud-OpenFeign"><a href="#10-Spring-Cloud-OpenFeign" class="headerlink" title="10.Spring Cloud OpenFeign"></a>10.Spring Cloud OpenFeign</h2><p>Java RMI（Java Remote Method Invocation）</p><p>HttpClient</p><p>声明式 REST 客户端</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220707160828670.png" alt="image-20220707160828670"></p><h3 id="10-1订单系统"><a href="#10-1订单系统" class="headerlink" title="10.1订单系统"></a>10.1订单系统</h3><h4 id="10-1-1pom-xml"><a href="#10-1-1pom-xml" class="headerlink" title="10.1.1pom.xml"></a>10.1.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="10-1-2yaml"><a href="#10-1-2yaml" class="headerlink" title="10.1.2yaml"></a>10.1.2yaml</h4><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>order  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos<span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8081</span><span class="token comment">#https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#timeout-#handling  </span><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">httpclient</span><span class="token punctuation">:</span>    <span class="token key atrule">connection-timeout</span><span class="token punctuation">:</span> <span class="token number">2000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="10-1-3JAVA"><a href="#10-1-3JAVA" class="headerlink" title="10.1.3JAVA"></a>10.1.3JAVA</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//被调用的服务名（nacos）</span><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span><span class="token string">"cloud-pay"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PayFeign</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/pay"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@EnableFeignClients</span> <span class="token comment">//开启feign客户端</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="10-2支付系统"><a href="#10-2支付系统" class="headerlink" title="10.2支付系统"></a>10.2支付系统</h3><h4 id="10-2-1pom-xml"><a href="#10-2-1pom-xml" class="headerlink" title="10.2.1pom.xml"></a>10.2.1pom.xml</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-openfeign<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="10-2-2yaml"><a href="#10-2-2yaml" class="headerlink" title="10.2.2yaml"></a>10.2.2yaml</h4><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> cloud<span class="token punctuation">-</span>pay  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos<span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8082</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="11负载均衡"><a href="#11负载均衡" class="headerlink" title="11负载均衡"></a>11负载均衡</h2><p>Ribbon</p><p>LoadBalancer</p><p>nginx</p><p>负载均衡算法</p><ol><li>轮训</li><li>随机</li><li>最小连接数</li><li>权重</li><li>源地址哈希法</li></ol><h2 id="12网关"><a href="#12网关" class="headerlink" title="12网关"></a>12网关</h2><h3 id="12-1简介"><a href="#12-1简介" class="headerlink" title="12.1简介"></a>12.1简介</h3><p>基于Spring WebFlux构建的API网关（Netty）</p><p>security, monitoring/metrics, and resiliency</p><h3 id="12-2原理"><a href="#12-2原理" class="headerlink" title="12.2原理"></a>12.2原理</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220711094046456.png" alt="image-20220711094046456"></p><h3 id="12-3端口"><a href="#12-3端口" class="headerlink" title="12.3端口"></a>12.3端口</h3><p>80 and 443</p><h3 id="12-4谓词（断言）"><a href="#12-4谓词（断言）" class="headerlink" title="12.4谓词（断言）"></a>12.4谓词（断言）</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220711134331247.png" alt="image-20220711134331247"></p><h3 id="12-5过滤器"><a href="#12-5过滤器" class="headerlink" title="12.5过滤器"></a>12.5过滤器</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220711135750375.png" alt="image-20220711135750375"></p><h3 id="12-6全局过滤器"><a href="#12-6全局过滤器" class="headerlink" title="12.6全局过滤器"></a>12.6全局过滤器</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyGlobalFilters</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalFilter</span> <span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Mono</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Void</span><span class="token punctuation">&gt;</span></span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token class-name">ServerWebExchange</span> exchange<span class="token punctuation">,</span> <span class="token class-name">GatewayFilterChain</span> chain<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">ServerHttpRequest</span> request <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">String</span> token <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getQueryParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token string">"token"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>token<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">ServerHttpResponse</span> response <span class="token operator">=</span> exchange<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            response<span class="token punctuation">.</span><span class="token function">setStatusCode</span><span class="token punctuation">(</span><span class="token class-name">HttpStatus</span><span class="token punctuation">.</span><span class="token constant">BAD_GATEWAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">DataBuffer</span> wrap <span class="token operator">=</span> response<span class="token punctuation">.</span><span class="token function">bufferFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">"token is null"</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> response<span class="token punctuation">.</span><span class="token function">writeWith</span><span class="token punctuation">(</span><span class="token class-name">Mono</span><span class="token punctuation">.</span><span class="token function">just</span><span class="token punctuation">(</span>wrap<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>exchange<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//放行</span>    <span class="token punctuation">}</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> <span class="token function">getOrder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">gateway</span><span class="token punctuation">:</span>      <span class="token key atrule">routes</span><span class="token punctuation">:</span>        <span class="token punctuation">-</span> <span class="token key atrule">id</span><span class="token punctuation">:</span> order_service          <span class="token key atrule">uri</span><span class="token punctuation">:</span> lb<span class="token punctuation">:</span>//cloud<span class="token punctuation">-</span>order          <span class="token key atrule">predicates</span><span class="token punctuation">:</span>           <span class="token punctuation">-</span> Path=/api/order/<span class="token important">**</span>          <span class="token key atrule">filters</span><span class="token punctuation">:</span>           <span class="token punctuation">-</span> RewritePath=/api/order/<span class="token punctuation">?</span>(<span class="token punctuation">?</span>&lt;segment<span class="token punctuation">&gt;</span>.<span class="token important">*)</span><span class="token punctuation">,</span> /order/$\<span class="token punctuation">{</span>segment<span class="token punctuation">}</span>    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>        <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos        <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos<span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">80</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="13nginx"><a href="#13nginx" class="headerlink" title="13nginx"></a>13nginx</h2><h3 id="13-1简介"><a href="#13-1简介" class="headerlink" title="13.1简介"></a>13.1简介</h3><p><a href="http://nginx.org/en/">http://nginx.org/en/</a></p><p><em>Nginx</em> (engine x) 是一个高性能的<a href="https://baike.baidu.com/item/HTTP">HTTP</a>和<a href="https://baike.baidu.com/item/%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86/7793488">反向代理</a>web服务器（Nginx采用C进行编写）</p><h3 id="13-2启停"><a href="#13-2启停" class="headerlink" title="13.2启停"></a>13.2启停</h3><p><a href="http://nginx.org/en/docs/windows.html">http://nginx.org/en/docs/windows.html</a></p><h3 id="13-3配置文件"><a href="#13-3配置文件" class="headerlink" title="13.3配置文件"></a>13.3配置文件</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/nginx%E9%85%8D%E7%BD%AE%E7%BB%93%E6%9E%84.png" alt="nginx配置结构"></p><h3 id="13-4配置域名"><a href="#13-4配置域名" class="headerlink" title="13.4配置域名"></a>13.4配置域名</h3><p>以管理员身份打开cmd</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">notepad drivers/etc/hosts<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-latex" data-language="latex"><code class="language-latex">127.0.0.1       bwf.com127.0.0.1       order.bwf.com127.0.0.1       pay.bwf.com<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="13-5反向代理"><a href="#13-5反向代理" class="headerlink" title="13.5反向代理"></a>13.5反向代理</h3><pre class="line-numbers language-config" data-language="config"><code class="language-config">server {        listen       80;        server_name  bwf.com;        #charset koi8-r;        #access_log  logs/host.access.log  main;        location / {            proxy_pass   http://localhost:8082;        }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-6域名系统"><a href="#13-6域名系统" class="headerlink" title="13.6域名系统"></a>13.6域名系统</h3><p><strong>域名系统</strong>（英文：<strong>D</strong>omain <strong>N</strong>ame <strong>S</strong>ystem，<a href="https://baike.baidu.com/item/%E7%BC%A9%E5%86%99/1948062">缩写</a>：<strong>DNS</strong>）是<a href="https://baike.baidu.com/item/%E4%BA%92%E8%81%94%E7%BD%91/199186">互联网</a>的一项服务。它作为将<a href="https://baike.baidu.com/item/%E5%9F%9F%E5%90%8D/86062">域名</a>和<a href="https://baike.baidu.com/item/IP%E5%9C%B0%E5%9D%80/150859">IP地址</a>相互<a href="https://baike.baidu.com/item/%E6%98%A0%E5%B0%84/20402620">映射</a>的一个<a href="https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93/1238109">分布式数据库</a>，能够使人更方便地访问互联网</p><h3 id="13-7负载均衡"><a href="#13-7负载均衡" class="headerlink" title="13.7负载均衡"></a>13.7负载均衡</h3><pre class="line-numbers language-config" data-language="config"><code class="language-config">upstream bwf {       server localhsot:81;       server localhost:82;    }    server {        listen       80;        server_name  bwf.com;        #charset koi8-r;        #access_log  logs/host.access.log  main;        location / {            # proxy_pass   http://localhost:8082;           proxy_set_header Host $host;       proxy_pass   http://bwf;        }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220711162739685.png" alt="image-20220711162739685"></p><h3 id="13-8负载均衡算法"><a href="#13-8负载均衡算法" class="headerlink" title="13.8负载均衡算法"></a>13.8负载均衡算法</h3><ol><li><strong>轮询（默认）</strong></li><li><strong>权重（weight）</strong></li><li><strong>ip_hash</strong></li></ol><h3 id="13-9动静分离"><a href="#13-9动静分离" class="headerlink" title="13.9动静分离"></a>13.9动静分离</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220712134000248.png" alt="image-20220712134000248"></p><p><strong>添加静态资源，一定clean清理</strong></p><p>bwf.com/api/nginx/test</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220712140056243.png" alt="image-20220712140056243"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220712140617819.png" alt="image-20220712140617819"></p><h2 id="14-Sentinel"><a href="#14-Sentinel" class="headerlink" title="14.Sentinel"></a>14.Sentinel</h2><p><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D">https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D</a></p><h3 id="14-1简介"><a href="#14-1简介" class="headerlink" title="14.1简介"></a>14.1简介</h3><p><a href="https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D">https://github.com/alibaba/Sentinel/wiki/%E4%BB%8B%E7%BB%8D</a></p><h3 id="14-2配置"><a href="#14-2配置" class="headerlink" title="14.2配置"></a>14.2配置</h3><ol><li>定义资源</li><li>定义规则</li></ol><h3 id="14-3控制台"><a href="#14-3控制台" class="headerlink" title="14.3控制台"></a>14.3控制台</h3><p><a href="https://github.com/alibaba/Sentinel/releases">https://github.com/alibaba/Sentinel/releases</a></p><h4 id="14-3-1启动"><a href="#14-3-1启动" class="headerlink" title="14.3.1启动"></a>14.3.1启动</h4><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">java -Dserver.port=8089 -Dcsp.sentinel.dashboard.server=localhost:8089 -Dproject.name=sentinel-dashboard -jar sentinel-dashboard-1.8.3.jar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="14-3-2访问"><a href="#14-3-2访问" class="headerlink" title="14.3.2访问"></a>14.3.2访问</h4><p><a href="http://localhost:8089/">http://localhost:8089/</a> </p><p>默认用户名和密码都是 sentinel</p><h4 id="14-3-3客户端接入控制台"><a href="#14-3-3客户端接入控制台" class="headerlink" title="14.3.3客户端接入控制台"></a>14.3.3客户端接入控制台</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-transport-simple-http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">transport</span><span class="token punctuation">:</span>        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8089</span> <span class="token comment"># Sentinel 控制台地址</span>      <span class="token comment"># 取消Sentinel控制台懒加载</span>      <span class="token comment"># 默认情况下 Sentinel 会在客户端首次调用的时候进行初始化，开始向控制台发送心跳包</span><span class="token comment">#      eager: true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-4原理"><a href="#14-4原理" class="headerlink" title="14.4原理"></a>14.4原理</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220712145826628.png" alt="image-20220712145826628"></p><h3 id="14-5定义资源"><a href="#14-5定义资源" class="headerlink" title="14.5定义资源"></a>14.5定义资源</h3><h4 id="14-5-1代码"><a href="#14-5-1代码" class="headerlink" title="14.5.1代码"></a>14.5.1代码</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//资源名称</span><span class="token keyword">private</span> <span class="token class-name">String</span> resourceName <span class="token operator">=</span> <span class="token string">"Hello"</span><span class="token punctuation">;</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/test"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">Entry</span> entry <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        entry <span class="token operator">=</span> <span class="token class-name">SphU</span><span class="token punctuation">.</span><span class="token function">entry</span><span class="token punctuation">(</span>resourceName<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*您的业务逻辑 - 开始*/</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*您的业务逻辑 - 结束*/</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BlockException</span> e1<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">/*流控逻辑处理 - 开始*/</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"block!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*流控逻辑处理 - 结束*/</span>    <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>entry <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            entry<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/initFlowRules"</span><span class="token punctuation">)</span><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">initFlowRules</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">FlowRule</span><span class="token punctuation">&gt;</span></span> rules <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">FlowRule</span> rule <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FlowRule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rule<span class="token punctuation">.</span><span class="token function">setResource</span><span class="token punctuation">(</span>resourceName<span class="token punctuation">)</span><span class="token punctuation">;</span>    rule<span class="token punctuation">.</span><span class="token function">setGrade</span><span class="token punctuation">(</span><span class="token class-name">RuleConstant</span><span class="token punctuation">.</span><span class="token constant">FLOW_GRADE_QPS</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Set limit QPS to 20.</span>    rule<span class="token punctuation">.</span><span class="token function">setCount</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    rules<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rule<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">FlowRuleManager</span><span class="token punctuation">.</span><span class="token function">loadRules</span><span class="token punctuation">(</span>rules<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token string">"规则初始化完成"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="14-5-1控制台设置规则"><a href="#14-5-1控制台设置规则" class="headerlink" title="14.5.1控制台设置规则"></a>14.5.1控制台设置规则</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220712154923923.png" alt="image-20220712154923923"></p><p><strong>全局异常处理</strong></p><h4 id="14-5-1注解设置规则"><a href="#14-5-1注解设置规则" class="headerlink" title="14.5.1注解设置规则"></a>14.5.1注解设置规则</h4><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//注解设置规则</span><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/test03"</span><span class="token punctuation">)</span><span class="token comment">//    @SentinelResource(value = "test03", blockHandler = "blockHandler")</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"test03"</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token string">"fallback"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"test03"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">fallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"系统忙，请稍后再试"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">blockHandler</span><span class="token punctuation">(</span><span class="token class-name">BlockException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">"系统忙，请稍后再试"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-6动态规则"><a href="#14-6动态规则" class="headerlink" title="14.6动态规则"></a>14.6动态规则</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-transport-simple-http<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-cloud-starter-alibaba-nacos-discovery<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.csp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>sentinel-datasource-nacos<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">application</span><span class="token punctuation">:</span>    <span class="token key atrule">name</span><span class="token punctuation">:</span> springcloud<span class="token punctuation">-</span>sentinel  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>      <span class="token key atrule">transport</span><span class="token punctuation">:</span>        <span class="token key atrule">dashboard</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8089</span> <span class="token comment"># Sentinel 控制台地址</span>      <span class="token comment"># 取消Sentinel控制台懒加载</span>      <span class="token comment"># 默认情况下 Sentinel 会在客户端首次调用的时候进行初始化，开始向控制台发送心跳包</span>      <span class="token key atrule">eager</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>      <span class="token key atrule">datasource</span><span class="token punctuation">:</span>        <span class="token key atrule">ds</span><span class="token punctuation">:</span>          <span class="token key atrule">nacos</span><span class="token punctuation">:</span>            <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> localhost<span class="token punctuation">:</span><span class="token number">8848</span>            <span class="token key atrule">data-id</span><span class="token punctuation">:</span> sentinel<span class="token punctuation">-</span>flow            <span class="token key atrule">group-id</span><span class="token punctuation">:</span> DEFAULT_GROUP            <span class="token key atrule">rule-type</span><span class="token punctuation">:</span> flow            <span class="token key atrule">username</span><span class="token punctuation">:</span> nacos            <span class="token key atrule">password</span><span class="token punctuation">:</span> nacos            <span class="token key atrule">data-type</span><span class="token punctuation">:</span> json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">DataSourcePropertiesConfiguration</span><span class="token class-name">NacosDataSourceProperties</span><span class="token class-name">AbstractDataSourceProperties</span><span class="token class-name">RuleType</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">[</span>    <span class="token punctuation">{</span>        <span class="token property">"resource"</span><span class="token operator">:</span><span class="token string">"test03"</span><span class="token punctuation">,</span>        <span class="token property">"count"</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">,</span>        <span class="token property">"grade"</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>        <span class="token property">"limitApp"</span><span class="token operator">:</span><span class="token string">"default"</span><span class="token punctuation">,</span>        <span class="token property">"strategy"</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>        <span class="token property">"controlBehavior"</span><span class="token operator">:</span><span class="token number">0</span>    <span class="token punctuation">}</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220713102851563.png" alt="image-20220713102851563"></p><h3 id="14-7熔断降级"><a href="#14-7熔断降级" class="headerlink" title="14.7熔断降级"></a>14.7熔断降级</h3><p>熔断策略</p><ol><li>慢调用比例</li><li>异常比例 </li><li>异常数</li></ol><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220713115852013.png" alt="image-20220713115852013"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">"/test03"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@SentinelResource</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"test03"</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token string">"fallback"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">test03</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token string">"test03"</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="14-8OpenFeign"><a href="#14-8OpenFeign" class="headerlink" title="14.8OpenFeign"></a>14.8OpenFeign</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@FeignClient</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"cloud-pay"</span><span class="token punctuation">,</span> fallback <span class="token operator">=</span> <span class="token class-name">PayFallback</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">PayFeignSentinel</span> <span class="token keyword">extends</span> <span class="token class-name">PayService</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token annotation punctuation">@Component</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">PayFallback</span> <span class="token keyword">implements</span> <span class="token class-name">PayFeignSentinel</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">pay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token string">"系统异常，请稍后再试"</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">feign</span><span class="token punctuation">:</span>  <span class="token key atrule">httpclient</span><span class="token punctuation">:</span>    <span class="token key atrule">connection-timeout</span><span class="token punctuation">:</span> <span class="token number">2000</span>  <span class="token key atrule">sentinel</span><span class="token punctuation">:</span>    <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="15-电商后台系统"><a href="#15-电商后台系统" class="headerlink" title="15.电商后台系统"></a>15.电商后台系统</h2><p>springboot、mybatis、thymeleaf、mysql</p><h2 id="16对象存储"><a href="#16对象存储" class="headerlink" title="16对象存储"></a>16对象存储</h2><p><a href="https://www.aliyun.com/">https://www.aliyun.com/</a></p><ol><li><p>FastDFS是一个开源的轻量级<a href="https://baike.baidu.com/item/%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F/1250388">分布式文件系统</a>，它对文件进行管理，功能包括：文件存储、文件同步、文件访问（文件上传、文件下载）等，解决了大容量存储和<a href="https://baike.baidu.com/item/%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1/932451">负载均衡</a>的问题</p></li><li><p>对象存储OSS</p></li><li><p>对象存储 Kodo</p></li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba.cloud<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-oss-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-fileupload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.3.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">alibaba</span><span class="token punctuation">:</span>  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>    <span class="token key atrule">oss</span><span class="token punctuation">:</span>      <span class="token key atrule">endpoint</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//oss<span class="token punctuation">-</span>cn<span class="token punctuation">-</span>nanjing.aliyuncs.com    <span class="token key atrule">access-key</span><span class="token punctuation">:</span> LTAI5tJeRJwrKiQYmj6vDbEB    <span class="token key atrule">secret-key</span><span class="token punctuation">:</span> 4UvQY756ArjY88QD8RL42V8LlznaqN<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="17-redis"><a href="#17-redis" class="headerlink" title="17.redis"></a>17.redis</h2><h3 id="17-1简介"><a href="#17-1简介" class="headerlink" title="17.1简介"></a>17.1简介</h3><p><a href="https://redis.io/">https://redis.io/</a></p><p>Redis（Remote Dictionary Server )，即远程字典服务，是一个开源的使用ANSI <a href="https://baike.baidu.com/item/C%E8%AF%AD%E8%A8%80">C语言</a>编写、支持网络、可基于内存亦可持久化的日志型、Key-Value<a href="https://baike.baidu.com/item/%E6%95%B0%E6%8D%AE%E5%BA%93/103728">数据库</a>，并提供多种语言的API</p><p>单线程</p><h3 id="17-2性能"><a href="#17-2性能" class="headerlink" title="17.2性能"></a>17.2性能</h3><p>50个并发执行100000个请求，结果:读的速度是110000次/s,写的速度是81000次/s</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">redis-benchmark.exe -helpredis-benchmark [-h &lt;host&gt;] [-p &lt;port&gt;] [-c &lt;clients&gt;] [-n &lt;requests]&gt; [-k &lt;boolean&gt;]redis-benchmark.exe -h localhost -p 6379 -c 50 -n 1000000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="17-3配置文件"><a href="#17-3配置文件" class="headerlink" title="17.3配置文件"></a>17.3配置文件</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#443设置密码requirepass 123456redis-server.exe redis.windows.confredis-cli.exe -h localhost -p 6379 -a 123456<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-4String"><a href="#17-4String" class="headerlink" title="17.4String"></a>17.4String</h3><p>验证码，播放次数，点赞数，转发数，关注数</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">set name zhangsanget nameset spu "{\"spuId\":1,\"spuName\":\"ﾱￊﾼￇﾱﾾ\",\"spuTitle\":\"ﾻﾪￎﾪ\"}"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="17-5Hash"><a href="#17-5Hash" class="headerlink" title="17.5Hash"></a>17.5Hash</h3><p>结构化数据（对象）</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#存单个 field valuehset user name zhangsan#取单个 field valuehget user name<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#存多个 field valuehmset cart::10 id 1 name phone price 2000 count 1#取多个 field valuehmget cart::10 id name price count#操作 field valuehincrby cart::10 count 2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#取所有 fieldhkeys cart::10#取所有 valuehvals cart::10<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-6List"><a href="#17-6List" class="headerlink" title="17.6List"></a>17.6List</h3><p>队列</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#增lpush name:list zhangsan lisi wangwu zhaoliu#查lrange name:list 0 -1lindex name:list 3#数量llen name:list#改lset name:list 3 zhangsansan<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-7Set"><a href="#17-7Set" class="headerlink" title="17.7Set"></a>17.7Set</h3><p>无序，不允许重复</p><p>运算</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#增sadd name:set zhangsan lisi wangwu zhaoliu#查smembers name:set#元素个数scard name:set#抽奖srandmember name:set<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">sadd vip:1 zhangsan lisi wangwu zhaoliusadd vip:2 zhangsan degang yunpeng yuqian#交集sinter vip:1 vip:2#并集sunion vip:1 vip:2#差集sdiff vip:1 vip:2sdiffstore vip:3 vip:1 vip:2<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-8ZSet"><a href="#17-8ZSet" class="headerlink" title="17.8ZSet"></a>17.8ZSet</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#增zadd cj 98 zhangsan 66 zhaoliu 89 wangwu 72 lisi 100 degang 36 yunpeng#查##分数zscore cj lisi##个数zcard cj##score 值 min 和 max 之间成员个数zcount cj 80 100##返回有序集 key 中成员 member 的排名。其中有序集成员按 score 值递增(从小到大)顺序排列zrange cj 0 2 withscores#返回有序集 key 中，所有 score 值介于 min 和 max 之间的成员zrangebyscore cj 60 100 withscores limit 0 10#排名zrevrank cj zhangsan<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-9HyperLogLog"><a href="#17-9HyperLogLog" class="headerlink" title="17.9HyperLogLog"></a>17.9HyperLogLog</h3><p>通过 HyperLogLog 数据结构， 用户可以使用少量固定大小的内存， 来储存集合中的唯一元素 （每个 HyperLogLog 只需使用 12k 字节内存，以及几个字节的内存来储存键本身），可以计算接近2^64个不同元素的基数</p><h3 id="17-10地理位置"><a href="#17-10地理位置" class="headerlink" title="17.10地理位置"></a>17.10地理位置</h3><p><a href="http://www.jsons.cn/lngcode/">http://www.jsons.cn/lngcode/</a></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#增geoadd city 121.47 31.23 shgeoadd city 118.79 32.04 njgeoadd city 116.40 39.90 bjgeoadd city 113.28 23.12 gzgeoadd city 117.28 31.86 hf#查geopos city nj#返回两个给定位置之间的距离geodist city nj bj km#以给定的经纬度为中心， 返回键包含的位置元素当中， 与中心的距离不超过给定最大距离的所有位置元素georadius city 118.79 32.04 500 km withcoord withdist<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-11事务"><a href="#17-11事务" class="headerlink" title="17.11事务"></a>17.11事务</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">multi #开启事务set k1 v1set k2 v2set k3 v3exec #提交事务multi #开启事务set k4 v4set k5 v5set k6 #命令错误，提交时，整个回滚exec #提交事务multi #开启事务set k4 v4incr k4 #命令添加到队列时，没有错误，当提交执行时有错误，正确的命令成功执行，错误的命令回滚set k5 v5exec #提交事务<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-12锁"><a href="#17-12锁" class="headerlink" title="17.12锁"></a>17.12锁</h3><p><a href="https://redis.io/commands/setnx/">https://redis.io/commands/setnx/</a></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#加锁(过期时间)setnx lock mylock#释放锁del lock#设置超时时间expire name 30<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-13持久化"><a href="#17-13持久化" class="headerlink" title="17.13持久化"></a>17.13持久化</h3><h4 id="1-RDB"><a href="#1-RDB" class="headerlink" title="1.RDB"></a>1.RDB</h4><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">################################ SNAPSHOTTING  ################################## Save the DB on disk:##   save &lt;seconds&gt; &lt;changes&gt;##   Will save the DB if both the given number of seconds and the given#   number of write operations against the DB occurred.##   In the example below the behaviour will be to save:#   after 900 sec (15 min) if at least 1 key changed#   after 300 sec (5 min) if at least 10 keys changed#   after 60 sec if at least 10000 keys changed##   Note: you can disable saving completely by commenting out all "save" lines.##   It is also possible to remove all the previously configured save#   points by adding a save directive with a single empty string argument#   like in the following example:##   save ""save 900 1save 300 10save 60 10000<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>有点：</p><ol><li>节省磁盘空间（RDB 是一个非常紧凑（compact）的文件，它保存了 Redis 在某个时间点上的数据集）</li><li>非常适用于灾难恢复</li></ol><p>缺点：</p><p>可能会丢失好几分钟的数据</p><h4 id="2-AOF"><a href="#2-AOF" class="headerlink" title="2.AOF"></a>2.AOF</h4><p>Append Only File</p><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">############################## APPEND ONLY MODE ###############################appendonly yes# appendfsync alwaysappendfsync everysec# appendfsync noauto-aof-rewrite-percentage 100auto-aof-rewrite-min-size 64mb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-14淘汰策略"><a href="#17-14淘汰策略" class="headerlink" title="17.14淘汰策略"></a>17.14淘汰策略</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd"># maxmemory &lt;bytes&gt;# MAXMEMORY POLICY: how Redis will select what to remove when maxmemory# is reached. You can select among five behaviors:## volatile-lru -&gt; remove the key with an expire set using an LRU algorithm# allkeys-lru -&gt; remove any key according to the LRU algorithm# volatile-random -&gt; remove a random key with an expire set# allkeys-random -&gt; remove a random key, any key# volatile-ttl -&gt; remove the key with the nearest expire time (minor TTL)# noeviction -&gt; don't expire at all, just return an error on write operations## The default is:## maxmemory-policy noeviction<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-15高可用"><a href="#17-15高可用" class="headerlink" title="17.15高可用"></a>17.15高可用</h3><h4 id="1-主从复制"><a href="#1-主从复制" class="headerlink" title="1.主从复制"></a>1.主从复制</h4><pre class="line-numbers language-conf" data-language="conf"><code class="language-conf">################################# REPLICATION ################################## Master-Slave replication. Use slaveof to make a Redis instance a copy of# another Redis server. A few things to understand ASAP about Redis replication.## 1) Redis replication is asynchronous, but you can configure a master to#    stop accepting writes if it appears to be not connected with at least#    a given number of slaves.# 2) Redis slaves are able to perform a partial resynchronization with the#    master if the replication link is lost for a relatively small amount of#    time. You may want to configure the replication backlog size (see the next#    sections of this file) with a sensible value depending on your needs.# 3) Replication is automatic and does not need user intervention. After a#    network partition slaves automatically try to reconnect to masters#    and resynchronize with them.## slaveof &lt;masterip&gt; &lt;masterport&gt;# If the master is password protected (using the "requirepass" configuration# directive below) it is possible to tell the slave to authenticate before# starting the replication synchronization process, otherwise the master will# refuse the slave request.## masterauth &lt;master-password&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-哨兵模式"><a href="#2-哨兵模式" class="headerlink" title="2.哨兵模式"></a>2.哨兵模式</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F.webp" alt="哨兵模式"></p><h4 id="3-集群"><a href="#3-集群" class="headerlink" title="3.集群"></a>3.集群</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220214160715340.png" alt="image-20220214160715340"></p><h3 id="17-16缓穿透"><a href="#17-16缓穿透" class="headerlink" title="17.16缓穿透"></a>17.16缓穿透</h3><p>高并发，查询某个不存在的key，造成数据压力</p><p>解决：</p><p>1.缓存null值，设置过期时间</p><p>2.布隆过滤器</p><p>3.黑白名单</p><h3 id="17-17击穿"><a href="#17-17击穿" class="headerlink" title="17.17击穿"></a>17.17击穿</h3><p>高并发，查询热点key（过期）</p><p>解决：</p><p>1.加锁</p><p>2.限流</p><h3 id="17-18雪崩"><a href="#17-18雪崩" class="headerlink" title="17.18雪崩"></a>17.18雪崩</h3><p>大量的key设置了相同的过期时间，导致某一时刻同时失效</p><p>解决：</p><p>1.设置不同过期时间</p><p>2.限流</p><h3 id="17-19springboot集成"><a href="#17-19springboot集成" class="headerlink" title="17.19springboot集成"></a>17.19springboot集成</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.commons<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>commons-pool2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.11.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*    RedisAutoConfiguration    redis客户端    1.LettuceConnectionConfiguration    2.JedisConnectionConfiguration*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token key atrule">spring</span><span class="token punctuation">:</span>  <span class="token key atrule">redis</span><span class="token punctuation">:</span>    <span class="token key atrule">host</span><span class="token punctuation">:</span> localhost    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>    <span class="token key atrule">database</span><span class="token punctuation">:</span> <span class="token number">0</span>    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>      <span class="token key atrule">pool</span><span class="token punctuation">:</span>        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment">#最大连接数</span>        <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment">#最小连接数</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-20序列化"><a href="#17-20序列化" class="headerlink" title="17.20序列化"></a>17.20序列化</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>data<span class="token punctuation">.</span>redis<span class="token punctuation">.</span>serializer<span class="token punctuation">.</span></span>RedisSerializer</span><span class="token keyword">static</span> <span class="token class-name">RedisSerializer</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">java</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">JdkSerializationRedisSerializer</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.78<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-21camel"><a href="#17-21camel" class="headerlink" title="17.21camel"></a>17.21camel</h3><p><a href="https://github.com/apache/camel">https://github.com/apache/camel</a></p><p>mysql-&gt;redis</p><h2 id="18-linux"><a href="#18-linux" class="headerlink" title="18.linux"></a>18.linux</h2><h3 id="18-1简介"><a href="#18-1简介" class="headerlink" title="18.1简介"></a>18.1简介</h3><p>免费、开源、可靠、安全、稳定、多平台</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/02Linux%E7%9A%84%E7%89%88%E6%9C%AC-2.png" alt="02Linux的版本-2"></p><h3 id="18-2虚拟机软件"><a href="#18-2虚拟机软件" class="headerlink" title="18.2虚拟机软件"></a>18.2虚拟机软件</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220720104415683.png" alt="image-20220720104415683"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220720104119618.png" alt="image-20220720104119618"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220720104202131.png" alt="image-20220720104202131"></p><h3 id="18-3目录结构"><a href="#18-3目录结构" class="headerlink" title="18.3目录结构"></a>18.3目录结构</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220720104912079.png" alt="image-20220720104912079"></p><ul><li><p><strong>/bin</strong>：<br>bin 是 Binaries (二进制文件) 的缩写, 这个目录存放着最经常使用的命令。</p></li><li><p><strong>/home</strong>：<br>用户的主目录，在 Linux 中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的</p></li><li><p><strong>/root</strong>：<br>该目录为系统管理员，也称作超级权限者的用户主目录。</p></li></ul><h3 id="18-4终端"><a href="#18-4终端" class="headerlink" title="18.4终端"></a>18.4终端</h3><p>Xshell</p><p>putty</p><p>SecureCRT</p><p>FileZilla</p><p>MobaXterm</p><h3 id="18-5SSH"><a href="#18-5SSH" class="headerlink" title="18.5SSH"></a>18.5SSH</h3><p>SSH 为 [Secure Shell](<a href="https://baike.baidu.com/item/Secure">https://baike.baidu.com/item/Secure</a> Shell) 的缩写</p><h3 id="18-6命令"><a href="#18-6命令" class="headerlink" title="18.6命令"></a>18.6命令</h3><ol><li>IP</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ip</span> addr<span class="token builtin class-name">cd</span> /etc/sysconfig/network-scripts/<span class="token function">vi</span> ifcfg-ens33<span class="token assign-left variable">TYPE</span><span class="token operator">=</span>Ethernet<span class="token assign-left variable">PROXY_METHOD</span><span class="token operator">=</span>none<span class="token assign-left variable">BROWSER_ONLY</span><span class="token operator">=</span>no<span class="token assign-left variable">BOOTPROTO</span><span class="token operator">=</span>none<span class="token assign-left variable">DEFROUTE</span><span class="token operator">=</span>yes<span class="token assign-left variable">IPV4_FAILURE_FATAL</span><span class="token operator">=</span>no<span class="token assign-left variable">IPV6INIT</span><span class="token operator">=</span>yes<span class="token assign-left variable">IPV6_AUTOCONF</span><span class="token operator">=</span>no<span class="token assign-left variable">IPV6_DEFROUTE</span><span class="token operator">=</span>yes<span class="token assign-left variable">IPV6_FAILURE_FATAL</span><span class="token operator">=</span>no<span class="token assign-left variable">IPV6_ADDR_GEN_MODE</span><span class="token operator">=</span>stable-privacy<span class="token assign-left variable">NAME</span><span class="token operator">=</span>ens33<span class="token assign-left variable">UUID</span><span class="token operator">=</span>114d4a15-4633-4e2c-b50e-6ba10acfdfbe<span class="token assign-left variable">DEVICE</span><span class="token operator">=</span>ens33<span class="token assign-left variable">ONBOOT</span><span class="token operator">=</span>yes<span class="token assign-left variable">IPV6ADDR</span><span class="token operator">=</span><span class="token number">2001</span>:250:250:250:250:250:250:222/64<span class="token assign-left variable">IPV6_DEFAULTGW</span><span class="token operator">=</span><span class="token number">2001</span>:250:250:250::1<span class="token assign-left variable">IPADDR</span><span class="token operator">=</span><span class="token number">192.168</span>.30.132<span class="token assign-left variable">PREFIX</span><span class="token operator">=</span><span class="token number">24</span><span class="token assign-left variable">GATEWAY</span><span class="token operator">=</span><span class="token number">192.168</span>.30.1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>关闭防火墙</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">systemctl stop firewalld.service<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>切换目录</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">cd</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="4"><li>ls</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span>ll<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="5"><li>目录</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#创建单级</span><span class="token function">mkdir</span> 目录名<span class="token comment">#创建多级</span><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> 目录名/目录名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="6"><li>删除一个文件或者目录</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> <span class="token parameter variable">-f</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="7"><li>mv 用来为文件或目录改名、或将文件或目录移入其它位置</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mv</span> t1.txt t2.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="8"><li>cp</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cp</span> t1.txt t2.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="8"><li>文件</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">touch</span> 文件名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="9"><li>vi</li></ol><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/vi.webp" alt="vi"></p><ol start="9"><li>上传下载</li><li>cat</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cat</span> <span class="token parameter variable">-n</span> 文件名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="12"><li>more</li><li>less</li><li>输出重定向，追加</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&gt;</span> 输出重定向（覆盖）<span class="token function">cat</span> redis.windows.conf <span class="token operator">&gt;</span> t1.txt<span class="token operator">&gt;&gt;</span> 追加<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="15"><li>echo 输出内容到控制台</li><li>搜索</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">find</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-name</span> <span class="token string">"*.c"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="17"><li><p>grep 用于查找文件里符合条件的字符串</p></li><li><p>解压</p></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-xzvf</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="19"><li><p>pwd</p></li><li><p>添加用户</p></li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">useradd</span> <span class="token parameter variable">-g</span> 组名 用户名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="22"><li>密码</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">passwd</span> 用户名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="22"><li>切换用户</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">su</span> 用户名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="23"><li>删除用户</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">userdel</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="24"><li>添加用户组</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">groupadd</span> g1<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="25"><li>权限</li></ol><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/%E6%9D%83%E9%99%90.png" alt="权限"></p><ol start="26"><li>修改权限</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">drwxr-xr-x.  <span class="token number">2</span> root     root            <span class="token number">74</span> Jul <span class="token number">19</span> <span class="token number">23</span>:31 test02<span class="token function">chmod</span> o+w test02<span class="token function">chmod</span> <span class="token number">742</span> lisi.txt<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="27"><li>进程</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ps</span> <span class="token parameter variable">-aux</span><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span><span class="token function">grep</span> tomcat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="28"><li>端口占用</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">lsof</span> <span class="token parameter variable">-i:8080</span><span class="token function">netstat</span> <span class="token parameter variable">-tunlp</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token number">8080</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="29"><li>安装</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">rpm<span class="token punctuation">(</span>RedHat Package Manager<span class="token punctuation">)</span> 包管理器yum 基于 RPM 包管理，能够从指定的服务器自动下载 RPM 包并且安装，可以自动处理依赖性关系，并且一次安装所有依赖的软件包，无须繁琐地一次次下载、安装<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#设置yum源</span><span class="token builtin class-name">cd</span> /etc/yum.repos.d<span class="token function">cat</span> CentOS-Base.repo<span class="token function">wget</span> <span class="token parameter variable">-O</span> /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum list<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>30关机&amp;重启</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">shutdown</span> <span class="token parameter variable">-h</span> now<span class="token function">reboot</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="18-7tomcat"><a href="#18-7tomcat" class="headerlink" title="18.7tomcat"></a>18.7tomcat</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> apache-tomcat-9.0.64.tar.gz<span class="token builtin class-name">cd</span> /home/apache-tomcat-9.0.64/bin./startup.sh<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="18-8JDK"><a href="#18-8JDK" class="headerlink" title="18.8JDK"></a>18.8JDK</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /etc/profile<span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/home/jdk1.8.0_341<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">source</span> /etc/profile<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="19-容器"><a href="#19-容器" class="headerlink" title="19.容器"></a>19.容器</h2><p><a href="https://www.docker.com/">https://www.docker.com/</a></p><p><a href="https://docs.docker.com/engine/install/centos/">https://docs.docker.com/engine/install/centos/</a></p><h3 id="19-1安装"><a href="#19-1安装" class="headerlink" title="19.1安装"></a>19.1安装</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>                  docker-client <span class="token punctuation">\</span>                  docker-client-latest <span class="token punctuation">\</span>                  docker-common <span class="token punctuation">\</span>                  docker-latest <span class="token punctuation">\</span>                  docker-latest-logrotate <span class="token punctuation">\</span>                  docker-logrotate <span class="token punctuation">\</span>                  docker-engine                 yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utilsyum-config-manager <span class="token punctuation">\</span>    --add-repo <span class="token punctuation">\</span>    https://download.docker.com/linux/centos/docker-ce.repoyum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io docker-compose-pluginyum list docker-ce <span class="token parameter variable">--showduplicates</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-r</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#启动</span>systemctl start <span class="token function">docker</span><span class="token comment">#查看版本</span><span class="token function">docker</span> version<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="19-2原理"><a href="#19-2原理" class="headerlink" title="19.2原理"></a>19.2原理</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/kkkk.png" alt="kkkk"></p><h3 id="19-3概念"><a href="#19-3概念" class="headerlink" title="19.3概念"></a>19.3概念</h3><p><a href="https://hub.docker.com/">https://hub.docker.com/</a></p><p>镜像（images）</p><p>容器（container）</p><p>仓库（repository）</p><h3 id="19-4命令"><a href="#19-4命令" class="headerlink" title="19.4命令"></a>19.4命令</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/mmmmmmmmmmmmmmmm.png" alt="mmmmmmmmmmmmmmmm"></p><ol><li>镜像命令</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#搜索</span><span class="token function">docker</span> search <span class="token parameter variable">--help</span><span class="token function">docker</span> search nginx<span class="token comment">#下载</span><span class="token function">docker</span> pull mysql:5.7<span class="token comment">#查看本地镜像</span><span class="token function">docker</span> imagesREPOSITORY   TAG       IMAGE ID       CREATED        SIZEnginx        latest    670dcc86b69d   <span class="token number">32</span> hours ago   142MBmysql        latest    33037edcac9b   <span class="token number">7</span> days ago     444MB<span class="token comment">#删除镜像</span><span class="token function">docker</span> rmi <span class="token parameter variable">-f</span> 镜像ID<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>容器命令</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/mysql/conf<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/mysql/data<span class="token comment">#运行容器</span><span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql578 <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3308</span>:3306 <span class="token parameter variable">-v</span> /home/mysql/conf:/etc/mysql/conf.d <span class="token parameter variable">-v</span> /home/mysql/data:/var/lib/mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> mysql:5.7<span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql57 <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> mysql:5.7<span class="token parameter variable">--name</span> 容器名称<span class="token parameter variable">-d</span> 后台方式运行<span class="token parameter variable">-p</span> 主机端口:容器端口<span class="token parameter variable">-v</span> 主机目录:容器内目录 卷挂载<span class="token parameter variable">-e</span> 环境设置<span class="token comment">#查看正在运行的容器</span><span class="token function">docker</span> <span class="token function">ps</span><span class="token comment">#查看正在运行和历史运行过的容器</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span><span class="token comment">#停止</span><span class="token function">docker</span> stop 容器ID<span class="token comment">#启动</span><span class="token function">docker</span> start 容器ID<span class="token comment">#重启</span><span class="token function">docker</span> restart 容器ID<span class="token comment">#强制停止</span><span class="token function">docker</span> <span class="token function">kill</span> 容器ID<span class="token comment">#删除容器</span><span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> 容器ID<span class="token comment">#进入容器</span><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 容器ID /bin/bash<span class="token comment">#退出容器</span><span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>查看日志</li></ol><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> logs 容器名称<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">mkdir -p /home/redis/confmkdir -p /home/redis/datadocker run -p 6379:6379 --name redis -v /home/redis/conf/redis.conf:/etc/redis/redis.conf -v /home/redis/data:/data -d redis redis-server /etc/redis/redis.conf <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="20-搜索引擎"><a href="#20-搜索引擎" class="headerlink" title="20.搜索引擎"></a>20.搜索引擎</h2><h3 id="20-1简介"><a href="#20-1简介" class="headerlink" title="20.1简介"></a>20.1简介</h3><p>Elasticsearch是一个基于<a href="https://baike.baidu.com/item/Lucene/6753302">Lucene</a>的搜索服务器。它提供了一个分布式多用户能力的<a href="https://baike.baidu.com/item/%E5%85%A8%E6%96%87%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/7847410">全文搜索引擎</a>，基于RESTful web接口。Elasticsearch是用Java语言开发的，并作为Apache许可条款下的开放源码发布，是一种流行的企业级搜索引擎</p><h3 id="20-2安装"><a href="#20-2安装" class="headerlink" title="20.2安装"></a>20.2安装</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/elasticsearch/config<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/elasticsearch/data<span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /home/elasticsearch/plugins<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">"discovery.type=single-node"</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">"-Xms1g -Xmx1g"</span> <span class="token parameter variable">-v</span> /home/elasticsearch/config:/usr/share/elasticsearch/config <span class="token parameter variable">-v</span> /home/elasticsearch/data:/usr/share/elasticsearch/data <span class="token parameter variable">-v</span> /home/elasticsearch/plugins:/usr/share/elasticsearch/plugins elasticsearch:7.17.5<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token parameter variable">-e</span> <span class="token string">"discovery.type=single-node"</span> <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">"-Xms1g -Xmx1g"</span> <span class="token parameter variable">-v</span> /home/elasticsearch/plugins:/usr/share/elasticsearch/plugins elasticsearch:7.17.5<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> kibana <span class="token parameter variable">-p</span> <span class="token number">5601</span>:5601 <span class="token parameter variable">-e</span> <span class="token assign-left variable">ELASTICSEARCH_HOSTS</span><span class="token operator">=</span>http://192.168.30.137:9200 kibana:7.17.5<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vi</span> /etc/sysctl.conf<span class="token comment">#配置转发</span><span class="token assign-left variable">net.ipv4.ip_forward</span><span class="token operator">=</span><span class="token number">1</span><span class="token comment">#重启网络服务</span>systemctl restart network<span class="token comment">#验证配置,如果返回 net.ipv4.ip_forward = 1 则表示成功</span><span class="token function">sysctl</span> net.ipv4.ip_forward<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-3访问"><a href="#20-3访问" class="headerlink" title="20.3访问"></a>20.3访问</h3><p><a href="http://192.168.30.137:9200/">http://192.168.30.137:9200/</a></p><p><a href="http://192.168.30.137:5601/">http://192.168.30.137:5601/</a></p><h3 id="20-4名词"><a href="#20-4名词" class="headerlink" title="20.4名词"></a>20.4名词</h3><p><a href="https://www.elastic.co/guide/en/elastic-stack-glossary/current/terms.html">https://www.elastic.co/guide/en/elastic-stack-glossary/current/terms.html</a></p><p><strong>index（索引）</strong></p><p>Collection of JSON <a href="https://www.elastic.co/guide/en/elastic-stack-glossary/current/terms.html#glossary-document">documents</a></p><p><strong>type（类型）</strong></p><p>document（文档）</p><p>JSON object containing data stored in Elasticsearch</p><p><strong>ID</strong></p><p>Identifier for a <a href="https://www.elastic.co/guide/en/elastic-stack-glossary/current/terms.html#glossary-document">document</a></p><h3 id="20-5操作"><a href="#20-5操作" class="headerlink" title="20.5操作"></a>20.5操作</h3><p><a href="https://www.elastic.co/guide/en/kibana/6.7/tutorial-load-dataset.html">https://www.elastic.co/guide/en/kibana/6.7/tutorial-load-dataset.html</a></p><p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/7.17/index.html">https://www.elastic.co/guide/en/elasticsearch/reference/7.17/index.html</a></p><pre class="line-numbers language-json" data-language="json"><code class="language-json">#Dynamic field mapping##增 put index/type/idPUT my-index<span class="token number">-000001</span>/_doc/<span class="token number">1</span><span class="token punctuation">{</span>  <span class="token property">"create_date"</span><span class="token operator">:</span> <span class="token string">"2015/09/02"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-json" data-language="json"><code class="language-json">##查看 field mappingGET my-index<span class="token number">-000001</span>/_mapping<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><pre class="line-numbers language-json" data-language="json"><code class="language-json">#创建索引PUT /my-index#删除索引DELETE /my-index#自定义mappingPUT /my-index<span class="token punctuation">{</span>  <span class="token property">"mappings"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"properties"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"create_date"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"date"</span><span class="token punctuation">,</span>        <span class="token property">"format"</span> <span class="token operator">:</span> <span class="token string">"yyyy/MM/dd HH:mm:ss||yyyy/MM/dd||epoch_millis"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"name"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"type"</span> <span class="token operator">:</span> <span class="token string">"text"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"age"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"integer"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>#查看 field mappingGET my-index/_mapping#根据ID查询GET my-index/_doc/<span class="token number">1</span>#全文检索GET my-index/_search<span class="token punctuation">{</span>  <span class="token property">"took"</span> <span class="token operator">:</span> <span class="token number">227</span><span class="token punctuation">,</span> #耗时（秒）  <span class="token property">"timed_out"</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> #是否超时  <span class="token property">"_shards"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"total"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"successful"</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>    <span class="token property">"skipped"</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>    <span class="token property">"failed"</span> <span class="token operator">:</span> <span class="token number">0</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"hits"</span> <span class="token operator">:</span> <span class="token punctuation">{</span> #命中<span class="token number">3</span>条    <span class="token property">"total"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"value"</span> <span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token property">"relation"</span> <span class="token operator">:</span> <span class="token string">"eq"</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"max_score"</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>    <span class="token property">"hits"</span> <span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token comment">//json数组</span>      <span class="token punctuation">{</span>        <span class="token property">"_index"</span> <span class="token operator">:</span> <span class="token string">"my-index"</span><span class="token punctuation">,</span>        <span class="token property">"_type"</span> <span class="token operator">:</span> <span class="token string">"_doc"</span><span class="token punctuation">,</span>        <span class="token property">"_id"</span> <span class="token operator">:</span> <span class="token string">"1"</span><span class="token punctuation">,</span>        <span class="token property">"_score"</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>        <span class="token property">"_source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token property">"name"</span> <span class="token operator">:</span> <span class="token string">"lisi"</span><span class="token punctuation">,</span>          <span class="token property">"age"</span> <span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>          <span class="token property">"create_date"</span> <span class="token operator">:</span> <span class="token string">"2022/08/22"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"_index"</span> <span class="token operator">:</span> <span class="token string">"my-index"</span><span class="token punctuation">,</span>        <span class="token property">"_type"</span> <span class="token operator">:</span> <span class="token string">"_doc"</span><span class="token punctuation">,</span>        <span class="token property">"_id"</span> <span class="token operator">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span>        <span class="token property">"_score"</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>        <span class="token property">"_source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token property">"name"</span> <span class="token operator">:</span> <span class="token string">"zhangsan"</span><span class="token punctuation">,</span>          <span class="token property">"age"</span> <span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>          <span class="token property">"create_date"</span> <span class="token operator">:</span> <span class="token string">"2022/07/22"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span>        <span class="token property">"_index"</span> <span class="token operator">:</span> <span class="token string">"my-index"</span><span class="token punctuation">,</span>        <span class="token property">"_type"</span> <span class="token operator">:</span> <span class="token string">"_doc"</span><span class="token punctuation">,</span>        <span class="token property">"_id"</span> <span class="token operator">:</span> <span class="token string">"3"</span><span class="token punctuation">,</span>        <span class="token property">"_score"</span> <span class="token operator">:</span> <span class="token number">1.0</span><span class="token punctuation">,</span>        <span class="token property">"_source"</span> <span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token property">"name"</span> <span class="token operator">:</span> <span class="token string">"wangwu"</span><span class="token punctuation">,</span>          <span class="token property">"age"</span> <span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>          <span class="token property">"create_date"</span> <span class="token operator">:</span> <span class="token string">"2022/09/22"</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>#条件查询（全文）GET my-index/_search<span class="token punctuation">{</span>    <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"match_all"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>GET my-index/_search<span class="token punctuation">{</span>    <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">"name"</span><span class="token operator">:</span><span class="token string">"zhangsan"</span><span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span>#批量插入POST /account/_bulk<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-6-match"><a href="#20-6-match" class="headerlink" title="20.6 match"></a>20.6 match</h3><pre class="line-numbers language-json" data-language="json"><code class="language-json">GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"671 Bristol Street"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"address.keyword"</span><span class="token operator">:</span> <span class="token string">"671 Bristol Street"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"671 Bristol Street"</span><span class="token punctuation">,</span>        <span class="token property">"operator"</span><span class="token operator">:</span> <span class="token string">"and"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-7match-all"><a href="#20-7match-all" class="headerlink" title="20.7match_all"></a>20.7match_all</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">GET account/_search<span class="token punctuation">{</span>  <span class="token string">"query"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>    <span class="token string">"match_all"</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-8match-phrase"><a href="#20-8match-phrase" class="headerlink" title="20.8match_phrase"></a>20.8match_phrase</h3><pre class="line-numbers language-json" data-language="json"><code class="language-json">#短语查询GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"match_phrase"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"Street"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-9multi-match"><a href="#20-9multi-match" class="headerlink" title="20.9multi_match"></a>20.9multi_match</h3><pre class="line-numbers language-json" data-language="json"><code class="language-json">#多字段匹配GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"multi_match"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"query"</span><span class="token operator">:</span> <span class="token string">"Bristol Street Nanette"</span><span class="token punctuation">,</span>      <span class="token property">"fields"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"address"</span><span class="token punctuation">,</span><span class="token string">"firstname"</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-10分词"><a href="#20-10分词" class="headerlink" title="20.10分词"></a>20.10分词</h3><p><a href="https://github.com/medcl/elasticsearch-analysis-ik/releases/tag/v7.17.5">https://github.com/medcl/elasticsearch-analysis-ik/releases/tag/v7.17.5</a></p><pre class="line-numbers language-json" data-language="json"><code class="language-json">POST _analyze<span class="token punctuation">{</span>  <span class="token property">"analyzer"</span><span class="token operator">:</span> <span class="token string">"ik_smart"</span><span class="token punctuation">,</span>  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"博为峰培训"</span><span class="token punctuation">}</span>POST _analyze<span class="token punctuation">{</span>  <span class="token property">"analyzer"</span><span class="token operator">:</span> <span class="token string">"ik_max_word"</span><span class="token punctuation">,</span>  <span class="token property">"text"</span><span class="token operator">:</span> <span class="token string">"博为峰培训"</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-11聚合"><a href="#20-11聚合" class="headerlink" title="20.11聚合"></a>20.11聚合</h3><pre class="line-numbers language-json" data-language="json"><code class="language-json">#聚合GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"Bristol Street"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"ageCount"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"ageAvg"</span><span class="token operator">:</span><span class="token punctuation">{</span>      <span class="token property">"avg"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token property">"balanceSum"</span><span class="token operator">:</span><span class="token punctuation">{</span>      <span class="token property">"sum"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"balance"</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token punctuation">}</span>#聚合GET account/_search<span class="token punctuation">{</span>  <span class="token property">"query"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"match"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"address"</span><span class="token operator">:</span> <span class="token string">"Bristol Street"</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token property">"ageCount"</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token property">"terms"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"age"</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token property">"aggs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token property">"balanceSum"</span><span class="token operator">:</span> <span class="token punctuation">{</span>          <span class="token property">"sum"</span><span class="token operator">:</span> <span class="token punctuation">{</span>            <span class="token property">"field"</span><span class="token operator">:</span> <span class="token string">"balance"</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="20-12springboot集成es"><a href="#20-12springboot集成es" class="headerlink" title="20.12springboot集成es"></a>20.12springboot集成es</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-elasticsearch<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="21MQ"><a href="#21MQ" class="headerlink" title="21MQ"></a>21MQ</h2><h3 id="21-1简介"><a href="#21-1简介" class="headerlink" title="21.1简介"></a>21.1简介</h3><p>MQ（Message Queue）<a href="https://baike.baidu.com/item/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/4751675">消息队列</a>，是基础数据结构中“先进先出”的一种数据结构。一般用来解决应用解耦，异步消息，流量削峰等问题，实现高性能，高可用，可伸缩和最终一致性架构</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/mq.webp" alt="mq"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/image-20220222090334461.png" alt="image-20220222090334461"></p><h3 id="21-2产品"><a href="#21-2产品" class="headerlink" title="21.2产品"></a>21.2产品</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/5d3d9ddf0001a33a09742697.jpg" alt="5d3d9ddf0001a33a09742697"></p><h3 id="21-3RocketMQ"><a href="#21-3RocketMQ" class="headerlink" title="21.3RocketMQ"></a>21.3RocketMQ</h3><p><a href="https://rocketmq.apache.org/">https://rocketmq.apache.org/</a></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/mq%E5%8E%86%E5%8F%B2.png" alt="mq历史"></p><h3 id="21-4概念"><a href="#21-4概念" class="headerlink" title="21.4概念"></a>21.4概念</h3><p>消息生产者（Producer）</p><p>代理服务器（Broker Server）</p><p>消息消费者（Consumer）</p><p>主题（Topic）</p><p>消息（Message）</p><h3 id="21-5环境"><a href="#21-5环境" class="headerlink" title="21.5环境"></a>21.5环境</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/jqqqq.png" alt="jqqqq"></p><h3 id="21-6启动"><a href="#21-6启动" class="headerlink" title="21.6启动"></a>21.6启动</h3><p><a href="https://github.com/apache/rocketmq/tree/master">https://github.com/apache/rocketmq/tree/master</a></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#启动 Name Serverstart mqnamesrv#启动 Brokerstart mqbroker.cmd --helpstart mqbroker.cmd -n localhost:9876 autoCreateTopicEnable=true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-7控制台"><a href="#21-7控制台" class="headerlink" title="21.7控制台"></a>21.7控制台</h3><p><a href="https://github.com/apache/rocketmq-externals">https://github.com/apache/rocketmq-externals</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 系统笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>更新v0.91</title>
      <link href="/2023/01/30/geng-xin-v0.91/"/>
      <url>/2023/01/30/geng-xin-v0.91/</url>
      
        <content type="html"><![CDATA[<h2 id="更新内容"><a href="#更新内容" class="headerlink" title="更新内容"></a>更新内容</h2><p>文章插入图片</p><p>logo设计更改</p><p>主题色设计更改</p><p>菜单栏优化</p><p>优化文章模板</p>]]></content>
      
      
      
        <tags>
            
            <tag> 日志 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>JAVA基础知识笔记（一）</title>
      <link href="/2023/01/30/java-ji-chu-zhi-shi-bi-ji-yi/"/>
      <url>/2023/01/30/java-ji-chu-zhi-shi-bi-ji-yi/</url>
      
        <content type="html"><![CDATA[<h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220504093541040.png" alt="image-20220504093541040"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220504093601068.png" alt="image-20220504093601068"></p><h2 id="2-环境配置"><a href="#2-环境配置" class="headerlink" title="2. 环境配置"></a>2. 环境配置</h2><p><a href="https://www.oracle.com/java/technologies/downloads/#java11-windows">https://www.oracle.com/java/technologies/downloads/#java11-windows</a></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">java -versionjava version "1.8.0_311"Java(TM) SE Runtime Environment (build 1.8.0_311-b11)Java HotSpot(TM) 64-Bit Server VM (build 25.311-b11, mixed mode)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="2-1-path"><a href="#2-1-path" class="headerlink" title="2.1 path"></a>2.1 path</h3><p>指定命令搜索路径</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">C:\Java\jdk1.8.0_141\bin<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2.2 JAVA_HOME</p><p>指定JDK安装目录</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">C:\Java\jdk1.8.0_141<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="2-3-CLASSPATH"><a href="#2-3-CLASSPATH" class="headerlink" title="2.3 CLASSPATH"></a>2.3 CLASSPATH</h3><p>指定类搜索路径</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="3-JDK"><a href="#3-JDK" class="headerlink" title="3. JDK"></a>3. JDK</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20210705112617940.png" alt="image-20210705112617940"></p><ul><li><p><strong>JDK</strong>（Java Development Kit）开发工具包</p></li><li><p><strong>JRE</strong>（Java Running Environment） 运行时环境</p></li><li><p><strong>JVM</strong>（Java Virtual Machine）Java虚拟机，跨平台（跨操作系统）</p></li></ul><h2 id="4-虚拟机"><a href="#4-虚拟机" class="headerlink" title="4. 虚拟机"></a>4. 虚拟机</h2><p>虚拟机（Virtual Machine）就是一台虚拟的计算机（软件）</p><p>系统虚拟机软件：VisualBox，VMware</p><p>程序虚拟机：HotSpot，JRockit，J9(IBM)</p><h2 id="5-JVM"><a href="#5-JVM" class="headerlink" title="5. JVM"></a>5. JVM</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220504103601575.png" alt="image-20220504103601575"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/JVM%E8%B7%A8%E8%AF%AD%E8%A8%80.webp" alt="JVM跨语言"></p><h2 id="6-Java-Platform"><a href="#6-Java-Platform" class="headerlink" title="6. Java Platform"></a>6. Java Platform</h2><p>JAVA SE (标准版)  java语言核心</p><p>JAVA EE（企业版）</p><p>JAVA ME（微型版）</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> hello <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"hello world"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20210705112711709.png" alt="image-20210705112711709"></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#编译,生成字节码文件（.class）javac xxx.java#运行java xxx<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E9%AB%98%E7%BA%A7%E8%AF%AD%E8%A8%80.png" alt="高级语言"></p><h2 id="7-IDEA"><a href="#7-IDEA" class="headerlink" title="7. IDEA"></a>7. IDEA</h2><p>集成化开发工具</p><p>项目：project</p><p>模块：module</p><h2 id="8-Git"><a href="#8-Git" class="headerlink" title="8. Git"></a>8. Git</h2><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#增加一个新的远程仓库，并命名</span><span class="token function">git</span> remote <span class="token function">add</span> java22 https://gitee.com/boweifeng/java22.git<span class="token comment">#显示所有远程仓库</span><span class="token function">git</span> remote <span class="token parameter variable">-v</span><span class="token comment"># 强行推送当前分支到远程仓库，即使有冲突</span><span class="token function">git</span> push java22 <span class="token parameter variable">--force</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="9-基础语法"><a href="#9-基础语法" class="headerlink" title="9. 基础语法"></a>9. 基础语法</h2><h3 id="9-1-注释"><a href="#9-1-注释" class="headerlink" title="9.1 注释"></a>9.1 注释</h3><ul><li>单行注释 //  ctrl + /</li><li>多行注释 /<strong>/</strong></li><li>文档注释 /** */</li></ul><p><strong>作用</strong></p><ul><li>调试代码</li><li>注解释义</li></ul><p>Shift(两次)</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220505133941265.png" alt="image-20220505133941265"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220505134009777.png" alt="image-20220505134009777"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220505135935259.png" alt="image-20220505135935259"></p><h3 id="9-2-关键字"><a href="#9-2-关键字" class="headerlink" title="9.2 关键字"></a>9.2 关键字</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E5%85%B3%E9%94%AE%E5%AD%97.png" alt="关键字"></p><h3 id="9-3-变量"><a href="#9-3-变量" class="headerlink" title="9.3 变量"></a>9.3 变量</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  强类型语言  语法:  数据类型 变量名 = 值;*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="9-4-数据类型"><a href="#9-4-数据类型" class="headerlink" title="9.4 数据类型"></a>9.4 数据类型</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20211124123512706.png" alt="image-20211124123512706"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-1651730569174.png" alt="数据类型"></p><h3 id="9-5-类型转换"><a href="#9-5-类型转换" class="headerlink" title="9.5 类型转换"></a>9.5 类型转换</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2.png" alt="类型转换"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220505170105575.png" alt="image-20220505170105575"></p><h3 id="9-6-运算符"><a href="#9-6-运算符" class="headerlink" title="9.6 运算符"></a>9.6 运算符</h3><ol><li>算术</li><li>赋值</li><li>比较</li><li>逻辑</li><li>位运算</li><li>三目</li></ol><h3 id="9-7-语句"><a href="#9-7-语句" class="headerlink" title="9.7 语句"></a>9.7 语句</h3><ol><li>判断 <ul><li>if</li><li>if…else</li><li>if…else if</li></ul></li><li>选择<ul><li>switch</li></ul></li><li>循环<ul><li>for</li><li>while</li><li>do…while</li><li>break</li><li>continue</li></ul></li></ol><h3 id="9-8-方法"><a href="#9-8-方法" class="headerlink" title="9.8 方法"></a>9.8 方法</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">权限修饰符 返回值类型 方法名<span class="token punctuation">(</span>形参类型 形参名<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  语句<span class="token punctuation">;</span>  <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token number">1.</span>当方法没有返回值时，返回类型用<span class="token keyword">void</span>关键字<span class="token number">2.</span>方法重载<span class="token number">3.</span>可变参数<span class="token number">4.</span>参数传递<span class="token punctuation">(</span>值，址<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="10-快捷键"><a href="#10-快捷键" class="headerlink" title="10. 快捷键"></a>10. 快捷键</h2><ol><li>ctrl + y 删除一整行</li><li>ctrl + d 复制一行</li><li>ctrl + alt + l 格式化</li><li>ctrl + alt + v 自动生成变量名</li><li>alt + insert 生成构造方法，</li><li>alt + enter 自动实现抽象方法</li><li>ctrl + shift + u 大小写</li><li>ctrl + alt + m 生成方法</li><li>ctrl + alt + t 生成try</li></ol><h2 id="11-面向对象"><a href="#11-面向对象" class="headerlink" title="11. 面向对象"></a>11. 面向对象</h2><h3 id="11-1-类，对象"><a href="#11-1-类，对象" class="headerlink" title="11.1 类，对象"></a>11.1 类，对象</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  描述：类  1.属性（数据）  2.行为（功能）    类定义：  权限修饰符 class 类名 {    成员变量（属性）;    成员方法（行为）;  }    成员方法（一般方法，构造方法）    类名首字母大写    创建对象: new 类名()    对象：实体，容器，自定义类型（对基本数据类型的扩展）    成员变量和局部变量的区别：  1.成员变量定义在类中，作用范围是整个类    局部变量定义在方法中，语句中，局部代码块中，作用范围是所属区域  2.成员变量在堆内存的对象中，随着对象的创建而存在，随着对象的销毁而销毁，有默认值    局部变量在栈内存的方法中，随着所属区域的执行而存在，随着所属区域的完成而销毁，没有默认值*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-2-包"><a href="#11-2-包" class="headerlink" title="11.2 包"></a>11.2 包</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  包:package  管理类文件  命名：域名，com.bwf.xxx  类有了包之后，再使用时，要写全路径名（包名.包名...类名）  import*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-3-构造方法"><a href="#11-3-构造方法" class="headerlink" title="11.3 构造方法"></a>11.3 构造方法</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*      构造方法：构建对象时调用的方法，初始化对象      1.方法名就是类名      2.没有返回类型            有return      java中，每个类至少有一个构造方法，为了保证这一点，如果用户没有显示定义任何构造方法，      JVM将自动提供一个隐含的默认构造方法      如果类中显示定义了一个或多个构造方法，那么默认构造方法就没有了      this：代表当前对象（创建对象时，哪个对象调用了this所在的构造方法，this就代表那个对象）      构造方法和一般方法区别：      1.构造方法：对象创建时，被调用一次，初始化对象      2.一般方法：对象创建后，可被调用多次，提供功能     */</span>     <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-4-继承"><a href="#11-4-继承" class="headerlink" title="11.4 继承"></a>11.4 继承</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  类和类之间产生关系(父子)  子类 extends 父类  1.继承成员变量（包括private，但不能用）  2.当new子类对象时，一定会先调用父类的构造方法，对父类中的成员变量进行初始化，再调子类的构造方法，对子       类中的成员变量初始化  3.在构造方法的第一行有一条隐士的语句super()*/</span><span class="token comment">/*  重载(overloading):本类中  重写（override）:子父类中*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-5-封装"><a href="#11-5-封装" class="headerlink" title="11.5 封装"></a>11.5 封装</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token number">1.</span><span class="token keyword">private</span><span class="token number">2.</span><span class="token keyword">package</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E6%9D%83%E9%99%90%E4%BF%AE%E9%A5%B0%E7%AC%A6.jpg" alt="权限修饰符"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java">权限修饰符：<span class="token number">1.</span><span class="token keyword">private</span> <span class="token punctuation">(</span>成员变量，构造方法，一般方法<span class="token punctuation">)</span><span class="token number">2.</span><span class="token keyword">public</span> <span class="token punctuation">(</span>类，成员变量，构造方法，一般方法<span class="token punctuation">)</span><span class="token number">3.</span><span class="token keyword">protected</span> <span class="token punctuation">(</span>成员变量，构造方法，一般方法<span class="token punctuation">)</span><span class="token number">4.</span><span class="token keyword">default</span> <span class="token punctuation">(</span>类，成员变量，构造方法，一般方法<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-6-多态"><a href="#11-6-多态" class="headerlink" title="11.6 多态"></a>11.6 多态</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  多态：父类指向子类对象  1.向上转型（转成父类），不能调用子类特有的方法  2.向下转型    使用场景：方法参数类型（解耦）*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-7-抽象类"><a href="#11-7-抽象类" class="headerlink" title="11.7 抽象类"></a>11.7 抽象类</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">abstract</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="11-8-static"><a href="#11-8-static" class="headerlink" title="11.8 static"></a>11.8 static</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/* static修饰符 1.静态成员被所有对象共享 2.静态成员随着类的加载而加载 3.静态成员可以通过:类名.静态成员，对象.静态成员  static静态变量和实例变量的区别： 1.存储位置不同   实例变量存储在堆内存的对象中   静态变量存储在方法区的静态区中 2.生命周期不同   实例变量随着对象的创建而存在，随着对象的销毁而销毁   静态变量随着类的加载而存在，随着类的卸载而销毁 3.调动方式不同   实例变量：对象.实例成员   静态变量：类名.静态成员，对象.静态成员    静态代码块 static {  }*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-9-final"><a href="#11-9-final" class="headerlink" title="11.9 final"></a>11.9 final</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.final修饰的类，不能被继承  2.final修饰的方法，不能被重写  3.final修饰的变量，是常量，只能赋值一次，不允许修改（大写）*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="11-10-枚举类"><a href="#11-10-枚举类" class="headerlink" title="11.10 枚举类"></a>11.10 枚举类</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//enum</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="11-11-接口"><a href="#11-11-接口" class="headerlink" title="11.11 接口"></a>11.11 接口</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  interface  1.成员变量 public static final  2.成员方法(抽象方法 public abstract，默认方法)    类和接口（实现implements）  类和类（继承extends）  接口和接口（继承extends）    一个类只能有一个直接父类，可以同时实现多个接口    继承 is a  实现 has a*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="12-内部类"><a href="#12-内部类" class="headerlink" title="12. 内部类"></a>12. 内部类</h2><ol><li>成员内部类</li><li>静态内部类</li><li>局部内部类</li><li>匿名内部类</li></ol><h2 id="13-常用类"><a href="#13-常用类" class="headerlink" title="13. 常用类"></a>13. 常用类</h2><h3 id="13-1-String"><a href="#13-1-String" class="headerlink" title="13.1 String"></a>13.1 String</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.字符串是常量  2.char value[]    编码表：  1.ASCII  2.GB2312  3.GBK  4.GB 18030  5.UTF-8*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-2-StringBuffer"><a href="#13-2-StringBuffer" class="headerlink" title="13.2 StringBuffer"></a>13.2 StringBuffer</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  字符串缓冲区（char value[]）  初始容量是16    int newCapacity = (value.length &lt;&lt; 1) + 2;//新数组的长度    存储任意类型的数据，最终都会转成字符串输出    线程不安全*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-3-StringBuilder"><a href="#13-3-StringBuilder" class="headerlink" title="13.3 StringBuilder"></a>13.3 StringBuilder</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  线程安全*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="13-4-Object"><a href="#13-4-Object" class="headerlink" title="13.4 Object"></a>13.4 Object</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  public boolean equals(Object obj)    public int hashCode()    public String toString()*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-5-包装类"><a href="#13-5-包装类" class="headerlink" title="13.5 包装类"></a>13.5 包装类</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/* 包装类：           byte     Byte           short    Short           int      Integer           long     Long           float    Float           double   Double           char     Character           boolean  Boolean           xxx parseXxx(要转换的对应类型的数据)           int parseInt(int类型的数据)           long parseLong(long类型的数据)         */</span>          <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="13-6-Date"><a href="#13-6-Date" class="headerlink" title="13.6 Date"></a>13.6 Date</h3><h3 id="13-7-Calendar"><a href="#13-7-Calendar" class="headerlink" title="13.7 Calendar"></a>13.7 Calendar</h3><h3 id="13-8-LocalDate"><a href="#13-8-LocalDate" class="headerlink" title="13.8 LocalDate"></a>13.8 LocalDate</h3><h2 id="14-异常"><a href="#14-异常" class="headerlink" title="14. 异常"></a>14. 异常</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/java%E5%BC%82%E5%B8%B8.webp" alt="java异常"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/* 1.异常分类   编译时异常 throws 异常类（方法声明处）   运行时异常 throw 异常对象（方法中） 2.try...catch...finally 异常处理原则： 1.异常处理只能用于非正常情况， 不能用于控制代码的正常流程   异常会降低程序的性能，增加代码调试的复杂性 2.为异常提供说明文档 3.尽量避免异常，避免过于庞大的try代码块 4.在catch中尽量指定具体的异常类型*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="15-IO"><a href="#15-IO" class="headerlink" title="15. IO"></a>15. IO</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  I(input)输入（读）  O(output)输出（写）  1.数据类型    &gt;&gt;字符流    &gt;&gt;字节流  2.数据流向    &gt;&gt;输出流    &gt;&gt;输入流      桥梁流：  1.转换（字节流--&gt;字符流）  2.设置编码    字符流 = 字节流 + 编码表  FileOutputStream fos = new FileOutputStream("fo.txt");  OutputStreamWriter outputStreamWriter = new OutputStreamWriter(fos, "utf-8");    FileWriter    java.io 同步阻塞  java.nio 同步非阻塞*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/javaIo.webp" alt="javaIo"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220518105030889.png" alt="image-20220518105030889"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220518105133137.png" alt="image-20220518105133137"></p><h2 id="16-线程"><a href="#16-线程" class="headerlink" title="16. 线程"></a>16. 线程</h2><h3 id="16-1-创建线程方式"><a href="#16-1-创建线程方式" class="headerlink" title="16.1 创建线程方式"></a>16.1 创建线程方式</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*进程：正在进行中的程序，是系统进行资源分配核调度的基本单元，是操作系统结构的基础线程：是操作系统能够进行运算调度的最小单位。它被包含在进程之中，是进程中的实际运作单位。一条线程指的是进程中一个单一顺序的控制流，一个进程中可以并发多个线程，每条线程并行执行不同的任务创建线程的方式：1.继承Thread类，重写run方法2.实现Runnable接口，重写run方法3.实现Callable接口，重写call方法，FutureTask4.线程池线程默认名称：Thread-0,Thread-1...*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220519113502261.png" alt="image-20220519113502261"></p><h3 id="16-2-线程状态"><a href="#16-2-线程状态" class="headerlink" title="16.2 线程状态"></a>16.2 线程状态</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220519141913513.png" alt="image-20220519141913513"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220523091700926.png" alt="image-20220523091700926"></p><h3 id="16-3-线程安全"><a href="#16-3-线程安全" class="headerlink" title="16.3 线程安全"></a>16.3 线程安全</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  线程安全问题出现的原因：  1.多个线程同时操作共享数据（同一个资源）  2.操作共享数据的代码有多行    解决线程安全问题方式：  方式一: synchronized      1.同步代码块          synchronized (锁){//锁：对象            同步代码          }      2.同步方法        锁：当前对象      3.同步静态方法        锁：字节码文件对象（.class被加载到方法区后就会在堆内存中创建此.class对应的对象）      锁： 重量级 synchronized          轻量级           悲观锁          乐观锁  方式二：API  lock.lock(),lock.unlock()*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="16-4-生产者消费者"><a href="#16-4-生产者消费者" class="headerlink" title="16.4 生产者消费者"></a>16.4 生产者消费者</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220520133637447.png" alt="image-20220520133637447"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  线程通讯：wait() notify() notifyAll()          LockSupport.park(),LockSupport.unpark(thread);*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="16-5-死锁"><a href="#16-5-死锁" class="headerlink" title="16.5 死锁"></a>16.5 死锁</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220520152556782.png" alt="image-20220520152556782"></p><h3 id="16-6-线程池"><a href="#16-6-线程池" class="headerlink" title="16.6 线程池"></a>16.6 线程池</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//        ThreadPoolExecutor(int corePoolSize,                   //核心线程数</span><span class="token comment">//                            int maximumPoolSize,               //最大线程数</span><span class="token comment">//                            long keepAliveTime,                //存活时间</span><span class="token comment">//                            TimeUnit unit,                     //时间单位</span><span class="token comment">//                            BlockingQueue&lt;Runnable&gt; workQueue, //缓存队列</span><span class="token comment">//                            RejectedExecutionHandler handler)       //拒绝策略</span>        <span class="token comment">/*           拒绝策略：AbortPolicy丢弃任务，抛出异常（默认）                   CallerRunsPolicy，由调用（提交任务的线程）线程处理                   DiscardOldestPolicy，丢弃队列最前面的任务                   DiscardPolicy，丢弃任务，不抛出异常                   10 + 5 + 5 = 20                   最大线程数15+缓存队列5=20         */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E7%BA%BF%E7%A8%8B%E6%B1%A0-1653283547480.png" alt="线程池"></p><h3 id="16-7-ThreadLocal"><a href="#16-7-ThreadLocal" class="headerlink" title="16.7 ThreadLocal"></a>16.7 ThreadLocal</h3><h2 id="17-集合"><a href="#17-集合" class="headerlink" title="17. 集合"></a>17. 集合</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220523132938708.png" alt="image-20220523132938708"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.存储对象  2.长度可变    Collection  |--List     有序（存入和取出的顺序一致），可重复，有下标     |--ArrayList        数据结构:          数组（transient Object[] elementData;）          private static final int DEFAULT_CAPACITY = 10;//默认容量10          int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);        特点：查询快，增删慢        不同步     |--LinkedList        数据结构：双向链表，查询慢，增删快        不同步  |--Set     无序（存入和取出的顺序不一致），不可重复     |--HashSet        Hash表（HashMap）,底层 HashMap 实例的默认初始容量是 16，加载因子是 0.75        先判断对象的hashCode值        1.不同，直接存储        2.相同，再判断equals()的值，如果还相同，则不存，如果不同，则存储     |--TreeSet：有序，不可重复        1.实体类实现Comparable接口，重写compareTo()方法，让对象自身具有排序功能        此接口强行对实现它的每个类的对象进行整体排序。这种排序被称为类的自然排序，类的 compareTo 方法被称为它的自然比较方法。        2.自定义类实现Comparator接口，重写compare()方法，在创建TreeSet集合对象时作为参数，让集合自身具有排序功能        */</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  HashMap:key/value  默认初始容量 (16) 和默认加载因子 (0.75)  static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16  static final float DEFAULT_LOAD_FACTOR = 0.75f;    jdk1.7 Entry[]数据+链表  jdk1.8 Node&lt;K,V&gt;[] tab数组+TreeNode&lt;K,V&gt;红黑树+ Node&lt;K,V&gt; next单向链表    static final int TREEIFY_THRESHOLD = 8;  当数组容量&gt;=64且链表长度&gt;8,转红黑树    红黑树节点个数&lt;6,转单向链表    TreeMap:红黑树  private static final boolean RED   = false;  private static final boolean BLACK = true;  static final class Entry&lt;K,V&gt;    Hashtable:hash表（数组）  默认的初始容量 (11) 和加载因子 (0.75)*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220524150753040.png" alt="image-20220524150753040"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220524151400897.png" alt="image-20220524151400897"></p><h2 id="18-泛型"><a href="#18-泛型" class="headerlink" title="18. 泛型"></a>18. 泛型</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  泛型：泛指的类型，jdk1.5出现的安全机制  T:Type  E:Element  K:Key  V:Value  作用：  1.将运行时ClassCastException转到了编译阶段  2.避免了强制类型转换*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="19-JDK1-8新特性"><a href="#19-JDK1-8新特性" class="headerlink" title="19. JDK1.8新特性"></a>19. JDK1.8新特性</h2><h3 id="19-1-lambda表达式"><a href="#19-1-lambda表达式" class="headerlink" title="19.1 lambda表达式"></a>19.1 lambda表达式</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.无参，多个参数： ()不可省略    一个参数：()可以省略，  2.{}中只有一行代码，    无返回值{}可以省略    有返回值时{}和return都可省略*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.已经注册了储蓄账户多个  2.程序启动时，读取账户文件，反序列化，保存到ArryList集合中，就可以存钱了，当退出时，再把ArryList集合中    的对象序列化到文件中*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="19-2-函数式接口"><a href="#19-2-函数式接口" class="headerlink" title="19.2 函数式接口"></a>19.2 函数式接口</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  接口中只有一个抽象方式时，就是函数式接口  @FunctionalInterface  1.Consumer 消费型  2.Supplier 供给型  3.Function 函数型  4.Predicate 判断型*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="19-3-方法引用"><a href="#19-3-方法引用" class="headerlink" title="19.3 方法引用"></a>19.3 方法引用</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  方法引用：当lambada方法体的实现，已经有了API能实现同样的效果，可以选择使用方法引用  ::  1.对象::实例方法名  2.类::实例方法名  3.类::静态方法名  4.构造方法引用*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="19-4Stream"><a href="#19-4Stream" class="headerlink" title="19.4Stream"></a>19.4Stream</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.中间操作  2.终止操作：forEach，count()*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h2 id="20-网络编程"><a href="#20-网络编程" class="headerlink" title="20. 网络编程"></a>20. 网络编程</h2><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220526114851510.png" alt="image-20220526114851510"></p><h3 id="20-1-UDP"><a href="#20-1-UDP" class="headerlink" title="20.1 UDP"></a>20.1 UDP</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*Internet 协议集支持一个无连接的传输协议，该协议称为用户数据报协议（UDP，User Datagram Protocol）。UDP 为应用程序提供了一种无需建立连接就可以发送封装的 IP 数据包的方法。*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol><li><p>无连接</p></li><li><p>不可靠</p></li><li><p>快速传输</p></li></ol><h3 id="20-2-TCP"><a href="#20-2-TCP" class="headerlink" title="20.2 TCP"></a>20.2 TCP</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  传输控制协议（TCP，Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="21-数据库"><a href="#21-数据库" class="headerlink" title="21. 数据库"></a>21. 数据库</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  数据库管理系统(Database Management System)是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，简称DBMS  1.Mysql  2.Oracle  3.PostgreSQL  关系型数据库    SQL:结构化查询语言（Structured Query Language）简称SQL  1、数据查询语言（DQL: Data Query Language）:SELECT  2、数据操作语言（DML：Data Manipulation Language）:insert,update,delete  3、数据定义语言（DDL）:create,alter,drop  4、数据控制语言（DCL）  5、事务控制语言（TCL）*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-1-连接"><a href="#21-1-连接" class="headerlink" title="21.1 连接"></a>21.1 连接</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">mysql --help-h, --host=name     Connect to host.-u, --user=name     User for login if not current user.-P, --port=#        Port number to use for connection or 0 for default to-p, --password[=name] Password to use when connecting to servermysql -hlocalhost -uroot -p123456 -P3306<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-2-SQL"><a href="#21-2-SQL" class="headerlink" title="21.2 SQL"></a>21.2 SQL</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#显示所有数据库</span>show databases<span class="token punctuation">;</span><span class="token comment">#使用数据库 use 数据库名称;</span>use shop_data<span class="token punctuation">;</span><span class="token comment">#显示所有的表</span>show tables<span class="token punctuation">;</span><span class="token comment">#查看表结构 desc 表名称;</span>desc user<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-2-1-DDL"><a href="#21-2-1-DDL" class="headerlink" title="21.2.1 DDL"></a>21.2.1 DDL</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">--数据库-&gt;表-&gt;列（字段）</span><span class="token comment">--创建数据库 create database 数据库名称;</span><span class="token keyword">create</span> <span class="token keyword">database</span> test<span class="token punctuation">;</span><span class="token comment">--创建表</span><span class="token comment">-- create table 表名(列名 列类型);</span><span class="token keyword">create</span> <span class="token keyword">table</span> student<span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">,</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--添加列</span><span class="token comment">-- alter table 表名 add column 列名 列类型</span><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">add</span> sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--修改列名或类型</span><span class="token comment">-- alter table 表名 change 原列名 新列名 列新类型;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> student change sex stu_sex <span class="token keyword">int</span><span class="token punctuation">;</span><span class="token comment">-- alter table 表名 modify column 列名 列类型;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">modify</span> <span class="token keyword">column</span> stu_sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">--删表 drop table 表名;</span><span class="token keyword">drop</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span><span class="token comment">--删数据库 drop database 数据库名;</span><span class="token keyword">drop</span> <span class="token keyword">database</span> test<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-2-2-DML"><a href="#21-2-2-DML" class="headerlink" title="21.2.2 DML"></a>21.2.2 DML</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 插入</span><span class="token comment">-- insert into 表名 (列名1,列名2,列名3, ...)values(值1,值2，值3, ...)</span><span class="token keyword">insert</span> <span class="token keyword">into</span> student<span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">)</span><span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 修改</span><span class="token comment">-- update 表名 set 列名 = 值，...</span><span class="token keyword">update</span> student <span class="token keyword">set</span> id <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'李四'</span><span class="token punctuation">;</span><span class="token comment">-- 删除</span><span class="token comment">-- delete from 表名;</span><span class="token keyword">delete</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span><span class="token comment">-- truncate table 表名;</span><span class="token keyword">truncate</span> <span class="token keyword">table</span> student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-2-3-DQL"><a href="#21-2-3-DQL" class="headerlink" title="21.2.3 DQL"></a>21.2.3 DQL</h4><ol><li>单表查询</li></ol><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 全表扫描</span><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>update_time <span class="token keyword">from</span> student<span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span><span class="token keyword">select</span> id<span class="token punctuation">,</span>name <span class="token keyword">as</span> <span class="token string">'stu_name'</span><span class="token punctuation">,</span>sex <span class="token string">'性别'</span><span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>update_time <span class="token keyword">from</span> student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- where单条件</span><span class="token comment">-- 精确查询</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token comment">-- 范围查询</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> id <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> create_time <span class="token operator">between</span> <span class="token string">'2022-05-27 11:00:40'</span> <span class="token operator">and</span> <span class="token string">'2022-05-27 11:01:39'</span><span class="token punctuation">;</span><span class="token comment">-- 模糊查询 %匹配0~n个字符  _匹配0~1个字符</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'王%'</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'王_'</span><span class="token punctuation">;</span><span class="token comment">-- where多条件</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">and</span> name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">or</span> name <span class="token operator">=</span> <span class="token string">'李四'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 算术运算符 + - * / %</span><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary<span class="token operator">+</span><span class="token number">1000</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span><span class="token comment">-- 比较运算符 = != &lt;&gt; &lt; &gt; &lt;= &gt;=</span><span class="token keyword">select</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> salary <span class="token operator">&lt;&gt;</span> <span class="token number">1000</span> <span class="token string">'salary &lt;&gt; 1000'</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span><span class="token comment">-- 逻辑运算符 ! not &amp;&amp; and || or</span><span class="token comment">-- 位运算符 &amp; | ^ ~ &gt;&gt; &lt;&lt;</span><span class="token keyword">select</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> salary <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token keyword">from</span> student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 排序 </span><span class="token comment">-- order by 列1，列2  </span><span class="token comment">-- asc升序 desc降序</span><span class="token keyword">select</span> id<span class="token punctuation">,</span> name<span class="token punctuation">,</span> sex<span class="token punctuation">,</span> birthday<span class="token punctuation">,</span> salary <span class="token keyword">from</span> student <span class="token keyword">order</span> <span class="token keyword">by</span>  birthday <span class="token keyword">desc</span><span class="token punctuation">,</span> salary <span class="token keyword">asc</span><span class="token punctuation">;</span><span class="token comment">-- 先按生日降序，在此基础上再按工资升序</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 分组（统计）</span><span class="token keyword">SELECT</span>sex<span class="token punctuation">,</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token string">'总数'</span><span class="token punctuation">,</span><span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token string">'总和'</span><span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token string">'平均值'</span><span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token string">'最大值'</span><span class="token punctuation">,</span><span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token string">'最小值'</span><span class="token keyword">FROM</span>student<span class="token keyword">GROUP</span> <span class="token keyword">BY</span>sex<span class="token keyword">HAVING</span><span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">3000</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 分页 limit 偏移量, 查询个数</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">limit</span> <span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li>子查询</li></ol><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 单行子查询</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">=</span> <span class="token string">'赵六'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 多行子查询</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> salary <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'王%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student <span class="token keyword">where</span> salary <span class="token operator">not</span> <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> student <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'王%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>多表查询</li></ol><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 查询学生和学生所属班级信息 笛卡尔积</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">,</span> t_class<span class="token punctuation">;</span><span class="token comment">-- 内连接 （查询符合条件的数据）</span><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>s<span class="token punctuation">.</span>sex<span class="token punctuation">,</span>s<span class="token punctuation">.</span>birthday<span class="token punctuation">,</span>s<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>c<span class="token punctuation">.</span>id class_id<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name class_name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>num <span class="token keyword">from</span> t_student s<span class="token punctuation">,</span> t_class c <span class="token keyword">where</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>s<span class="token punctuation">.</span>sex<span class="token punctuation">,</span>s<span class="token punctuation">.</span>birthday<span class="token punctuation">,</span>s<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>c<span class="token punctuation">.</span>id class_id<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name class_name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>num <span class="token keyword">from</span> t_student s <span class="token keyword">inner</span> <span class="token keyword">join</span> t_class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>s<span class="token punctuation">.</span>sex<span class="token punctuation">,</span>s<span class="token punctuation">.</span>birthday<span class="token punctuation">,</span>s<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>c<span class="token punctuation">.</span>id class_id<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name class_name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>num <span class="token keyword">from</span> t_student s <span class="token keyword">inner</span> <span class="token keyword">join</span> t_class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> c<span class="token punctuation">.</span>id <span class="token keyword">where</span> s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token comment">-- 左连接（查询左表中所有的数据，右表中没有匹配的显示null）</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student s <span class="token keyword">left</span> <span class="token keyword">join</span> t_class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token comment">-- 右连接（查询右表中所有的数据，左表中没有匹配的显示null）</span><span class="token keyword">select</span> s<span class="token punctuation">.</span>id<span class="token punctuation">,</span>s<span class="token punctuation">.</span>name<span class="token punctuation">,</span>s<span class="token punctuation">.</span>sex<span class="token punctuation">,</span>s<span class="token punctuation">.</span>birthday<span class="token punctuation">,</span>s<span class="token punctuation">.</span>salary<span class="token punctuation">,</span>c<span class="token punctuation">.</span>id<span class="token punctuation">,</span>c<span class="token punctuation">.</span>name<span class="token punctuation">,</span>c<span class="token punctuation">.</span>num <span class="token keyword">from</span> t_student s <span class="token keyword">right</span> <span class="token keyword">join</span> t_class c <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> c<span class="token punctuation">.</span>id<span class="token punctuation">;</span><span class="token comment">-- union(去重) union all(不去重), 可以联合多个select语句，将它们的结果组合成单个结果集，合并时，两个表对应的列数和数据类型必须相同，且互相对应</span><span class="token keyword">select</span> <span class="token keyword">column</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表<span class="token number">1</span><span class="token keyword">union</span> <span class="token punctuation">[</span><span class="token keyword">all</span><span class="token punctuation">]</span><span class="token keyword">select</span> <span class="token keyword">column</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">from</span> 表<span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-2-4-DCL"><a href="#21-2-4-DCL" class="headerlink" title="21.2.4 DCL"></a>21.2.4 DCL</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 创建用户</span><span class="token comment">-- create user 用户名 identified by '密码'</span><span class="token keyword">create</span> <span class="token keyword">user</span> test02 identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token comment">-- mysql用户表</span><span class="token keyword">select</span> host<span class="token punctuation">,</span><span class="token keyword">user</span><span class="token punctuation">,</span>authentication_string <span class="token keyword">from</span> mysql<span class="token punctuation">.</span><span class="token keyword">user</span><span class="token punctuation">;</span><span class="token comment">-- 授权</span><span class="token comment">/* grant 权限1,权限2,…权限n on 数据库名.表名 to 用户名@主机名 identified by ‘连接口令’ select,update,insert,delete,drop,create... 数据库名：* 所有的库 表名：* 所有的表 all privileges 所有权限 主机名：localhost仅允许本地连接，%本地和远程都可连接*/</span><span class="token keyword">grant</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> test<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> test02<span class="token variable">@localhost</span> identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token comment">-- 刷新</span>flush <span class="token keyword">privileges</span><span class="token comment">-- 查看权限</span><span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">'用户名'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span><span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token string">'test02'</span><span class="token variable">@'localhost'</span><span class="token punctuation">;</span><span class="token comment">-- 撤销权限</span><span class="token keyword">revoke</span> <span class="token keyword">all</span> <span class="token keyword">privileges</span> <span class="token keyword">on</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'test02'</span><span class="token variable">@'localhost'</span><span class="token comment">-- 删除用户</span><span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token string">'test02'</span><span class="token variable">@'localhost'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-3-E-R"><a href="#21-3-E-R" class="headerlink" title="21.3 E-R"></a>21.3 E-R</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  E-R图也称实体-联系图(Entity Relationship Diagram)，提供了表示实体类型、属性和联系的方法，用来描述现实世界的概念模型。它是描述现实世界关系概念模型的有效方法。是表示概念关系模型的一种方式。用“矩形框”表示实体型，矩形框内写明实体名称；用“椭圆图框”或圆角矩形表示实体的属性，并用“实心线段”将其与相应关系的“实体型”连接起来；用”菱形框“表示实体型之间的联系成因，在菱形框内写明联系名，并用”实心线段“分别与有关实体型连接起来，同时在”实心线段“旁标上联系的类型（1:1,1:n或m:n）*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-4-约束"><a href="#21-4-约束" class="headerlink" title="21.4 约束"></a>21.4 约束</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 主键约束:唯一性（有且仅有一个）,联合主键 </span><span class="token comment">-- alter table 表名 add primary key (列,...);</span><span class="token comment">-- alter table student add primary key (id);</span><span class="token comment">-- 联合主键 </span><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 唯一性约束（可多个）</span><span class="token comment">-- alert table 表名 add [constraint 约束名称] unique key (列)</span><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">add</span> <span class="token keyword">constraint</span> uk_name <span class="token keyword">unique</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">-- 非空约束</span><span class="token comment">-- alter table 表名 change 原列名 新列名 列类型 NOT NULL;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> student change sex sex <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span><span class="token comment">-- 外键约束 foreign key</span><span class="token comment">/*  set null:从父表中删除或更新数据时，同时将字表中的外键列设置为空  cascade:从父表中删除或更新数据时，同时将字表中的关联数据删除或更新  restrict:不能先删除或更新主表，要先删或更新子表，才能删除或更新主表  no action:同restrict*/</span><span class="token comment">-- AUTO_INCREMENT 自增</span><span class="token comment">-- alter table 表名 auto_increment = 数字;</span><span class="token keyword">alter</span> <span class="token keyword">table</span> student <span class="token keyword">auto_increment</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">-- 默认值 DEFAULT</span><span class="token comment">-- 注释 COMMENT</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-5-数据类型"><a href="#21-5-数据类型" class="headerlink" title="21.5 数据类型"></a>21.5 数据类型</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220527111157643.png" alt="image-20220527111157643"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220527111233989.png" alt="image-20220527111233989"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220527111247195.png" alt="image-20220527111247195"></p><h3 id="21-6-函数"><a href="#21-6-函数" class="headerlink" title="21.6 函数"></a>21.6 函数</h3><h4 id="21-6-1-字符串函数"><a href="#21-6-1-字符串函数" class="headerlink" title="21.6.1 字符串函数"></a>21.6.1 字符串函数</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- length(列) 长度</span><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>length<span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token comment">-- concat 连接</span><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>concat<span class="token punctuation">(</span>name<span class="token punctuation">,</span><span class="token string">'_666'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token keyword">select</span> id<span class="token punctuation">,</span>name<span class="token punctuation">,</span>concat_ws<span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span><span class="token string">'666'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-6-2-数值函数"><a href="#21-6-2-数值函数" class="headerlink" title="21.6.2 数值函数"></a>21.6.2 数值函数</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">select</span> rand<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">,</span>floor<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>ceil<span class="token punctuation">(</span>rand<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="21-6-3-日期函数"><a href="#21-6-3-日期函数" class="headerlink" title="21.6.3 日期函数"></a>21.6.3 日期函数</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 获取日期，时间</span><span class="token keyword">select</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> curdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> curtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">current_date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">current_time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">current_timestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">-- 时间戳</span><span class="token keyword">select</span> unix_timestamp<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">from</span> dual<span class="token punctuation">;</span><span class="token comment">-- 格式化</span><span class="token comment">/*  Y:四位年 y:两位年  m:两位月 M:月份名称  d:两位天 D:月中的天数  h:12小时制 H:24小时制  i:分  s:秒*/</span><span class="token keyword">select</span> date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>日期运算</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 加</span><span class="token keyword">select</span> create_time<span class="token punctuation">,</span> date_add<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">1</span> <span class="token keyword">day</span><span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token comment">-- 减</span><span class="token keyword">select</span> create_time<span class="token punctuation">,</span> date_sub<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> <span class="token keyword">interval</span> <span class="token number">1</span> <span class="token keyword">day</span><span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token comment">-- 间隔天数</span><span class="token keyword">select</span> create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">,</span> datediff<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token comment">-- 间隔时间</span><span class="token keyword">select</span> create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">,</span> timediff<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><strong>字符串日期转换</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- 日期-字符串</span><span class="token keyword">select</span> date_format<span class="token punctuation">(</span>create_time<span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%i%:%s'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token comment">-- 字符串-日期</span><span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'2022-05-27 11:05:40'</span><span class="token punctuation">,</span><span class="token string">'%Y-%m-%d %H:%i:%s'</span><span class="token punctuation">)</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-6-4-流程控制函数"><a href="#21-6-4-流程控制函数" class="headerlink" title="21.6.4 流程控制函数"></a>21.6.4 流程控制函数</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">-- `IF`(expr1,expr2,expr3) 如果expr1的值为true, 返回expr2, 否则返回expr3</span><span class="token keyword">SELECT</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary<span class="token punctuation">,</span><span class="token keyword">IF</span> <span class="token punctuation">(</span>salary <span class="token operator">&gt;</span> <span class="token number">5000</span><span class="token punctuation">,</span><span class="token string">'领导'</span><span class="token punctuation">,</span><span class="token string">'员工'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">,</span> class_id<span class="token keyword">FROM</span>t_student<span class="token punctuation">;</span><span class="token comment">-- IFNULL(expr1,expr2) 如果expr1的值不为null, 返回expr1, 否则返回expr2</span><span class="token keyword">SELECT</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary<span class="token punctuation">,</span>create_time<span class="token punctuation">,</span>update_time<span class="token punctuation">,</span>class_id<span class="token punctuation">,</span>ifnull<span class="token punctuation">(</span>class_id<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token keyword">FROM</span>t_student<span class="token punctuation">;</span><span class="token comment">-- case when 条件1 then 结果1 when 条件2 then 结果2... else 结果n end</span><span class="token keyword">SELECT</span>id<span class="token punctuation">,</span>NAME<span class="token punctuation">,</span>sex<span class="token punctuation">,</span>birthday<span class="token punctuation">,</span>salary<span class="token punctuation">,</span><span class="token keyword">CASE</span><span class="token keyword">WHEN</span> salary <span class="token operator">&lt;=</span> <span class="token number">2000</span> <span class="token keyword">THEN</span><span class="token string">'初级'</span><span class="token keyword">WHEN</span> salary <span class="token operator">&gt;=</span> <span class="token number">3000</span> <span class="token operator">and</span> salary <span class="token operator">&lt;=</span><span class="token number">4000</span> <span class="token keyword">THEN</span><span class="token string">'中级'</span><span class="token keyword">ELSE</span><span class="token string">'高级'</span><span class="token keyword">END</span><span class="token punctuation">,</span> create_time<span class="token punctuation">,</span> update_time<span class="token punctuation">,</span> class_id<span class="token keyword">FROM</span>t_student<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-7-索引"><a href="#21-7-索引" class="headerlink" title="21.7 索引"></a>21.7 索引</h3><h4 id="21-7-1-索引类型"><a href="#21-7-1-索引类型" class="headerlink" title="21.7.1 索引类型"></a>21.7.1 索引类型</h4><ul><li>普通索引 Normal</li><li>主键索引 Primary</li><li>唯一性索引 Unique</li><li>全文索引 Full Text</li></ul><h4 id="21-7-2-创建索引"><a href="#21-7-2-创建索引" class="headerlink" title="21.7.2 创建索引"></a>21.7.2 创建索引</h4><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">index</span> 索引名称 <span class="token keyword">on</span> 表名（列）<span class="token keyword">create</span> <span class="token keyword">index</span> idx_salary <span class="token keyword">on</span> t_student<span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">unique</span> <span class="token keyword">index</span> 索引名称 <span class="token keyword">on</span> 表（列）<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-7-2-B-树"><a href="#21-7-2-B-树" class="headerlink" title="21.7.2 B+树"></a>21.7.2 B+树</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220530151455006.png" alt="image-20220530151455006"></p><p><strong>减少IO次数</strong></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> <span class="token identifier"><span class="token punctuation">`</span>t_student<span class="token punctuation">`</span></span><span class="token punctuation">;</span><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>t_student<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">COMMENT</span> <span class="token string">'主键'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'姓名'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>sex<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">'男'</span> <span class="token keyword">COMMENT</span> <span class="token string">'性别'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>birthday<span class="token punctuation">`</span></span> <span class="token keyword">date</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'生日'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'工资'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>create_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'创建时间'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>update_time<span class="token punctuation">`</span></span> <span class="token keyword">datetime</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'修改时间'</span><span class="token punctuation">,</span>  <span class="token identifier"><span class="token punctuation">`</span>class_id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 主键约束</span>  <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>uk_name<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 唯一性约束</span>  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>fk_class_id<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>class_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>idx_salary<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>salary<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">-- 普通索引</span>  <span class="token keyword">CONSTRAINT</span> <span class="token identifier"><span class="token punctuation">`</span>fk_class_id<span class="token punctuation">`</span></span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>class_id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> <span class="token identifier"><span class="token punctuation">`</span>t_class<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">SET</span> <span class="token boolean">NULL</span> <span class="token comment">-- 外键约束</span><span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">7</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="21-8-执行计划"><a href="#21-8-执行计划" class="headerlink" title="21.8 执行计划"></a>21.8 执行计划</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220530153158701.png" alt="image-20220530153158701"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220530154044812.png" alt="image-20220530154044812"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220530153810503.png" alt="image-20220530153810503"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220530153950098.png" alt="image-20220530153950098"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220530153545803.png" alt="image-20220530153545803"></p><h4 id="21-9-创建索引原则"><a href="#21-9-创建索引原则" class="headerlink" title="21.9 创建索引原则"></a>21.9 创建索引原则</h4><ul><li>经常作为查询条件的列</li><li>数据表中数据量大时建索引</li><li>经常做增删改的表不要建索引</li><li>经常做运算的字段不要建索引</li></ul><h3 id="21-8-事务"><a href="#21-8-事务" class="headerlink" title="21.8 事务"></a>21.8 事务</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*  事务特性ACID  1.原子性  2.一致性  3.隔离性  4.持久性*/</span><span class="token comment">/*  1.系统变量 @@    -- 全局    show global variables;    -- 会话    show session variables;    -- 查看指定的系统变量 1自动提交 0非自动提交    select @@global.autocommit;  2.自定义变量 @*/</span><span class="token comment">/*  1.设置事务非自动提交    set @@global.autocommit = 0（OFF）  2.开启事务    begin 或 start strancaction  3.执行sql  4.提交(回滚)    commit    rollback*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-9-存储引擎"><a href="#21-9-存储引擎" class="headerlink" title="21.9 存储引擎"></a>21.9 存储引擎</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220531093444576.png" alt="image-20220531093444576"></p><p><strong>行级锁</strong></p><p><strong>表级锁</strong></p><h3 id="21-10-视图"><a href="#21-10-视图" class="headerlink" title="21.10 视图"></a>21.10 视图</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*  视图是一种虚拟表，建立在已有表的基础上（基表）  create view 视图名称  as  语句;*/</span><span class="token comment">-- 创建视图</span><span class="token keyword">create</span> <span class="token keyword">view</span> vw1 <span class="token keyword">as</span> <span class="token keyword">select</span> c<span class="token punctuation">.</span>id<span class="token punctuation">,</span> c<span class="token punctuation">.</span>name<span class="token punctuation">,</span> c<span class="token punctuation">.</span>num<span class="token punctuation">,</span> s<span class="token punctuation">.</span>id <span class="token string">'stu_id'</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>name <span class="token string">'stu_name'</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>sex<span class="token punctuation">,</span> s<span class="token punctuation">.</span>birthday<span class="token punctuation">,</span> s<span class="token punctuation">.</span>salary  <span class="token keyword">from</span> t_class c<span class="token punctuation">,</span> t_student s <span class="token keyword">where</span> c<span class="token punctuation">.</span>id <span class="token operator">=</span> s<span class="token punctuation">.</span>class_id<span class="token punctuation">;</span><span class="token comment">-- 使用视图</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> vw1<span class="token punctuation">;</span><span class="token comment">-- 查看视图</span><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span><span class="token comment">-- 查看视图结构</span><span class="token keyword">desc</span> vw1<span class="token punctuation">;</span><span class="token comment">-- 查看视图的定义信息</span><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">view</span> vw1<span class="token punctuation">;</span><span class="token comment">-- 删除视图</span><span class="token keyword">drop</span> <span class="token keyword">view</span> vw1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-11-存储过程"><a href="#21-11-存储过程" class="headerlink" title="21.11 存储过程"></a>21.11 存储过程</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*  create procedure 存储过程名(in|out|inout 参数名 参数类型)  begin    语句;  end*/</span><span class="token comment">-- 创建</span><span class="token keyword">create</span> <span class="token keyword">procedure</span> pro1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token comment">-- 调用</span><span class="token keyword">call</span> pro1<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">-- 入参</span><span class="token keyword">create</span> <span class="token keyword">procedure</span> pro2<span class="token punctuation">(</span><span class="token operator">in</span> sid <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_student <span class="token keyword">where</span> id <span class="token operator">=</span> sid<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token comment">-- 调用</span><span class="token keyword">call</span> pro1<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">-- 入参 出参</span><span class="token keyword">create</span> <span class="token keyword">procedure</span> pro3<span class="token punctuation">(</span><span class="token operator">in</span> sid <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">out</span> sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">into</span> sname <span class="token keyword">from</span> t_student <span class="token keyword">where</span> id <span class="token operator">=</span> sid<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">call</span> pro3<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">@sname</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">-- @sname 自定义变量</span><span class="token keyword">select</span> <span class="token variable">@sname</span><span class="token punctuation">;</span><span class="token comment">/*  -- 定义会话变量      方式一：        set @变量名 = 值;      方式二：        select 列 into @变量名 [from 表]  -- 使用会话变量      select @变量名        -- 定义局部变量       declare 变量名 变量类型 default 默认值         -- 判断     if 条件表达式       then 语句     else 语句     end if*/</span><span class="token keyword">create</span> <span class="token keyword">procedure</span> pro4<span class="token punctuation">(</span><span class="token operator">in</span> sid <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token keyword">declare</span> s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">declare</span> s_salary <span class="token keyword">int</span><span class="token punctuation">;</span>  <span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> salary <span class="token keyword">into</span> s_name<span class="token punctuation">,</span> s_salary <span class="token keyword">from</span> t_student <span class="token keyword">where</span> id <span class="token operator">=</span> sid<span class="token punctuation">;</span>  <span class="token keyword">if</span> s_salary <span class="token operator">&gt;</span> <span class="token number">5000</span>    <span class="token keyword">then</span> <span class="token keyword">set</span> s_salary <span class="token operator">=</span> s_salary <span class="token operator">&lt;&lt;</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">else</span> <span class="token keyword">set</span> s_salary <span class="token operator">=</span> s_salary <span class="token operator">&lt;&lt;</span> <span class="token number">2</span><span class="token punctuation">;</span>  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>  <span class="token keyword">update</span> t_student <span class="token keyword">set</span> salary <span class="token operator">=</span> s_salary <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> s_name<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">call</span> pro4<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token comment">-- 循环</span><span class="token comment">/*  [while_label]:while 循环条件 do    循环体;  end while while_label;  [loop_label]:loop    循环体;  end loop loop_label;*/</span><span class="token keyword">create</span> <span class="token keyword">procedure</span> pro5<span class="token punctuation">(</span><span class="token keyword">out</span> rid <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token keyword">declare</span> id <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>  test_loop:<span class="token keyword">loop</span>    <span class="token keyword">set</span> id <span class="token operator">=</span> id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> id <span class="token operator">&gt;</span> <span class="token number">3</span>      <span class="token keyword">then</span> <span class="token keyword">leave</span> test_loop<span class="token punctuation">;</span>    <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>  <span class="token keyword">end</span> <span class="token keyword">loop</span> test_loop<span class="token punctuation">;</span>  <span class="token keyword">set</span> rid <span class="token operator">=</span> id<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token keyword">call</span> pro5<span class="token punctuation">(</span><span class="token variable">@rid</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">select</span> <span class="token variable">@rid</span><span class="token punctuation">;</span><span class="token comment">/*  游标：  1.声明游标    declare 游标名称 cursor for SQL;  2.打开游标    open 游标名称;  3.使用游标    fetch 游标名称 into 变量;  4.关闭游标*/</span><span class="token keyword">create</span> <span class="token keyword">procedure</span> pro6<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token comment">-- 声明局部变量</span>  <span class="token keyword">declare</span> s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">-- 定义游标</span>  <span class="token keyword">declare</span> my_cur <span class="token keyword">cursor</span> <span class="token keyword">for</span> <span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">from</span> t_student<span class="token punctuation">;</span>  <span class="token comment">-- 打开游标</span>  <span class="token keyword">open</span> my_cur<span class="token punctuation">;</span>  <span class="token comment">-- 循环</span>  cur_ioop:<span class="token keyword">loop</span>  <span class="token comment">-- 使用游标</span>  <span class="token keyword">fetch</span> my_cur <span class="token keyword">into</span> s_name<span class="token punctuation">;</span>  <span class="token comment">-- 判断</span>  <span class="token keyword">if</span> s_name <span class="token operator">=</span> <span class="token string">'小米'</span>    <span class="token keyword">then</span>     <span class="token keyword">update</span> t_student <span class="token keyword">set</span> salary <span class="token operator">=</span> salary <span class="token operator">+</span> <span class="token number">1000</span> <span class="token keyword">where</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token operator">=</span> s_name<span class="token punctuation">;</span>    <span class="token comment">-- 离开循环</span>    <span class="token keyword">leave</span> cur_ioop<span class="token punctuation">;</span>  <span class="token comment">-- 结束判断</span>  <span class="token keyword">end</span> <span class="token keyword">if</span><span class="token punctuation">;</span>  <span class="token comment">-- 结束循环</span>  <span class="token keyword">end</span> <span class="token keyword">loop</span> cur_ioop<span class="token punctuation">;</span>  <span class="token comment">-- 关闭游标</span>  <span class="token keyword">close</span> my_cur<span class="token punctuation">;</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-12-函数"><a href="#21-12-函数" class="headerlink" title="21.12 函数"></a>21.12 函数</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*  create function 函数名(参数名 参数类型,...)  returns 返回类型  begin    函数体;  end；*/</span><span class="token keyword">create</span> <span class="token keyword">function</span> fn2<span class="token punctuation">(</span>s_id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">returns</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token keyword">begin</span>  <span class="token keyword">declare</span> s_name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">select</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">into</span> s_name <span class="token keyword">from</span> t_student <span class="token keyword">where</span> id <span class="token operator">=</span> s_id<span class="token punctuation">;</span>  <span class="token keyword">return</span> s_name<span class="token punctuation">;</span><span class="token keyword">end</span><span class="token comment">-- 执行函数</span><span class="token keyword">select</span> 函数名<span class="token punctuation">(</span>实参<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="21-13-触发器"><a href="#21-13-触发器" class="headerlink" title="21.13 触发器"></a>21.13 触发器</h3><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*  create trigger 触发器名称  {before | after}  {insert | update | delete} on 表名  for each row  begin    语句;  end;*/</span><span class="token keyword">create</span> <span class="token keyword">trigger</span> after_insert <span class="token keyword">after</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> t_student<span class="token keyword">for each row</span><span class="token keyword">begin</span>  <span class="token keyword">insert</span> <span class="token keyword">into</span> t_class<span class="token punctuation">(</span>name<span class="token punctuation">,</span>num<span class="token punctuation">)</span><span class="token keyword">value</span><span class="token punctuation">(</span><span class="token string">'500期'</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="22-反射"><a href="#22-反射" class="headerlink" title="22. 反射"></a>22. 反射</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  Java的反射（reflection）机制是指在程序的运行状态中，可以构造任意一个类的对象，可以了解任意一个对象所属的类，可以了解任意一个类的成员变量和方法，可以调用任意一个对象的属性和方法*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="23-JDBC"><a href="#23-JDBC" class="headerlink" title="23. JDBC"></a>23. JDBC</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  Java数据库连接，（Java Database Connectivity，简称JDBC）是Java语言中用来规范客户端程序如何来访问数据库的应用程序接口，提供了诸如查询和更新数据库中数据的方法。JDBC也是Sun Microsystems的商标。我们通常说的JDBC是面向关系型数据库的*/</span><span class="token comment">/*  1.导包 mysql-connector-java-5.1.49.jar  2.加载（注册）驱动程序    Class.forName("com.mysql.jdbc.Driver");  3.建立链接    Connection connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/test?serverTimezone=UTC", "root", "123456");  4.执行SQL语句    PreparedStatement preparedStatement = connection.prepareStatement("select * from t_student");  5.处理结果集    ResultSet resultSet = preparedStatement.executeQuery();  6.关闭数据库*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220602091429909.png" alt="image-20220602091429909"></p><pre class="line-numbers language-sql" data-language="sql"><code class="language-sql"><span class="token comment">/*  事务：ACID  插入班级表，获取刚刚插入的班级数据的主键值  insert into t_class(name,num)values('110期',110);  //获取刚插入数据的主键值  select last_insert_id();  插入学生表，class_id的就是班级数据的主键值  insert into `t_student`(name,sex,salary,birthday,create_time,update_time,class_id) values ('张三', '男', 1000, '2022-06-02', '2022-06-02 09:50:12', '2022-06-02 09:50:12', ?)*/</span><span class="token comment">/*  1.设置非自动提交    Connection接口中方法setAutoCommit(false)  2.执行SQL  3.提交Connection接口中方法commit() | 回滚Connection接口中方法rollback()*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="24-lombok"><a href="#24-lombok" class="headerlink" title="24. lombok"></a>24. lombok</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  1.idea安装lombok  2.导包  3.使用注解    @Getter and @Setter    @FieldNameConstants    @ToString    @EqualsAndHashCode    @AllArgsConstructor, @RequiredArgsConstructor and @NoArgsConstructor    @Log, @Log4j, @Log4j2, @Slf4j, @XSlf4j, @CommonsLog, @JBossLog, @Flogger, @CustomLog    @Data    @Builder    @SuperBuilder    @Singular    @Delegate    @Value    @Accessors    @Wither    @With    @SneakyThrows    @val    @var    experimental @var    @UtilityClass    Lombok config system*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="25-注解"><a href="#25-注解" class="headerlink" title="25.注解"></a>25.注解</h2><h3 id="25-1-概念"><a href="#25-1-概念" class="headerlink" title="25.1 概念"></a>25.1 概念</h3><p>从JDK5开始,Java增加对元数据的支持，也就是注解，注解与注释是有一定区别的，可以把注解理解为代码里的特殊标记，这些标记可以在编译，类加载，运行时被读取，并执行相应的处理。通过注解开发人员可以在不改变原有代码和逻辑的情况下在源代码中嵌入补充信息</p><h3 id="25-2-元注解"><a href="#25-2-元注解" class="headerlink" title="25.2 元注解"></a>25.2 元注解</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*    @Retention：注解保留策略RetenionPolicy    @Target：注解的使用范围ElementType        ElementType.TYPE 类或接口        ElementType.FIELD, 成员变量        ElementType.METHOD 方法    @Documented    @Inherited    @Result*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="25-3-自定义注解"><a href="#25-3-自定义注解" class="headerlink" title="25.3 自定义注解"></a>25.3 自定义注解</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  权限修饰符 @interface 注解名 {      类型 成员名() default 值;  }*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="26-单元测试"><a href="#26-单元测试" class="headerlink" title="26. 单元测试"></a>26. 单元测试</h2><h3 id="26-1-概念"><a href="#26-1-概念" class="headerlink" title="26.1 概念"></a>26.1 概念</h3><p>JUnit是一个Java语言的单元测试框架</p><h3 id="26-2-测试"><a href="#26-2-测试" class="headerlink" title="26.2 测试"></a>26.2 测试</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  junit-4.13.2.jar  hamcrest-core-1.3.jar    @Test 使用该注解标注的public void方法是一个测试方法  @Before 在任意使用@Test注解标注的public void方法执行前执行*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="27-三层架构"><a href="#27-三层架构" class="headerlink" title="27. 三层架构"></a>27. 三层架构</h2><p>视图层（View）-&gt; 业务层（Service）-&gt; 持久层（Dao）-&gt;数据库</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">servicedaopojo<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="28-xml"><a href="#28-xml" class="headerlink" title="28. xml"></a>28. xml</h2><h3 id="28-1-简介"><a href="#28-1-简介" class="headerlink" title="28.1 简介"></a>28.1 简介</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  Extensible Markup Language 可扩展标记语言*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="28-2-作用"><a href="#28-2-作用" class="headerlink" title="28.2 作用"></a>28.2 作用</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/*  存储数据  传输数据*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="28-3-语法"><a href="#28-3-语法" class="headerlink" title="28.3 语法"></a>28.3 语法</h3><ol><li>文档声明（版本，编码）</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>根标签（有且仅有一个）</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8" ?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stus</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stu</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>张三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>20<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stu</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>stu</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>李四<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>age</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>age</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stu</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>stus</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="28-4-注释"><a href="#28-4-注释" class="headerlink" title="28.4 注释"></a>28.4 注释</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 注释内容 --&gt;</span><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cla</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- &lt;name&gt;22期&lt;/name&gt; --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>num</span><span class="token punctuation">&gt;</span></span>30<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>num</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cla</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="28-5-解析方式"><a href="#28-5-解析方式" class="headerlink" title="28.5 解析方式"></a>28.5 解析方式</h3><p><em>dom4j</em>是一个Java的XML API</p><h3 id="28-6-约束"><a href="#28-6-约束" class="headerlink" title="28.6 约束"></a>28.6 约束</h3><ol><li><p><strong>DTD约束</strong></p></li><li><p><strong>Schema约束</strong>（.xsd）</p></li></ol><h2 id="29-JPA"><a href="#29-JPA" class="headerlink" title="29. JPA"></a>29. JPA</h2><p>JPA是Java Persistence API的简称，中文名Java持久层API，是JDK 5.0注解或XML描述对象－关系表的映射关系，并将运行期的实体<a href="https://baike.baidu.com/item/%E5%AF%B9%E8%B1%A1%E6%8C%81%E4%B9%85%E5%8C%96/7316192">对象持久化</a>到数据库中。</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220606150831513.png" alt="image-20220606150831513"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/jdbc.png" alt="jdbc"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/jpa.png" alt="jpa"></p><h2 id="30-Tomcat"><a href="#30-Tomcat" class="headerlink" title="30. Tomcat"></a>30. Tomcat</h2><p><a href="https://tomcat.apache.org/">https://tomcat.apache.org/</a></p><p>Tomcat 服务器是一个免费的开放源代码的Web 应用服务器，属于轻量级应用<a href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8">服务器</a></p><h3 id="30-1-启停"><a href="#30-1-启停" class="headerlink" title="30.1 启停"></a>30.1 启停</h3><p>默认端口：8080</p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#启动apache-tomcat-9.0.63\bin\startup.bat#停止apache-tomcat-9.0.63\bin\shutdown.bat<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="30-2-配置"><a href="#30-2-配置" class="headerlink" title="30.2 配置"></a>30.2 配置</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">apache-tomcat-9.0.63\conf\server.xml<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="30-3-日志"><a href="#30-3-日志" class="headerlink" title="30.3 日志"></a>30.3 日志</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">apache-tomcat-9.0.63\logs\catalina.2022-06-06.logapache-tomcat-9.0.63\logs\localhost.2022-06-06.log<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="30-4-web应用"><a href="#30-4-web应用" class="headerlink" title="30.4 web应用"></a>30.4 web应用</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">#部署目录apache-tomcat-9.0.63\webapps<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="30-5-工作目录"><a href="#30-5-工作目录" class="headerlink" title="30.5 工作目录"></a>30.5 工作目录</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">apache-tomcat-9.0.63\work<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="30-6-修改端口"><a href="#30-6-修改端口" class="headerlink" title="30.6 修改端口"></a>30.6 修改端口</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span> <span class="token attr-name">port</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8081<span class="token punctuation">"</span></span> <span class="token attr-name">protocol</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>HTTP/1.1<span class="token punctuation">"</span></span>               <span class="token attr-name">connectionTimeout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>20000<span class="token punctuation">"</span></span>               <span class="token attr-name">redirectPort</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>8443<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h3 id="30-7-部署方式"><a href="#30-7-部署方式" class="headerlink" title="30.7 部署方式"></a>30.7 部署方式</h3><p>web项目结构：WEB-INF/web.xml</p><ol><li><p>方式一</p><p>把web项目放在webapps目录下</p></li><li><p>方式二</p></li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>localhost<span class="token punctuation">"</span></span>  <span class="token attr-name">appBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>webapps<span class="token punctuation">"</span></span>            <span class="token attr-name">unpackWARs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span> <span class="token attr-name">autoDeploy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- path访问路径，docBase项目路径 --&gt;</span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/web02<span class="token punctuation">"</span></span> <span class="token attr-name">docBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>D:\works22\web02<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>方式三</li></ol><p>apache-tomcat-9.0.63\conf\Catalina\localhost，新建xml文件（web03.xml）</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token prolog">&lt;?xml version="1.0" encoding="utf-8" ?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/web03<span class="token punctuation">"</span></span> <span class="token attr-name">docBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>D:\works22\web03<span class="token punctuation">"</span></span><span class="token punctuation">/&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="30-8-idea创建web"><a href="#30-8-idea创建web" class="headerlink" title="30.8 idea创建web"></a>30.8 idea创建web</h3><p>创建JAVA项目，再添加web结构</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607104326604.png" alt="image-20220607104326604"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607104301006.png" alt="image-20220607104301006"></p><h3 id="30-9-idea集成tomcat"><a href="#30-9-idea集成tomcat" class="headerlink" title="30.9 idea集成tomcat"></a>30.9 idea集成tomcat</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607105157073.png" alt="image-20220607105157073"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607105255380.png" alt="image-20220607105255380"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607105839077.png" alt="image-20220607105839077"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607110259072.png" alt="image-20220607110259072"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607110439023.png" alt="image-20220607110439023"></p><h3 id="30-10-idea部署web"><a href="#30-10-idea部署web" class="headerlink" title="30.10 idea部署web"></a>30.10 idea部署web</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">C</span><span class="token operator">:</span>\<span class="token class-name">Users</span>\admin\<span class="token class-name">AppData</span>\<span class="token class-name">Local</span>\<span class="token class-name">JetBrains</span>\<span class="token class-name">IntelliJIdea2021</span><span class="token number">.1</span>\tomcat\b93e6603<span class="token operator">-</span><span class="token number">3</span>cc2<span class="token operator">-</span><span class="token number">4996</span><span class="token operator">-</span><span class="token number">8588</span><span class="token operator">-</span><span class="token number">0957f</span><span class="token number">561</span>c216 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607135125403.png" alt="image-20220607135125403"></p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">C</span><span class="token operator">:</span>\<span class="token class-name">Users</span>\admin\<span class="token class-name">AppData</span>\<span class="token class-name">Local</span>\<span class="token class-name">JetBrains</span>\<span class="token class-name">IntelliJIdea2021</span><span class="token number">.1</span>\tomcat\b93e6603<span class="token operator">-</span><span class="token number">3</span>cc2<span class="token operator">-</span><span class="token number">4996</span><span class="token operator">-</span><span class="token number">8588</span><span class="token operator">-</span><span class="token number">0957f</span><span class="token number">561</span>c216<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607135642884.png" alt="image-20220607135642884"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220607135807540.png" alt="image-20220607135807540"></p><h3 id="30-11-日志乱码"><a href="#30-11-日志乱码" class="headerlink" title="30.11 日志乱码"></a>30.11 日志乱码</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">IntelliJIdea2021</span><span class="token number">.1</span>\tomcat\b93e6603<span class="token operator">-</span><span class="token number">3</span>cc2<span class="token operator">-</span><span class="token number">4996</span><span class="token operator">-</span><span class="token number">8588</span><span class="token operator">-</span><span class="token number">0957f</span><span class="token number">561</span>c216\conf\logging<span class="token punctuation">.</span>properties<span class="token comment">//51行</span><span class="token class-name"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>logging<span class="token punctuation">.</span></span>ConsoleHandler</span><span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token constant">GBK</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="31-Servlet"><a href="#31-Servlet" class="headerlink" title="31. Servlet"></a>31. Servlet</h2><h3 id="31-1-是什么"><a href="#31-1-是什么" class="headerlink" title="31.1 是什么"></a>31.1 是什么</h3><p>Servlet（Server Applet）是<a href="https://baike.baidu.com/item/Java/85979">Java</a> Servlet的简称，称为小服务程序或服务连接器，用Java编写的<a href="https://baike.baidu.com/item/%E6%9C%8D%E5%8A%A1%E5%99%A8/100571">服务器</a>端程序，具有独立于平台和<a href="https://baike.baidu.com/item/%E5%8D%8F%E8%AE%AE/13020269">协议</a>的特性，主要功能在于交互式地浏览和生成数据，生成动态<a href="https://baike.baidu.com/item/Web/150564">Web</a>内容</p><h3 id="31-2-实现方式"><a href="#31-2-实现方式" class="headerlink" title="31.2 实现方式"></a>31.2 实现方式</h3><ol><li>实现javax.servlet.Servlet接口，重写接口中的抽象方法</li><li>继承javax.servlet.GenericServlet抽象类，实现抽象方法</li><li>继承javax.servlet.http.HttpServlet类，重写doGet()，doPost()…</li></ol><h3 id="31-3-生命周期方法"><a href="#31-3-生命周期方法" class="headerlink" title="31.3 生命周期方法"></a>31.3 生命周期方法</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//对象创建后执行一次</span><span class="token number">1.</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token class-name">ServletConfig</span> servletConfig<span class="token punctuation">)</span><span class="token comment">//请求到来时执行多次</span><span class="token number">2.</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">service</span><span class="token punctuation">(</span><span class="token class-name">ServletRequest</span> servletRequest<span class="token punctuation">,</span> <span class="token class-name">ServletResponse</span> servletResponse<span class="token punctuation">)</span><span class="token comment">//对象销毁前执行一次</span><span class="token number">3.</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="31-4-load-on-startup"><a href="#31-4-load-on-startup" class="headerlink" title="31.4 load-on-startup"></a>31.4 load-on-startup</h3><ol><li>负整数或不存在, Servlet对象在第一次请求到来时创建</li><li>正整数或0，Servlet对象随着tomcat的启动而创建</li></ol><h3 id="31-5-ServletConfig"><a href="#31-5-ServletConfig" class="headerlink" title="31.5 ServletConfig"></a>31.5 ServletConfig</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>serverDemo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.bwf.servlet.ServerDemo01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>init-param</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-name</span><span class="token punctuation">&gt;</span></span>name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-name</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param-value</span><span class="token punctuation">&gt;</span></span>zhangsan<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param-value</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>init-param</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>load-on-startup</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="31-6-ServletRequest"><a href="#31-6-ServletRequest" class="headerlink" title="31.6 ServletRequest"></a>31.6 ServletRequest</h3><p>封装请求数据，请求到来时创建，请求结束销毁</p><h3 id="31-7-ServletResponse"><a href="#31-7-ServletResponse" class="headerlink" title="31.7 ServletResponse"></a>31.7 ServletResponse</h3><p>封装相应数据，请求到来时创建，请求结束销毁</p><h3 id="31-8-ServletContext"><a href="#31-8-ServletContext" class="headerlink" title="31.8 ServletContext"></a>31.8 ServletContext</h3><p>域对象</p><p>tomcat启动时创建，停止时销毁（一个项目对应一个）</p><h3 id="31-9-请求方式"><a href="#31-9-请求方式" class="headerlink" title="31.9 请求方式"></a>31.9 请求方式</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608103912917.png" alt="image-20220608103912917"></p><h3 id="31-10-依赖问题"><a href="#31-10-依赖问题" class="headerlink" title="31.10 依赖问题"></a>31.10 依赖问题</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608111036281.png" alt="image-20220608111036281"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608111207739.png" alt="image-20220608111207739"></p><h3 id="31-11-请求流程"><a href="#31-11-请求流程" class="headerlink" title="31.11 请求流程"></a>31.11 请求流程</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608113427907.png" alt="image-20220608113427907"></p><h3 id="31-12-乱码"><a href="#31-12-乱码" class="headerlink" title="31.12 乱码"></a>31.12 乱码</h3><ol><li>GET请求</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>name <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">,</span> <span class="token string">"gbk"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li>POST请求</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">setCharacterEncoding</span><span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="3"><li>响应乱码</li></ol><pre class="line-numbers language-java" data-language="java"><code class="language-java">resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">"text/html;charset=utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="31-13-转发"><a href="#31-13-转发" class="headerlink" title="31.13 转发"></a>31.13 转发</h3><p>一次请求，一次响应，由最后一个servlet完成（响应头，响应体）</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"servlet路径"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dispatcher<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608153115796.png" alt="image-20220608153115796"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608153248148.png" alt="image-20220608153248148"></p><h3 id="31-14-包含"><a href="#31-14-包含" class="headerlink" title="31.14 包含"></a>31.14 包含</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">RequestDispatcher</span> dispatcher <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">"servlet路径"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>dispatcher<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608155438579.png" alt="image-20220608155438579"></p><h3 id="31-15-重定向"><a href="#31-15-重定向" class="headerlink" title="31.15 重定向"></a>31.15 重定向</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">//方式一                     /项目路径/servlet路径</span>resp<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">"Location"</span><span class="token punctuation">,</span><span class="token string">"/web03_war_exploded/r02"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>resp<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">302</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//方式二            /项目路径/servlet路径</span>resp<span class="token punctuation">.</span><span class="token function">sendRedirect</span><span class="token punctuation">(</span><span class="token string">"https://www.atstudy.com/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608161714587.png" alt="image-20220608161714587"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608162220536.png" alt="image-20220608162220536"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220608162408890.png" alt="image-20220608162408890"></p><h3 id="31-16-转发-重定向"><a href="#31-16-转发-重定向" class="headerlink" title="31.16 转发|重定向"></a>31.16 转发|重定向</h3><ol><li><p>请求转发是一次请求一次响应，重定向是两次请求两次响应</p></li><li><p>请求转发地址栏不变，重定向地址栏显示最后的servlet路径</p></li><li><p>请求转发只能转发到本项目的其它servlet，重定向既可以到本项目的其它servlet也可以到其它项目</p></li><li><p>请求转发是服务器端行为，重定向是客户端行为</p></li></ol><h3 id="31-17-Servlet三大域"><a href="#31-17-Servlet三大域" class="headerlink" title="31.17 Servlet三大域"></a>31.17 Servlet三大域</h3><ol><li><p>ServletContext  整个项目</p></li><li><p>HttpServletRequest  一次请求</p></li></ol><h3 id="31-18-BaseServlet"><a href="#31-18-BaseServlet" class="headerlink" title="31.18 BaseServlet"></a>31.18 BaseServlet</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220609103302415.png" alt="image-20220609103302415"></p><h2 id="32-过滤器"><a href="#32-过滤器" class="headerlink" title="32. 过滤器"></a>32. 过滤器</h2><ol><li>自定义类实现javax.servlet.Filter接口，重写接口中的方法</li><li>web.xml配置</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 过滤所有请求 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- 过滤指定请求（根据servlet名称） --&gt;</span><span class="token comment">&lt;!--        &lt;servlet-name&gt;studentServlet&lt;/servlet-name&gt;--&gt;</span>        <span class="token comment">&lt;!-- 过滤指定请求（根据servlet路径） --&gt;</span><span class="token comment">&lt;!--        &lt;url-pattern&gt;/stu&lt;/url-pattern&gt;--&gt;</span>        <span class="token comment">&lt;!-- 过滤类型 --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>REQUEST<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>FORWARD<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>INCLUDE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>ERROR<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dispatcher</span><span class="token punctuation">&gt;</span></span>ASYNC<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dispatcher</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>请求到servlet之前执行预处理工作，比如：鉴权，设置编码</p><h2 id="33-监听器"><a href="#33-监听器" class="headerlink" title="33. 监听器"></a>33. 监听器</h2><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!--    1. ServletContextListener       监听 ServletContext 对象创建销毁    2. ServletContextAttributeListener       监听 ServletContext 对象添加、删除、修改数据    3. HttpSessionListener    4. HttpSessionAttributeListener    5. ServletReqestListener    6. ServletReqestAttributeListener--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>listener-class</span><span class="token punctuation">&gt;</span></span>com.bwf.listener.ScListenerDemo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener-class</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>listener</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="34-注解"><a href="#34-注解" class="headerlink" title="34. 注解"></a>34. 注解</h2><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@WebServlet</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">"/stu01"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> loadOnStartup <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token annotation punctuation">@WebFilter</span><span class="token punctuation">(</span>urlPatterns <span class="token operator">=</span> <span class="token string">"/*"</span><span class="token punctuation">)</span><span class="token annotation punctuation">@WebListener</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h2 id="35-JSP"><a href="#35-JSP" class="headerlink" title="35. JSP"></a>35. JSP</h2><h3 id="35-1-简介"><a href="#35-1-简介" class="headerlink" title="35.1 简介"></a>35.1 简介</h3><p><strong>JSP</strong>（全称<strong>J</strong>ava<strong>S</strong>erver <strong>P</strong>ages）一种<a href="https://baike.baidu.com/item/%E5%8A%A8%E6%80%81%E7%BD%91%E9%A1%B5%E6%8A%80%E6%9C%AF/9415956">动态网页技术</a>标准</p><h3 id="35-2-组成"><a href="#35-2-组成" class="headerlink" title="35.2 组成"></a>35.2 组成</h3><p>java + html + 指令</p><h3 id="35-3-原理"><a href="#35-3-原理" class="headerlink" title="35.3 原理"></a>35.3 原理</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Local</span>\<span class="token class-name">JetBrains</span>\<span class="token class-name">IntelliJIdea2021</span><span class="token number">.1</span>\tomcat\b93e6603<span class="token operator">-</span><span class="token number">3</span>cc2<span class="token operator">-</span><span class="token number">4996</span><span class="token operator">-</span><span class="token number">8588</span><span class="token operator">-</span><span class="token number">0957f</span><span class="token number">561</span>c216\work\<span class="token class-name">Catalina</span>\localhost\web06_war_exploded\org\apache\jsp<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220609162454718.png" alt="image-20220609162454718"></p><h3 id="35-4-隐式对象"><a href="#35-4-隐式对象" class="headerlink" title="35.4 隐式对象"></a>35.4 隐式对象</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220610135740798.png" alt="image-20220610135740798"></p><h3 id="35-5-指令"><a href="#35-5-指令" class="headerlink" title="35.5 指令"></a>35.5 指令</h3><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;%@ 指令名 属性名 = "属性值" %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li>page</li></ol><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">&lt;!-- 设置响应编码 --&gt;&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li><p>taglib</p></li><li><p>include</p></li></ol><h2 id="36-EL表达式"><a href="#36-EL表达式" class="headerlink" title="36. EL表达式"></a>36. EL表达式</h2><h3 id="36-1-语法"><a href="#36-1-语法" class="headerlink" title="36.1 语法"></a>36.1 语法</h3><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">${} 全域查找 page-&gt;request-&gt;session-&gt;application<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="36-2-隐式对象"><a href="#36-2-隐式对象" class="headerlink" title="36.2 隐式对象"></a>36.2 隐式对象</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220610140318166.png" alt="image-20220610140318166"></p><h3 id="36-3-运算符"><a href="#36-3-运算符" class="headerlink" title="36.3 运算符"></a>36.3 运算符</h3><h2 id="37-JSTL"><a href="#37-JSTL" class="headerlink" title="37. JSTL"></a>37. JSTL</h2><h3 id="37-1-简介"><a href="#37-1-简介" class="headerlink" title="37.1 简介"></a>37.1 简介</h3><p>JSP标准标签库（JSTL）是一个JSP标签集合，它封装了JSP应用的通用核心功能</p><h3 id="37-2-标签"><a href="#37-2-标签" class="headerlink" title="37.2 标签"></a>37.2 标签</h3><ol><li>核心标签</li></ol><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">setifchooseforeach<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>格式标签</li></ol><pre class="line-numbers language-jsp" data-language="jsp"><code class="language-jsp">formatDateformatNumber<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="3"><li><p>sql标签</p></li><li><p>xml标签</p></li></ol><h3 id="37-3-安装"><a href="#37-3-安装" class="headerlink" title="37.3 安装"></a>37.3 安装</h3><p>jstl-1.2.jar</p><h2 id="38-fastjson"><a href="#38-fastjson" class="headerlink" title="38. fastjson"></a>38. fastjson</h2><p><a href="https://github.com/alibaba/fastjson">https://github.com/alibaba/fastjson</a></p><h3 id="38-1-安装"><a href="#38-1-安装" class="headerlink" title="38.1 安装"></a>38.1 安装</h3><p>fastjson-1.2.83.jar</p><h3 id="38-2-注解"><a href="#38-2-注解" class="headerlink" title="38.2 注解"></a>38.2 注解</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token annotation punctuation">@Data</span><span class="token annotation punctuation">@NoArgsConstructor</span><span class="token annotation punctuation">@AllArgsConstructor</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">implements</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">"stuId"</span><span class="token punctuation">,</span> ordinal <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> sex<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> date<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span> serialize <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> salary<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">,</span> format <span class="token operator">=</span> <span class="token string">"yyyy-MM-dd HH:mm:ss"</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> createTime<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token class-name">Date</span> updateTime<span class="token punctuation">;</span>    <span class="token annotation punctuation">@JSONField</span><span class="token punctuation">(</span>ordinal <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">)</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> classID<span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="32-3-方法"><a href="#32-3-方法" class="headerlink" title="32.3 方法"></a>32.3 方法</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token class-name">Student</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">"张三"</span><span class="token punctuation">,</span> <span class="token string">"男"</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//对象-&gt;json</span><span class="token class-name">String</span> jsonString <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//json-&gt;对象</span><span class="token class-name">Student</span> stu2 <span class="token operator">=</span> <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">parseObject</span><span class="token punctuation">(</span>jsonString<span class="token punctuation">,</span> <span class="token class-name">Student</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>stu2<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="39-cookie"><a href="#39-cookie" class="headerlink" title="39. cookie"></a>39. cookie</h2><h3 id="39-1-简介"><a href="#39-1-简介" class="headerlink" title="39.1 简介"></a>39.1 简介</h3><p>cookie是http协议规定的，用于跟踪用户状态，由服务器端创建保存到客户端的一个key/value数据，当浏览器再次请求服务器时，把cookie随请求发送到服务器</p><h3 id="39-2-cookie"><a href="#39-2-cookie" class="headerlink" title="39.2 cookie"></a>39.2 cookie</h3><p>chrome://settings/cookies/detail?site=localhost&amp;search=cookie</p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220613141717732.png" alt="image-20220613141717732"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220613141757798.png" alt="image-20220613141757798"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220613141819968.png" alt="image-20220613141819968"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220613142049922.png" alt="image-20220613142049922"></p><h3 id="39-3-maxAge"><a href="#39-3-maxAge" class="headerlink" title="39.3 maxAge"></a>39.3 maxAge</h3><ol><li>maxAge &gt; 0 浏览器会把cookie保存到客户端硬盘上，有效时长为maxAge的值</li><li>maxAge = 0 浏览器会立刻删除cookie</li><li>maxAge &lt; 0 cookie保存在浏览器内存中</li></ol><h3 id="39-4-path"><a href="#39-4-path" class="headerlink" title="39.4 path"></a>39.4 path</h3><p>aCookie.path = /web08_war_exploded</p><p>bCookie.path = /web08_war_exploded/jsp</p><p>cCookie.path = /web08_war_exploded/jsp/user</p><h3 id="39-5-domain"><a href="#39-5-domain" class="headerlink" title="39.5 domain"></a>39.5 domain</h3><pre class="line-numbers language-java" data-language="java"><code class="language-java">cookie<span class="token punctuation">.</span><span class="token function">setDomain</span><span class="token punctuation">(</span><span class="token string">".baidu.com"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="40-HttpSession"><a href="#40-HttpSession" class="headerlink" title="40. HttpSession"></a>40. HttpSession</h2><p>Httpsession是JavaWeb提供的用于会话跟踪的服务器端对象</p><pre class="line-numbers language-java" data-language="java"><code class="language-java">req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol><li><p>如果sessionId不存在，创建session对象，同时生成sessionId保存到cookie中，响应到客户端</p></li><li><p>如果sessionId存在，则通过sessionId查找session对象，如果没有找到，创建session对象，生成新的sessionId保存到cookie中，响应到客户端，如果找到，则直接响应到客户端</p></li></ol><h2 id="41-上传下载"><a href="#41-上传下载" class="headerlink" title="41. 上传下载"></a>41. 上传下载</h2><h3 id="41-1-安装"><a href="#41-1-安装" class="headerlink" title="41.1 安装"></a>41.1 安装</h3><ol><li>commons-fileupload-1.4.jar</li><li>commons-io-2.11.0.jar</li></ol><h3 id="41-2-页面"><a href="#41-2-页面" class="headerlink" title="41.2 页面"></a>41.2 页面</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>upload<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>multipart/form-data<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    用户名:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">/&gt;</span></span>    上传:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>file<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>fl<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>提交<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="42-Maven"><a href="#42-Maven" class="headerlink" title="42. Maven"></a>42. Maven</h2><h3 id="42-1-项目构建"><a href="#42-1-项目构建" class="headerlink" title="42.1 项目构建"></a>42.1 项目构建</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/%E6%9E%84%E5%BB%BA.png" alt="构建"></p><h3 id="42-2-jar包管理"><a href="#42-2-jar包管理" class="headerlink" title="42.2 jar包管理"></a>42.2 jar包管理</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220106091758931.png" alt="image-20220106091758931"></p><h3 id="42-3-安装"><a href="#42-3-安装" class="headerlink" title="42.3 安装"></a>42.3 安装</h3><p><a href="https://maven.apache.org/">https://maven.apache.org/</a></p><p><a href="https://archive.apache.org/dist/maven/maven-3/">https://archive.apache.org/dist/maven/maven-3/</a></p><h3 id="42-4-配置环境变量"><a href="#42-4-配置环境变量" class="headerlink" title="42.4 配置环境变量"></a>42.4 配置环境变量</h3><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">MAVEN_HOME=D:\works22\apache-maven-3.8.6Path=%MAVEN_HOME%\bin;Path=D:\works22\apache-maven-3.8.6\bin<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">mvn -version<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="42-5-仓库配置"><a href="#42-5-仓库配置" class="headerlink" title="42.5 仓库配置"></a>42.5 仓库配置</h3><ol><li>本地仓库</li></ol><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.2.0<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>          <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- localRepository   | The path to the local repository maven will use to store artifacts.   |   | Default: ${user.home}/.m2/repository  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;  --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>localRepository</span><span class="token punctuation">&gt;</span></span>D:\works22\repo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>localRepository</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="2"><li>公共仓库地址（阿里云）</li></ol><p><a href="https://developer.aliyun.com/mvn/guide">https://developer.aliyun.com/mvn/guide</a></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>aliyunmaven<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>阿里云公共仓库<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://maven.aliyun.com/repository/public<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="42-6-idea集成maven"><a href="#42-6-idea集成maven" class="headerlink" title="42.6 idea集成maven"></a>42.6 idea集成maven</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614151739487.png" alt="image-20220614151739487"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614152254186.png" alt="image-20220614152254186"></p><h3 id="42-7-创建maven项目"><a href="#42-7-创建maven项目" class="headerlink" title="42.7 创建maven项目"></a>42.7 创建maven项目</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614152701306.png" alt="image-20220614152701306"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614160449045.png" alt="image-20220614160449045"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614153238114.png" alt="image-20220614153238114"></p><pre class="line-numbers language-cmd" data-language="cmd"><code class="language-cmd">[INFO] Parameter: version, Value: 1.0-SNAPSHOT[INFO] Parameter: groupId, Value: com.bwf[INFO] Parameter: artifactId, Value: maven01[INFO] Project created from Archetype in dir: C:\Users\admin\AppData\Local\Temp\archetypetmp\maven01[INFO] ------------------------------------------------------------------------[INFO] BUILD SUCCESS[INFO] ------------------------------------------------------------------------[INFO] Total time:  41.711 s[INFO] Finished at: 2022-06-14T15:33:51+08:00[INFO] ------------------------------------------------------------------------Process finished with exit code 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614155638024.png" alt="image-20220614155638024"></p><h3 id="42-8-项目结构"><a href="#42-8-项目结构" class="headerlink" title="42.8 项目结构"></a>42.8 项目结构</h3><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220614163513772.png" alt="image-20220614163513772"></p><h3 id="42-9-pom-xml"><a href="#42-9-pom-xml" class="headerlink" title="42.9 pom.xml"></a>42.9 pom.xml</h3><p>project object model 项目对象模型</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 组织ID --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.bwf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 项目名 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 版本 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 项目类型 war jar(默认) pom --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 自定义属性 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>1.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.source</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span>1.7<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>maven.compiler.target</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 依赖 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="42-10-生命周期"><a href="#42-10-生命周期" class="headerlink" title="42.10 生命周期"></a>42.10 生命周期</h3><p><img src="C:/Users/席/Desktop/学习文档/img/1111.png" alt="1111"></p><ol><li>Clean Lifecycle       清理（clean）</li></ol><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220615103042019.png" alt="image-20220615103042019"></p><ol start="2"><li><p>Default  Lifecycle   编译（compile），测试（test），打包（package），安装（install）</p></li><li><p>Site Lifecycle           生成项目报告，站点，发布站点</p></li></ol><h3 id="42-11-依赖管理"><a href="#42-11-依赖管理" class="headerlink" title="42.11 依赖管理"></a>42.11 依赖管理</h3><h4 id="42-11-1-依赖范围"><a href="#42-11-1-依赖范围" class="headerlink" title="42.11.1 依赖范围"></a>42.11.1 依赖范围</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220615144239223.png" alt="image-20220615144239223"></p><h4 id="42-11-2-依赖传递"><a href="#42-11-2-依赖传递" class="headerlink" title="42.11.2 依赖传递"></a>42.11.2 依赖传递</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220615135804425.png" alt="image-20220615135804425"></p><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220615144703083.png" alt="image-20220615144703083"></p><ol><li>当依赖中出现相同资源时，层级越深，优先级越低，层级越浅，优先级越高</li><li>当同级配置了相同资源的不同版本，配置顺序靠后的覆盖配置顺序靠前的</li></ol><h4 id="42-11-3-可选依赖"><a href="#42-11-3-可选依赖" class="headerlink" title="42.11.3 可选依赖"></a>42.11.3 可选依赖</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220615164832846.png" alt="image-20220615164832846"></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 可选依赖：true隐藏 默认false可见 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="42-11-4-依赖排除"><a href="#42-11-4-依赖排除" class="headerlink" title="42.11.4 依赖排除"></a>42.11.4 依赖排除</h4><p><img src="/../images/JAVA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/image-20220615165131650.png" alt="image-20220615165131650"></p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 依赖排除 --&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.bwf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven01<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>fastjson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="42-12-聚合"><a href="#42-12-聚合" class="headerlink" title="42.12 聚合"></a>42.12 聚合</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.bwf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>shop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>pom<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modules</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>../shop_service<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>../shop_web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>module</span><span class="token punctuation">&gt;</span></span>../shop_dao/shop_dao<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>module</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modules</span><span class="token punctuation">&gt;</span></span>    <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="42-13-继承"><a href="#42-13-继承" class="headerlink" title="42.13 继承"></a>42.13 继承</h3><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.bwf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>shop<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.0-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>shop_web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>packaging</span><span class="token punctuation">&gt;</span></span>war<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>packaging</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="43-Druid"><a href="#43-Druid" class="headerlink" title="43. Druid"></a>43. Druid</h2><p><a href="https://github.com/alibaba/druid/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98">https://github.com/alibaba/druid/wiki/%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98</a></p>]]></content>
      
      
      <categories>
          
          <category> 学习笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
            <tag> 系统笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>主题测试</title>
      <link href="/2023/01/29/zhu-ti-ce-shi/"/>
      <url>/2023/01/29/zhu-ti-ce-shi/</url>
      
        <content type="html"><![CDATA[<p>​矮行星它们的特点是外幔和表面由冰冻的水和气体元素组成的一些低熔点的化合物组成，有的其中混杂着的一些由重元素化合物组成的岩石质的矿物质，厚度占星体半径的比例相对较大，但所占星体相对质量却不大，内部可能有一个岩石质占主要物质组成部分的核心，占星体质量的绝大部分，星体体积和总质量不大，平均密度较小，一些大行星的卫星也具有这种类似冰矮星的结构，像木卫二、三、四，土卫一、六等。对于行星级的冰矮星来讲，最大的是冥王星，直径2370±20公里，最小的卡戎，直径约800公里左右。像谷神星这样的距太阳较近的行星，表面的冰物质主要是水，而冥王星和卡戎的表面冰物质主要是水和熔点更低的甲烷、氮、一氧化碳等物质。过去曾将这些矮行星算作小行星中的一类，直到2006年才将它们从一般小行星中分离出来，划作单独的一类，称为矮行星，并把冥王星和冥卫一归入其中。<br>​矮行星的这种星体结构和它产生的地处太阳系外围的低温环境和自身的质量有关，一方面，太阳的温度不足以将它们的由气体元素组成的低熔点物质驱散，另一方面，它们自身原始质量较小，星体本身不能将氢氦等较轻的轻元素气体束缚住。<br>​但星体收缩产生的热量也不能将较重一些的气体元素组成的化合物如水和碳氢化合物等完全驱散，而会保留下一部分，同时它的足够的引力又使它足可以形成分层的物质结构，使较轻的物质浮于较重的由重元素组成的岩石质物质的表面，并随着星体以后的冷却，在表面上凝固下来，因此，会形成具有这种物质结构的星体。</p>]]></content>
      
      
      <categories>
          
          <category> 文档资料 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 测试 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
